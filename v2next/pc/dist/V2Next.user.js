// ==UserScript==
// @name         V2Next
// @namespace    http://tampermonkey.net/
// @version      10.3
// @author       zyronon
// @description  V2Next - 一个好用的V2EX脚本！ 已适配移动端
// @license      GPL License
// @icon         https://v2ex-script.vercel.app/favicon.ico
// @homepage     https://github.com/zyronon/web-scripts
// @homepageURL  https://github.com/zyronon/web-scripts
// @supportURL   https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @downloadURL  https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @updateURL    https://update.greasyfork.org/scripts/458024/V2Next.user.js
// @match        https://v2ex.com/
// @match        https://v2ex.com/?tab=*
// @match        https://v2ex.com/t/*
// @match        https://v2ex.com/recent*
// @match        https://v2ex.com/go/*
// @match        https://v2ex.com/member/*
// @match        https://v2ex.com/changes*
// @match        https://*.v2ex.com/
// @match        https://*.v2ex.com/?tab=*
// @match        https://*.v2ex.com/t/*
// @match        https://*.v2ex.com/recent*
// @match        https://*.v2ex.com/go/*
// @match        https://*.v2ex.com/member/*
// @match        https://*.v2ex.com/changes*
// @require      https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js
// @require      https://lib.baomitu.com/vue/3.4.14/vue.runtime.global.prod.min.js
// @grant        GM_addStyle
// @grant        GM_openInTab
// @grant        GM_registerMenuCommand
// ==/UserScript==


(function (vue) {
    'use strict';

    var W=(e=>(e.Home="Home",e.Node="Node",e.Post="Post",e.Member="Member",e.Changes="Changes",e))(W||{}),P=(e=>(e[e.FloorInFloor=0]="FloorInFloor",e[e.FloorInFloorNoCallUser=4]="FloorInFloorNoCallUser",e[e.FloorInFloorNested=5]="FloorInFloorNested",e[e.Like=1]="Like",e[e.V2exOrigin=2]="V2exOrigin",e[e.OnlyOp=3]="OnlyOp",e[e.New=6]="New",e))(P||{});const Jt=400,Sn={name:"Tooltip",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {show:!1}},methods:{showPop(e){if(this.disabled||!this.title)return;e.stopPropagation();let t=e.target.getBoundingClientRect();this.show=!0,vue.nextTick(()=>{var s,a;let n=(a=(s=this.$refs)==null?void 0:s.tip)==null?void 0:a.getBoundingClientRect();if(!n)return;t.top<50?this.$refs.tip.style.top=t.top+t.height+10+"px":this.$refs.tip.style.top=t.top-n.height-10+"px";let o=n.width,i=t.width;this.$refs.tip.style.left=t.left-(o-i)/2+"px";});}},render(){let e=this.$slots.default()[0];return vue.createVNode(vue.Fragment,null,[this.show&&this.title&&vue.createVNode(vue.Teleport,{to:"body"},{default:()=>[vue.createVNode(vue.Transition,{name:"fade"},{default:()=>[vue.createVNode("div",{ref:"tip",className:"tip"},[this.title])]})]}),vue.createVNode(e,{onClick:()=>this.show=!1,onmouseenter:t=>this.showPop(t),onmouseleave:()=>this.show=!1},null)])}};const K=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},Ue=K(Sn,[["__scopeId","data-v-ee672411"]]),In=vue.defineComponent({__name:"BaseSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){return (n,o)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["switch",{active:n.modelValue}]),onClick:o[0]||(o[0]=i=>n.$emit("update:modelValue",!n.modelValue))},null,2))}});const yt=K(In,[["__scopeId","data-v-e7c0fbef"]]);var Mn=(()=>typeof GM_openInTab<"u"?GM_openInTab:void 0)(),Te=(()=>typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0)();const I={createList(e,t){return e.replyList=t,e.topReplyList=window.clone(t).filter(n=>n.thankCount>=window.config.topReplyLoveMinCount).sort((n,o)=>o.thankCount-n.thankCount).slice(0,window.config.topReplyCount),e.replyCount=t.length,e.allReplyUsers=Array.from(new Set(t.map(n=>n.username))),e.nestedReplies=I.createNestedList(window.clone(t),e.topReplyList),e.nestedRedundReplies=I.createNestedRedundantList(window.clone(t),e.topReplyList),e},getAllReply(e=[]){return e.sort((t,n)=>t.i-n.i).reduce((t,n)=>(t=t.concat(n.replyList),t),[])},findChildren(e,t,n,o){var d;const i=(r,u,g)=>{r.level=g.level+1;let y=n.findIndex(_=>_.floor===r.floor);y>-1&&(n[y].isUse=!0),g.children.push(this.findChildren(r,u,n,o));};e.children=[];let s=[];for(let r=0;r<t.length;r++){let u=t[r];u.isUse||u.replyFloor===e.floor&&(u.replyUsers.length===1&&u.replyUsers[0]===e.username?(u.isUse=!0,s.push({endList:t.slice(r+1),currentItem:u})):u.isWrong=!0);}s.reverse().map(({currentItem:r,endList:u})=>{i(r,u,e);});let a=t.findIndex(r=>{var u;return r.username===e.username&&((u=r.replyUsers)==null?void 0:u[0])!==e.username}),c=a>-1?t.slice(0,a):t;for(let r=0;r<c.length;r++){let u=c[r];if(!u.isUse){if(u.replyUsers.length===1){if(u.replyFloor!==-1&&((d=n[u.replyFloor-1])==null?void 0:d.username)===u.replyUsers[0])continue;let g=t.slice(r+1);if(u.username===e.username){u.replyUsers[0]===e.username&&i(u,g,e);break}else u.replyUsers[0]===e.username&&i(u,g,e);}else if(u.username===e.username)break}}e.children=e.children.sort((r,u)=>r.floor-u.floor),e.replyCount=e.children.reduce((r,u)=>r+(u.children.length?u.replyCount+1:1),0);let p=o.findIndex(r=>r.floor===e.floor);return p>-1&&(o[p].children=e.children,o[p].replyCount=e.replyCount),e},createNestedList(e=[],t){if(!e.length)return [];let n=e,o=[];return n.map((i,s)=>{let a=n.slice(0,s),c=Array.from(new Set(a.map(d=>d.username))),p=n.slice(s+1);if(s===0)o.push(this.findChildren(i,p,n,t));else if(!i.isUse){let d=!1;i.replyUsers.length?i.replyUsers.length>1?d=!0:d=!c.find(r=>r===i.replyUsers[0]):d=!0,d&&(i.level=0,o.push(this.findChildren(i,p,n,t)));}}),o},createNestedRedundantList(e=[],t){if(!e.length)return [];let n=e,o=[];return n.map((i,s)=>{let a=n.slice(0,s),c=Array.from(new Set(a.map(d=>d.username))),p=n.slice(s+1);if(s===0)o.push(this.findChildren(i,p,n,t));else if(i.isUse){let d=window.clone(i);d.children=[],d.level=0,d.isDup=!0,o.push(d);}else {let d=!1;i.replyUsers.length?i.replyUsers.length>1?d=!0:d=!c.find(r=>r===i.replyUsers[0]):d=!0,d&&(i.level=0,o.push(this.findChildren(i,p,n,t)));}}),o},parseA(e){let t=e.href,n;return t.includes("/t/")&&(n=e.pathname.substring(3)),{href:t,id:n,title:e.innerText}},checkPhotoLink2Img(e){if(e){try{[/<a((?!<a).)*href="https?:\/\/((?!<a).)*imgur.com((?!<a).)*>(((?!<a).)*)<\/a>/g,/<a((?!<a).)*href="https?:\/\/((?!<a).)*\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG) ((?!<a).)*>(((?!<a).)*)<\/a>/g].map((n,o)=>{[...e.matchAll(n)].map(a=>{let c=o===0?a[4]:a[5];if(c){let p=c.toLowerCase(),d=c;p.includes(".png")||p.includes(".jpg")||p.includes(".jpeg")||p.includes(".gif")||(d=c+".png"),e=e.replace(a[0],`<img src="${d}" data-originUrl="${c}" data-notice="此img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`);}});});}catch{}return e}},async checkPostReplies(e,t=!0){return new Promise(async n=>{let o=await I.getPostDetailByApi(e);if((o==null?void 0:o.replies)>Jt)return t&&I.openNewTab(`https://${location.origin}/t/${e}?p=1&script=1`),n(!0);n(!1);})},async sleep(e){return new Promise(t=>{setTimeout(t,e);})},openNewTab(e,t=!1){if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)){let o="a_blank_"+Date.now(),i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("target","_blank"),i.setAttribute("id",o),i.setAttribute("script","1"),document.getElementById(o)||document.body.appendChild(i),i.click();}else Mn(e,{active:t});},async cbChecker(e,t=0){if(window.cb)window.cb(e);else {for(;!window.cb&&t<30;)await I.sleep(500),t++;window.cb&&window.cb(e);}},initMonkeyMenu(){try{Te("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Te("仓库地址",()=>{I.openNewTab(window.const.git);}),Te("反馈 & 建议",I.feedback);}catch{}},clone(e){return JSON.parse(JSON.stringify(e))},feedback(){I.openNewTab(ge.issue);},checkPageType(e){let t=e||window.location,n={pageType:null,pageData:{id:"",pageNo:null},username:""};if(t.pathname==="/")n.pageType=W.Home;else if(t.pathname==="/changes")n.pageType=W.Changes;else if(t.pathname==="/recent")n.pageType=W.Changes;else if(t.href.match(/.com\/?tab=/))n.pageType=W.Home;else if(t.href.match(/.com\/go\//))t.href.includes("/links")||(n.pageType=W.Node);else if(t.href.match(/.com\/member/))n.pageType=W.Member,n.username=t.pathname.replace("/member/","").replace("/replies","").replace("/topics","");else {let o=t.href.match(/.com\/t\/([\d]+)/);if(o&&!t.pathname.includes("review")&&!t.pathname.includes("info")&&(n.pageType=W.Post,n.pageData.id=o[1],t.search)){let i=t.href.match(/\?p=([\d]+)/);i&&(n.pageData.pageNo=Number(i[1]));}}return n},getPostDetailByApi(e){return new Promise(t=>{fetch(`${location.origin}/api/topics/show.json?id=${e}`).then(async n=>{if(n.status===200){let o=await n.json();if(o){let i=o[0];t(i);}}});})},appendPostContent(e,t){let n=document.createElement("a");n.href=e.href,n.classList.add("post-content");let o=document.createElement("div");o.innerHTML=e.content_rendered,n.append(o),t.append(n),(()=>{var s;if(o.clientHeight<300)n.classList.add("show-all");else {let a=document.createElement("div");a.classList.add("show-more"),a.innerHTML="显示更多/收起",a.onclick=function(c){c.stopPropagation(),n.classList.toggle("show-all");},(s=n.parentNode)==null||s.append(a);}})();},initConfig(){return new Promise(e=>{let t=localStorage.getItem("v2ex-config");if(t){let n=JSON.parse(t);n=n[window.user.username??"default"],n&&(window.config=Object.assign(window.config,n));}e(window.config);})}},Kt={allReplyUsers:[],content_rendered:"",createDate:"",createDateAgo:"",lastReplyDate:"",fr:"",replyList:[],topReplyList:[],nestedReplies:[],nestedRedundReplies:[],username:"",url:"",href:"",member:{},node:{title:"",url:""},headerTemplate:"",title:"",id:"",type:"post",once:"",replyCount:0,clickCount:0,thankCount:0,collectCount:0,lastReadFloor:0,isFavorite:!1,isIgnore:!1,isThanked:!1,isReport:!1,inList:!1},Re=(e={})=>Object.assign(I.clone(Kt),e),Ln={tagPrefix:"--用户标签--",tags:{},tagsId:"",username:"",avatar:"",readPrefix:"--已读楼层--",readNoteItemId:"",readList:{},imgurPrefix:"--imgur图片删除hash--",imgurList:{},imgurNoteId:"",configPrefix:"--config--",configNoteId:""},ge={pageType:void 0,pageData:{pageNo:1},targetUserName:"",currentVersion:2,isNight:!1,cb:null,stopMe:null,postList:[],git:"https://github.com/zyronon/web-scripts",shortGit:"zyronon/web-scripts",issue:"https://github.com/zyronon/web-scripts/issues",pcLog:"https://greasyfork.org/zh-CN/scripts/458024/versions",pcScript:"https://greasyfork.org/zh-CN/scripts/458024",mobileScript:"https://greasyfork.org/zh-CN/scripts/485356",homeUrl:"https://v2next.netlify.app/"},Rn={showToolbar:!0,autoOpenDetail:!0,openTag:!1,clickPostItemOpenDetail:!0,closePostDetailBySpace:!0,contentAutoCollapse:!0,viewType:"table",commentDisplayType:P.FloorInFloorNoCallUser,newTabOpen:!1,newTabOpenActive:!1,base64:!0,sov2ex:!1,postWidth:"",showTopReply:!0,topReplyLoveMinCount:3,topReplyCount:5,autoJumpLastReadFloor:!1,rememberLastReadFloor:!1,autoSignin:!0,customBgColor:"",version:ge.currentVersion,collectBrowserNotice:!1,fontSizeType:"normal"},Oe=/^[a-z0-9]+(-[a-z0-9]+)*$/,Xe=(e,t,n,o="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;o=i.shift().slice(1);}if(i.length>3||!i.length)return null;if(i.length>1){const c=i.pop(),p=i.pop(),d={provider:i.length>0?i[0]:o,prefix:p,name:c};return t&&!We(d)?null:d}const s=i[0],a=s.split("-");if(a.length>1){const c={provider:o,prefix:a.shift(),name:a.join("-")};return t&&!We(c)?null:c}if(n&&o===""){const c={provider:o,prefix:"",name:s};return t&&!We(c,n)?null:c}return null},We=(e,t)=>e?!!((e.provider===""||e.provider.match(Oe))&&(t&&e.prefix===""||e.prefix.match(Oe))&&e.name.match(Oe)):!1,Xt=Object.freeze({left:0,top:0,width:16,height:16}),Je=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Ye=Object.freeze({...Xt,...Je}),at=Object.freeze({...Ye,body:"",hidden:!1});function On(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const o=((e.rotate||0)+(t.rotate||0))%4;return o&&(n.rotate=o),n}function Nt(e,t){const n=On(e,t);for(const o in at)o in Je?o in e&&!(o in n)&&(n[o]=Je[o]):o in t?n[o]=t[o]:o in e&&(n[o]=e[o]);return n}function Nn(e,t){const n=e.icons,o=e.aliases||Object.create(null),i=Object.create(null);function s(a){if(n[a])return i[a]=[];if(!(a in i)){i[a]=null;const c=o[a]&&o[a].parent,p=c&&s(c);p&&(i[a]=[c].concat(p));}return i[a]}return (t||Object.keys(n).concat(Object.keys(o))).forEach(s),i}function Pn(e,t,n){const o=e.icons,i=e.aliases||Object.create(null);let s={};function a(c){s=Nt(o[c]||i[c],s);}return a(t),n.forEach(a),Nt(e,s)}function Yt(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(i=>{t(i,null),n.push(i);});const o=Nn(e);for(const i in o){const s=o[i];s&&(t(i,Pn(e,i,s)),n.push(i));}return n}const En={provider:"",aliases:{},not_found:{},...Xt};function st(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return !1;return !0}function Qt(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!st(e,En))return null;const n=t.icons;for(const i in n){const s=n[i];if(!i.match(Oe)||typeof s.body!="string"||!st(s,at))return null}const o=t.aliases||Object.create(null);for(const i in o){const s=o[i],a=s.parent;if(!i.match(Oe)||typeof a!="string"||!n[a]&&!o[a]||!st(s,at))return null}return t}const Pt=Object.create(null);function Vn(e,t){return {provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function ke(e,t){const n=Pt[e]||(Pt[e]=Object.create(null));return n[t]||(n[t]=Vn(e,t))}function wt(e,t){return Qt(t)?Yt(t,(n,o)=>{o?e.icons[n]=o:e.missing.add(n);}):[]}function An(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return !1}let Ee=!1;function Zt(e){return typeof e=="boolean"&&(Ee=e),Ee}function Dn(e){const t=typeof e=="string"?Xe(e,!0,Ee):e;if(t){const n=ke(t.provider,t.prefix),o=t.name;return n.icons[o]||(n.missing.has(o)?null:void 0)}}function Un(e,t){const n=Xe(e,!0,Ee);if(!n)return !1;const o=ke(n.provider,n.prefix);return An(o,n.name,t)}function $n(e,t){if(typeof e!="object")return !1;if(typeof t!="string"&&(t=e.provider||""),Ee&&!t&&!e.prefix){let i=!1;return Qt(e)&&(e.prefix="",Yt(e,(s,a)=>{a&&Un(s,a)&&(i=!0);})),i}const n=e.prefix;if(!We({provider:t,prefix:n,name:"a"}))return !1;const o=ke(t,n);return !!wt(o,e)}const en=Object.freeze({width:null,height:null}),tn=Object.freeze({...en,...Je}),Fn=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Hn=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Et(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const o=e.split(Fn);if(o===null||!o.length)return e;const i=[];let s=o.shift(),a=Hn.test(s);for(;;){if(a){const c=parseFloat(s);isNaN(c)?i.push(s):i.push(Math.ceil(c*t*n)/n);}else i.push(s);if(s=o.shift(),s===void 0)return i.join("");a=!a;}}const Bn=e=>e==="unset"||e==="undefined"||e==="none";function jn(e,t){const n={...Ye,...e},o={...tn,...t},i={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,o].forEach(_=>{const m=[],f=_.hFlip,C=_.vFlip;let k=_.rotate;f?C?k+=2:(m.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),m.push("scale(-1 1)"),i.top=i.left=0):C&&(m.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),m.push("scale(1 -1)"),i.top=i.left=0);let S;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:S=i.height/2+i.top,m.unshift("rotate(90 "+S.toString()+" "+S.toString()+")");break;case 2:m.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:S=i.width/2+i.left,m.unshift("rotate(-90 "+S.toString()+" "+S.toString()+")");break}k%2===1&&(i.left!==i.top&&(S=i.left,i.left=i.top,i.top=S),i.width!==i.height&&(S=i.width,i.width=i.height,i.height=S)),m.length&&(s='<g transform="'+m.join(" ")+'">'+s+"</g>");});const a=o.width,c=o.height,p=i.width,d=i.height;let r,u;a===null?(u=c===null?"1em":c==="auto"?d:c,r=Et(u,p/d)):(r=a==="auto"?p:a,u=c===null?Et(r,d/p):c==="auto"?d:c);const g={},y=(_,m)=>{Bn(m)||(g[_]=m.toString());};return y("width",r),y("height",u),g.viewBox=i.left.toString()+" "+i.top.toString()+" "+p.toString()+" "+d.toString(),{attributes:g,body:s}}const Gn=/\sid="(\S+)"/g,Wn="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qn=0;function zn(e,t=Wn){const n=[];let o;for(;o=Gn.exec(e);)n.push(o[1]);if(!n.length)return e;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const a=typeof t=="function"?t(s):t+(qn++).toString(),c=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+c+')([")]|\\.[a-z])',"g"),"$1"+a+i+"$3");}),e=e.replace(new RegExp(i,"g"),""),e}const ct=Object.create(null);function Jn(e,t){ct[e]=t;}function dt(e){return ct[e]||ct[""]}function _t(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return {resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const vt=Object.create(null),Le=["https://api.simplesvg.com","https://api.unisvg.com"],qe=[];for(;Le.length>0;)Le.length===1||Math.random()>.5?qe.push(Le.shift()):qe.push(Le.pop());vt[""]=_t({resources:["https://api.iconify.design"].concat(qe)});function Kn(e,t){const n=_t(t);return n===null?!1:(vt[e]=n,!0)}function bt(e){return vt[e]}const Xn=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let Vt=Xn();function Yn(e,t){const n=bt(e);if(!n)return 0;let o;if(!n.maxURL)o=0;else {let i=0;n.resources.forEach(a=>{i=Math.max(i,a.length);});const s=t+".json?icons=";o=n.maxURL-i-n.path.length-s.length;}return o}function Qn(e){return e===404}const Zn=(e,t,n)=>{const o=[],i=Yn(e,t),s="icons";let a={type:s,provider:e,prefix:t,icons:[]},c=0;return n.forEach((p,d)=>{c+=p.length+1,c>=i&&d>0&&(o.push(a),a={type:s,provider:e,prefix:t,icons:[]},c=p.length),a.icons.push(p);}),o.push(a),o};function ei(e){if(typeof e=="string"){const t=bt(e);if(t)return t.path}return "/"}const ti=(e,t,n)=>{if(!Vt){n("abort",424);return}let o=ei(t.provider);switch(t.type){case"icons":{const s=t.prefix,c=t.icons.join(","),p=new URLSearchParams({icons:c});o+=s+".json?"+p.toString();break}case"custom":{const s=t.uri;o+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let i=503;Vt(e+o).then(s=>{const a=s.status;if(a!==200){setTimeout(()=>{n(Qn(a)?"abort":"next",a);});return}return i=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",i);});return}setTimeout(()=>{n("success",s);});}).catch(()=>{n("next",i);});},ni={prepare:Zn,send:ti};function ii(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((i,s)=>i.provider!==s.provider?i.provider.localeCompare(s.provider):i.prefix!==s.prefix?i.prefix.localeCompare(s.prefix):i.name.localeCompare(s.name));let o={provider:"",prefix:"",name:""};return e.forEach(i=>{if(o.name===i.name&&o.prefix===i.prefix&&o.provider===i.provider)return;o=i;const s=i.provider,a=i.prefix,c=i.name,p=n[s]||(n[s]=Object.create(null)),d=p[a]||(p[a]=ke(s,a));let r;c in d.icons?r=t.loaded:a===""||d.missing.has(c)?r=t.missing:r=t.pending;const u={provider:s,prefix:a,name:c};r.push(u);}),t}function nn(e,t){e.forEach(n=>{const o=n.loaderCallbacks;o&&(n.loaderCallbacks=o.filter(i=>i.id!==t));});}function si(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const o=e.provider,i=e.prefix;t.forEach(s=>{const a=s.icons,c=a.pending.length;a.pending=a.pending.filter(p=>{if(p.prefix!==i)return !0;const d=p.name;if(e.icons[d])a.loaded.push({provider:o,prefix:i,name:d});else if(e.missing.has(d))a.missing.push({provider:o,prefix:i,name:d});else return n=!0,!0;return !1}),a.pending.length!==c&&(n||nn([e],s.id),s.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),s.abort));});}));}let oi=0;function li(e,t,n){const o=oi++,i=nn.bind(null,n,o);if(!t.pending.length)return i;const s={id:o,icons:t,callback:e,abort:i};return n.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(s);}),i}function ri(e,t=!0,n=!1){const o=[];return e.forEach(i=>{const s=typeof i=="string"?Xe(i,t,n):i;s&&o.push(s);}),o}var ai={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function ci(e,t,n,o){const i=e.resources.length,s=e.random?Math.floor(Math.random()*i):e.index;let a;if(e.random){let V=e.resources.slice(0);for(a=[];V.length>1;){const j=Math.floor(Math.random()*V.length);a.push(V[j]),V=V.slice(0,j).concat(V.slice(j+1));}a=a.concat(V);}else a=e.resources.slice(s).concat(e.resources.slice(0,s));const c=Date.now();let p="pending",d=0,r,u=null,g=[],y=[];typeof o=="function"&&y.push(o);function _(){u&&(clearTimeout(u),u=null);}function m(){p==="pending"&&(p="aborted"),_(),g.forEach(V=>{V.status==="pending"&&(V.status="aborted");}),g=[];}function f(V,j){j&&(y=[]),typeof V=="function"&&y.push(V);}function C(){return {startTime:c,payload:t,status:p,queriesSent:d,queriesPending:g.length,subscribe:f,abort:m}}function k(){p="failed",y.forEach(V=>{V(void 0,r);});}function S(){g.forEach(V=>{V.status==="pending"&&(V.status="aborted");}),g=[];}function z(V,j,Y){const X=j!=="success";switch(g=g.filter(ne=>ne!==V),p){case"pending":break;case"failed":if(X||!e.dataAfterTimeout)return;break;default:return}if(j==="abort"){r=Y,k();return}if(X){r=Y,g.length||(a.length?Q():k());return}if(_(),S(),!e.random){const ne=e.resources.indexOf(V.resource);ne!==-1&&ne!==e.index&&(e.index=ne);}p="completed",y.forEach(ne=>{ne(Y);});}function Q(){if(p!=="pending")return;_();const V=a.shift();if(V===void 0){if(g.length){u=setTimeout(()=>{_(),p==="pending"&&(S(),k());},e.timeout);return}k();return}const j={status:"pending",resource:V,callback:(Y,X)=>{z(j,Y,X);}};g.push(j),d++,u=setTimeout(Q,e.rotate),n(V,t,j.callback);}return setTimeout(Q),C}function sn(e){const t={...ai,...e};let n=[];function o(){n=n.filter(c=>c().status==="pending");}function i(c,p,d){const r=ci(t,c,p,(u,g)=>{o(),d&&d(u,g);});return n.push(r),r}function s(c){return n.find(p=>c(p))||null}return {query:i,find:s,setIndex:c=>{t.index=c;},getIndex:()=>t.index,cleanup:o}}function At(){}const ot=Object.create(null);function di(e){if(!ot[e]){const t=bt(e);if(!t)return;const n=sn(t),o={config:t,redundancy:n};ot[e]=o;}return ot[e]}function ui(e,t,n){let o,i;if(typeof e=="string"){const s=dt(e);if(!s)return n(void 0,424),At;i=s.send;const a=di(e);a&&(o=a.redundancy);}else {const s=_t(e);if(s){o=sn(s);const a=e.resources?e.resources[0]:"",c=dt(a);c&&(i=c.send);}}return !o||!i?(n(void 0,424),At):o.query(t,i,n)().abort}const Dt="iconify2",Ve="iconify",on=Ve+"-count",Ut=Ve+"-version",ln=36e5,pi=168;function ut(e,t){try{return e.getItem(t)}catch{}}function kt(e,t,n){try{return e.setItem(t,n),!0}catch{}}function $t(e,t){try{e.removeItem(t);}catch{}}function pt(e,t){return kt(e,on,t.toString())}function ht(e){return parseInt(ut(e,on))||0}const Qe={local:!0,session:!0},rn={local:new Set,session:new Set};let Ct=!1;function hi(e){Ct=e;}let Ge=typeof window>"u"?{}:window;function an(e){const t=e+"Storage";try{if(Ge&&Ge[t]&&typeof Ge[t].length=="number")return Ge[t]}catch{}Qe[e]=!1;}function cn(e,t){const n=an(e);if(!n)return;const o=ut(n,Ut);if(o!==Dt){if(o){const c=ht(n);for(let p=0;p<c;p++)$t(n,Ve+p.toString());}kt(n,Ut,Dt),pt(n,0);return}const i=Math.floor(Date.now()/ln)-pi,s=c=>{const p=Ve+c.toString(),d=ut(n,p);if(typeof d=="string"){try{const r=JSON.parse(d);if(typeof r=="object"&&typeof r.cached=="number"&&r.cached>i&&typeof r.provider=="string"&&typeof r.data=="object"&&typeof r.data.prefix=="string"&&t(r,c))return !0}catch{}$t(n,p);}};let a=ht(n);for(let c=a-1;c>=0;c--)s(c)||(c===a-1?(a--,pt(n,a)):rn[e].add(c));}function dn(){if(!Ct){hi(!0);for(const e in Qe)cn(e,t=>{const n=t.data,o=t.provider,i=n.prefix,s=ke(o,i);if(!wt(s,n).length)return !1;const a=n.lastModified||-1;return s.lastModifiedCached=s.lastModifiedCached?Math.min(s.lastModifiedCached,a):a,!0});}}function fi(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const o in Qe)cn(o,i=>{const s=i.data;return i.provider!==e.provider||s.prefix!==e.prefix||s.lastModified===t});return !0}function mi(e,t){Ct||dn();function n(o){let i;if(!Qe[o]||!(i=an(o)))return;const s=rn[o];let a;if(s.size)s.delete(a=Array.from(s).shift());else if(a=ht(i),!pt(i,a+1))return;const c={cached:Math.floor(Date.now()/ln),provider:e.provider,data:t};return kt(i,Ve+a.toString(),JSON.stringify(c))}t.lastModified&&!fi(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"));}function Ft(){}function gi(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,si(e);}));}function yi(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:o}=e,i=e.iconsToLoad;delete e.iconsToLoad;let s;if(!i||!(s=dt(n)))return;s.prepare(n,o,i).forEach(c=>{ui(n,c,p=>{if(typeof p!="object")c.icons.forEach(d=>{e.missing.add(d);});else try{const d=wt(e,p);if(!d.length)return;const r=e.pendingIcons;r&&d.forEach(u=>{r.delete(u);}),mi(e,p);}catch{}gi(e);});});}));}const wi=(e,t)=>{const n=ri(e,!0,Zt()),o=ii(n);if(!o.pending.length){let p=!0;return t&&setTimeout(()=>{p&&t(o.loaded,o.missing,o.pending,Ft);}),()=>{p=!1;}}const i=Object.create(null),s=[];let a,c;return o.pending.forEach(p=>{const{provider:d,prefix:r}=p;if(r===c&&d===a)return;a=d,c=r,s.push(ke(d,r));const u=i[d]||(i[d]=Object.create(null));u[r]||(u[r]=[]);}),o.pending.forEach(p=>{const{provider:d,prefix:r,name:u}=p,g=ke(d,r),y=g.pendingIcons||(g.pendingIcons=new Set);y.has(u)||(y.add(u),i[d][r].push(u));}),s.forEach(p=>{const{provider:d,prefix:r}=p;i[d][r].length&&yi(p,i[d][r]);}),t?li(t,o,s):Ft};function _i(e,t){const n={...e};for(const o in t){const i=t[o],s=typeof i;o in en?(i===null||i&&(s==="string"||s==="number"))&&(n[o]=i):s===typeof n[o]&&(n[o]=o==="rotate"?i%4:i);}return n}const vi=/[\s,]+/;function bi(e,t){t.split(vi).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}});}function ki(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function o(i){for(;i<0;)i+=4;return i%4}if(n===""){const i=parseInt(e);return isNaN(i)?0:o(i)}else if(n!==e){let i=0;switch(n){case"%":i=25;break;case"deg":i=90;}if(i){let s=parseFloat(e.slice(0,e.length-n.length));return isNaN(s)?0:(s=s/i,s%1===0?o(s):0)}}return t}function Ci(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in t)n+=" "+o+'="'+t[o]+'"';return '<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function xi(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Ti(e){return "data:image/svg+xml,"+xi(e)}function Si(e){return 'url("'+Ti(e)+'")'}const Ht={...tn,inline:!1},Ii={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Mi={display:"inline-block"},ft={backgroundColor:"currentColor"},un={backgroundColor:"transparent"},Bt={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},jt={webkitMask:ft,mask:ft,background:un};for(const e in jt){const t=jt[e];for(const n in Bt)t[e+n]=Bt[n];}const ze={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";ze[e+"-flip"]=t,ze[e.slice(0,1)+"-flip"]=t,ze[e+"Flip"]=t;});function Gt(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Wt=(e,t)=>{const n=_i(Ht,t),o={...Ii},i=t.mode||"svg",s={},a=t.style,c=typeof a=="object"&&!(a instanceof Array)?a:{};for(let m in t){const f=t[m];if(f!==void 0)switch(m){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[m]=f===!0||f==="true"||f===1;break;case"flip":typeof f=="string"&&bi(n,f);break;case"color":s.color=f;break;case"rotate":typeof f=="string"?n[m]=ki(f):typeof f=="number"&&(n[m]=f);break;case"ariaHidden":case"aria-hidden":f!==!0&&f!=="true"&&delete o["aria-hidden"];break;default:{const C=ze[m];C?(f===!0||f==="true"||f===1)&&(n[C]=!0):Ht[m]===void 0&&(o[m]=f);}}}const p=jn(e,n),d=p.attributes;if(n.inline&&(s.verticalAlign="-0.125em"),i==="svg"){o.style={...s,...c},Object.assign(o,d);let m=0,f=t.id;return typeof f=="string"&&(f=f.replace(/-/g,"_")),o.innerHTML=zn(p.body,f?()=>f+"ID"+m++:"iconifyVue"),vue.h("svg",o)}const{body:r,width:u,height:g}=e,y=i==="mask"||(i==="bg"?!1:r.indexOf("currentColor")!==-1),_=Ci(r,{...d,width:u+"",height:g+""});return o.style={...s,"--svg":Si(_),width:Gt(d.width),height:Gt(d.height),...Mi,...y?ft:un,...c},vue.h("span",o)};Zt(!0);Jn("",ni);if(typeof document<"u"&&typeof window<"u"){dn();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload;typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(o=>{try{typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||$n(o);}catch{}});}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){try{const i=t[n];if(typeof i!="object"||!i||i.resources===void 0)continue;Kn(n,i);}catch{}}}}const Li={...Ye,body:""},te=vue.defineComponent({inheritAttrs:!1,data(){return {iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0;},unmounted(){this.abortLoading();},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null);},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let n;if(typeof e!="string"||(n=Xe(e,!1,!0))===null)return this.abortLoading(),null;const o=Dn(n);if(!o)return (!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",o!==null&&(this._loadingIcon={name:e,abort:wi([n],()=>{this.counter++;})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const i=["iconify"];return n.prefix!==""&&i.push("iconify--"+n.prefix),n.provider!==""&&i.push("iconify--"+n.provider),{data:o,classes:i}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return Wt(Li,e);let n=e;return t.classes&&(n={...e,class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")}),Wt({...Ye,...t.data},n)}}),Ri={class:"display-type"},Oi={style:{position:"relative"}},Ni={key:0,class:"type-list"},Pi=vue.defineComponent({__name:"BaseSelect",props:{displayType:{}},emits:["update:displayType"],setup(e,{emit:t}){const n=e,o=t;let i=vue.reactive({showChangeDisplayType:!1,lastDisplayType:null});function s(p){[P.New,P.Like].includes(n.displayType)||(i.lastDisplayType=n.displayType),o("update:displayType",p),i.showChangeDisplayType=!1;}function a(){if([P.New,P.Like].includes(n.displayType))return s(i.lastDisplayType??P.FloorInFloorNoCallUser);i.showChangeDisplayType=!i.showChangeDisplayType;}const c=vue.computed(()=>{let p=n.displayType;switch([P.New,P.Like].includes(n.displayType)&&(p=i.lastDisplayType),p){case P.FloorInFloorNoCallUser:return "楼中楼";case P.FloorInFloor:return "楼中楼(@)";case P.FloorInFloorNested:return "冗余楼中楼";case P.V2exOrigin:return "V2原版";case P.OnlyOp:return "只看楼主";default:return "楼中楼"}});return (p,d)=>(vue.openBlock(),vue.createElementBlock("div",Ri,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",p.displayType===vue.unref(P).New&&"active"]),onClick:d[0]||(d[0]=r=>s(vue.unref(P).New))},"最新 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["type",p.displayType===vue.unref(P).Like&&"active"]),onClick:d[1]||(d[1]=r=>s(vue.unref(P).Like))},"最热 ",2),vue.createElementVNode("div",Oi,[vue.createElementVNode("div",{class:vue.normalizeClass(["type",![vue.unref(P).New,vue.unref(P).Like].includes(p.displayType)&&"active"]),onClick:a},[vue.createElementVNode("span",null,vue.toDisplayString(c.value),1),vue.createVNode(vue.unref(te),{icon:"mingcute:down-line"})],2),vue.unref(i).showChangeDisplayType?(vue.openBlock(),vue.createElementBlock("div",Ni,[vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(P).FloorInFloorNoCallUser&&"active"]),onClick:d[2]||(d[2]=vue.withModifiers(r=>s(vue.unref(P).FloorInFloorNoCallUser),["stop"]))},"楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(P).FloorInFloor&&"active"]),onClick:d[3]||(d[3]=vue.withModifiers(r=>s(vue.unref(P).FloorInFloor),["stop"]))},"楼中楼(@) ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(P).FloorInFloorNested&&"active"]),onClick:d[4]||(d[4]=vue.withModifiers(r=>s(vue.unref(P).FloorInFloorNested),["stop"]))},"冗余楼中楼 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(P).OnlyOp&&"active"]),onClick:d[5]||(d[5]=vue.withModifiers(r=>s(vue.unref(P).OnlyOp),["stop"]))},"只看楼主 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["item",p.displayType===vue.unref(P).V2exOrigin&&"active"]),onClick:d[6]||(d[6]=vue.withModifiers(r=>s(vue.unref(P).V2exOrigin),["stop"]))},"V2原版 ",2)])):vue.createCommentVNode("",!0)])]))}});const xt=K(Pi,[["__scopeId","data-v-e4f684be"]]),v={eventMap:new Map,on(e,t){let n=this.eventMap.get(e);n?n.push(t):n=[t],this.eventMap.set(e,n);},offOne(e,t){let n=this.eventMap.get(e);if(n){let o=n.findIndex(i=>i===t);o>-1&&n.splice(o,1);}this.eventMap.set(e,n);},emit(e,t){let n=this.eventMap.get(e);n&&n.map(o=>o(t));},off(e){this.eventMap.has(e)&&this.eventMap.delete(e);},clear(){this.eventMap=new Map;}},b={SHOW_TOOLTIP:"SHOW_TOOLTIP",SHOW_MSG:"SHOW_MSG",SET_CALL:"SET_CALL",SHOW_CALL:"SHOW_CALL",REFRESH_ONCE:"REFRESH_ONCE",ADD_REPLY:"ADD_REPLY",IGNORE:"IGNORE",MERGE:"MERGE",REMOVE:"REMOVE",CHANGE_COMMENT_THANK:"CHANGE_COMMENT_THANK",CHANGE_POST_THANK:"CHANGE_POST_THANK",ADD_TAG:"ADD_TAG",REMOVE_TAG:"REMOVE_TAG",RELATION_REPLY:"RELATION_REPLY",JUMP:"JUMP",REFRESH_POST:"REFRESH_POST",SHOW_CONFIRM_MODAL:"SHOW_CONFIRM_MODAL",SHOW_CONFIRM_MODAL_CONFIRM:"SHOW_CONFIRM_MODAL_CONFIRM"},Ei={name:"PopConfirm",props:{title:{type:String,default(){return ""}},disabled:{type:Boolean,default(){return !1}}},data(){return {id:""}},created(){},methods:{cb(e){e===this.id&&(this.$emit("confirm"),this.id="");},showPop(e){if(this.disabled)return;let t=e.target.getBoundingClientRect();this.id=Date.now(),v.emit(b.SHOW_CONFIRM_MODAL,{title:this.title,rect:t,id:this.id}),v.offOne(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb),v.on(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}},unmounted(){v.offOne(b.SHOW_CONFIRM_MODAL_CONFIRM,this.cb);}};function Vi(e,t,n,o,i,s){return vue.openBlock(),vue.createElementBlock("span",{onClick:t[0]||(t[0]=vue.withModifiers((...a)=>s.showPop&&s.showPop(...a),["stop"]))},[vue.renderSlot(e.$slots,"default")])}const $e=K(Ei,[["render",Vi]]),Ai=vue.defineComponent({__name:"BaseLoading",props:{size:{default:"normal"}},setup(e){return (t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["loading",[t.size]])},null,2))}});const Ze=K(Ai,[["__scopeId","data-v-2697baa2"]]),Di={key:1,class:"key-notice"},Ui={class:"key"},$i=vue.defineComponent({__name:"BaseButton",props:{keyboard:{},active:{type:Boolean},disabled:{type:Boolean},loading:{type:Boolean},size:{default:"normal"},type:{default:"primary"}},emits:["click"],setup(e){return (t,n)=>(vue.openBlock(),vue.createBlock(Ue,{disabled:!t.keyboard,title:`快捷键: ${t.keyboard}`},{default:vue.withCtx(()=>[vue.createElementVNode("div",vue.mergeProps({class:"base-button"},t.$attrs,{onClick:n[0]||(n[0]=o=>!t.disabled&&!t.loading&&t.$emit("click",o)),class:[t.active&&"active",t.size,t.type,(t.disabled||t.loading)&&"disabled",!t.disabled&&"hvr-grow"]}),[vue.createElementVNode("span",{style:vue.normalizeStyle({opacity:t.loading?0:1})},[vue.renderSlot(t.$slots,"default",{},void 0,!0)],4),t.loading?(vue.openBlock(),vue.createBlock(Ze,{key:0,size:"small"})):vue.createCommentVNode("",!0),t.keyboard?(vue.openBlock(),vue.createElementBlock("div",Di,[vue.createElementVNode("span",Ui,vue.toDisplayString(t.keyboard),1)])):vue.createCommentVNode("",!0)],16)]),_:3},8,["disabled","title"]))}});const ye=K($i,[["__scopeId","data-v-5a7d79ba"]]);const Fi={name:"Setting",components:{BaseButton:ye,PopConfirm:$e,Icon:te,BaseSelect:xt,BaseSwitch:yt,Tooltip:Ue},inject:["isNight"],props:{show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0}},methods:{confirm(){this.close(),this.$emit("confirm");},close(){this.$emit("update:show",!1);}}},pn=e=>(vue.pushScopeId("data-v-cb13d533"),e=e(),vue.popScopeId(),e),Hi={key:0,class:"setting-modal modal"},Bi={class:"modal-root"},ji={class:"modal-header"},Gi=pn(()=>vue.createElementVNode("div",{class:"title"}," 使用需知 ",-1)),Wi={class:"body"},qi=pn(()=>vue.createElementVNode("div",{class:"modal-content"},[vue.createElementVNode("div",null,"开启此功能会带来以下影响"),vue.createElementVNode("div",null,"缺点"),vue.createElementVNode("div",{style:{color:"red"}},[vue.createElementVNode("div",null,"1、你的IP可能会被封禁"),vue.createElementVNode("div",null,"2、消耗更多流量，给服务器带来更大的负担"),vue.createElementVNode("div",null,"3、你的V站浏览进度条会变快")]),vue.createElementVNode("div",null,"优点"),vue.createElementVNode("div",null,"1、卡片模式，无需打开主题即可查看内容"),vue.createElementVNode("div",null,"2、打开主题时提前预览正文内容，无需等待加载"),vue.createElementVNode("div",null,"原理"),vue.createElementVNode("div",null,"1、解析列表所有主题ID，批量调用show.json接口，获取对应主题的正文"),vue.createElementVNode("div",null,"2、请求的主题数据会缓存到本地，不会重复请求，超过3天的数据会删除"),vue.createElementVNode("div",null,"3、前面4条会并发请求，4条以后的一秒请求一条")],-1)),zi={class:"btns"};function Ji(e,t,n,o,i,s){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",Hi,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...p)=>s.close&&s.close(...p))}),vue.createElementVNode("div",Bi,[vue.createElementVNode("div",ji,[Gi,vue.createVNode(a,{icon:"ic:round-close",onClick:s.close},null,8,["onClick"])]),vue.createElementVNode("div",Wi,[qi,vue.createElementVNode("div",zi,[vue.createVNode(c,{type:"link",onClick:s.close},{default:vue.withCtx(()=>[vue.createTextVNode("不同意")]),_:1},8,["onClick"]),vue.createVNode(c,{onClick:s.confirm},{default:vue.withCtx(()=>[vue.createTextVNode("同意")]),_:1},8,["onClick"])])])])])):vue.createCommentVNode("",!0)]),_:1})}const Ki=K(Fi,[["render",Ji],["__scopeId","data-v-cb13d533"]]);const Xi={name:"Setting",components:{NoticeModal:Ki,PopConfirm:$e,Icon:te,BaseSelect:xt,BaseSwitch:yt,Tooltip:Ue},inject:["isNight"],props:{modelValue:{type:Object,default(){return {}}},show:{type:Boolean,default(){return !1}}},data(){return {tabIndex:0,config:window.clone(this.modelValue),showNotice:!1}},computed:{DefaultVal(){return ge},CommentDisplayType(){return P},isNew(){return this.config.version<ge.currentVersion}},watch:{config:{handler(e){e.topReplyLoveMinCount=Math.trunc(e.topReplyLoveMinCount),e.topReplyLoveMinCount<0&&(e.topReplyLoveMinCount=1),this.$emit("update:modelValue",e);},deep:!0}},methods:{close(){this.config.version<ge.currentVersion&&(this.config.version=ge.currentVersion),this.$emit("update:show",!1);}}},D=e=>(vue.pushScopeId("data-v-9f347886"),e=e(),vue.popScopeId(),e),Yi={key:0,class:"setting-modal modal"},Qi={class:"modal-root"},Zi={class:"modal-header"},es={class:"title"},ts={class:"small"},ns=["href"],is={class:"body"},ss={class:"left"},os={class:"tabs"},ls=D(()=>vue.createElementVNode("span",null,"列表设置",-1)),rs=[ls],as=D(()=>vue.createElementVNode("span",null,"主题设置",-1)),cs=[as],ds=D(()=>vue.createElementVNode("span",null,"其他设置",-1)),us=[ds],ps=D(()=>vue.createElementVNode("span",null,"关于脚本",-1)),hs=[ps],fs={class:"icons"},ms=["href"],gs=["href"],ys={class:"modal-content"},ws={class:"scroll"},_s={key:0},vs={class:"row"},bs=D(()=>vue.createElementVNode("label",{class:"item-title"},"列表展示方式",-1)),ks={class:"wrapper"},Cs={class:"radio-group2"},xs=D(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Ts={class:"row"},Ss=D(()=>vue.createElementVNode("label",{class:"item-title"},"主题弹框显示",-1)),Is={class:"wrapper"},Ms=D(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 开启此选项后，主题会"),vue.createElementVNode("span",{class:"danger"},"始终"),vue.createTextVNode("以弹框的方式显示。优先级大于“新标签页打开链接” ")],-1)),Ls={class:"row"},Rs=D(()=>vue.createElementVNode("label",{class:"item-title"},"新标签页打开链接",-1)),Os={class:"wrapper"},Ns=D(()=>vue.createElementVNode("div",{class:"desc"}," 网页上所有链接通过新标签页打开 ",-1)),Ps={class:"row"},Es=D(()=>vue.createElementVNode("label",{class:"item-title"},"打开新标签页时立即切换过去",-1)),Vs={class:"wrapper"},As={key:1},Ds={class:"row"},Us=D(()=>vue.createElementVNode("label",{class:"item-title"},"显示回复展示方式",-1)),$s={class:"wrapper"},Fs={class:"row"},Hs=D(()=>vue.createElementVNode("label",{class:"item-title"},"回复展示方式",-1)),Bs={class:"wrapper"},js={class:"row"},Gs=D(()=>vue.createElementVNode("label",{class:"item-title"},"单独打开主题时默认显示楼中楼",-1)),Ws={class:"wrapper"},qs=D(()=>vue.createElementVNode("div",{class:"desc"}," 单独打开这种地址 https://v2ex.com/t/xxxx 时，是否默认显示楼中楼 ",-1)),zs={class:"row"},Js=D(()=>vue.createElementVNode("label",{class:"item-title"},"点击左右两侧透明处关闭主题详情弹框",-1)),Ks={class:"wrapper"},Xs={class:"row"},Ys=D(()=>vue.createElementVNode("label",{class:"item-title"},"正文超长自动折叠",-1)),Qs={class:"wrapper"},Zs={class:"row"},eo=D(()=>vue.createElementVNode("label",{class:"item-title"},"主题宽度",-1)),to={class:"wrapper"},no=D(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则默认宽度为77rem。接受合法的width值： "),vue.createElementVNode("a",{href:"https://vue3js.cn/interview/css/em_px_rem_vh_vw.html#%E4%BA%8C%E3%80%81%E5%8D%95%E4%BD%8D",target:"_blank"},"rem、px、vw、vh(点此查看)"),vue.createTextVNode("。 vw代表屏幕百分比，如想要屏幕的66%，请填写66vw ")],-1)),io=D(()=>vue.createElementVNode("div",{class:"desc"}," 提示：此项设置以后，单独打开详情页时会出现主题突然变宽（窄）的问题，暂时无解 ",-1)),so=D(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),oo=D(()=>vue.createElementVNode("div",{class:"row"},[vue.createElementVNode("label",{class:"main-title"},"高赞回复")],-1)),lo={class:"row"},ro=D(()=>vue.createElementVNode("label",{class:"item-title"},"显示高赞回复",-1)),ao={class:"wrapper"},co={class:"row"},uo=D(()=>vue.createElementVNode("label",{class:"item-title"},"最多显示多少个高赞回复",-1)),po={class:"wrapper"},ho={class:"row"},fo=D(()=>vue.createElementVNode("label",{class:"item-title"},"最少需要多少赞才能被判定为高赞",-1)),mo={class:"wrapper"},go={key:2},yo={class:"row"},wo=D(()=>vue.createElementVNode("label",{class:"item-title"},"用户打标签(跨平台，数据保存在自己的记事本)：",-1)),_o={class:"wrapper"},vo={class:"row"},bo=D(()=>vue.createElementVNode("label",{class:"item-title"},"划词显示Base64解码框",-1)),ko={class:"wrapper"},Co={class:"row"},xo=D(()=>vue.createElementVNode("label",{class:"item-title"},"自动签到",-1)),To={class:"wrapper"},So={class:"row"},Io=D(()=>vue.createElementVNode("label",{class:"item-title"},"自定义背景",-1)),Mo={class:"wrapper"},Lo=D(()=>vue.createElementVNode("div",{class:"desc"},[vue.createTextVNode(" 未设定此值时，则脚本就什么都不做，V站大部分页面背景颜色默认为 #e2e2e2，少部分页面有特定背景。接受一个合法的css color值：例如"),vue.createElementVNode("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/color_value",target:"_blank"},"red、#ffffff、rgb(222,222,22)(点此查看)"),vue.createTextVNode("等等。 ")],-1)),Ro=D(()=>vue.createElementVNode("div",{class:"desc danger"}," 提示：此项需要刷新页面才能生效 ",-1)),Oo={class:"row"},No=D(()=>vue.createElementVNode("label",{class:"item-title"},"收藏时提醒添加到书签",-1)),Po={class:"wrapper"},Eo=D(()=>vue.createElementVNode("div",{class:"desc"}," V站帐号一旦被封禁，则无法登录，无法查看账号收藏了 ",-1)),Vo={key:3},Ao=D(()=>vue.createElementVNode("h1",null,"V2EX Next",-1)),Do={class:"project-desc"},Uo=D(()=>vue.createElementVNode("div",null,[vue.createTextVNode(" 本项目完全开源，已支持移动端！"),vue.createElementVNode("b",null,"好用请大家多多点Star！")],-1)),$o=D(()=>vue.createElementVNode("br",null,null,-1)),Fo={style:{"line-height":"2"}},Ho=["href"],Bo=["href"],jo=["href"],Go=["href"],Wo=["href"],qo=["href"];function zo(e,t,n,o,i,s){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("BaseSwitch"),p=vue.resolveComponent("BaseSelect"),d=vue.resolveComponent("NoticeModal");return vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",Yi,[vue.createElementVNode("div",{class:"mask",onClick:t[0]||(t[0]=(...r)=>s.close&&s.close(...r))}),vue.createElementVNode("div",Qi,[vue.createElementVNode("div",Zi,[vue.createElementVNode("div",es,[vue.createTextVNode(" 脚本设置 "),vue.createElementVNode("div",ts,[vue.createElementVNode("a",{href:s.DefaultVal.mobileScript,target:"_blank"},"(脚本现已支持移动端！)",8,ns)])]),vue.createVNode(a,{icon:"ic:round-close",onClick:s.close},null,8,["onClick"])]),vue.createElementVNode("div",is,[vue.createElementVNode("div",ss,[vue.createElementVNode("div",os,[vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===0&&"active"]),onClick:t[1]||(t[1]=r=>i.tabIndex=0)},rs,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===1&&"active"]),onClick:t[2]||(t[2]=r=>i.tabIndex=1)},cs,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===2&&"active"]),onClick:t[3]||(t[3]=r=>i.tabIndex=2)},us,2),vue.createElementVNode("div",{class:vue.normalizeClass(["tab",i.tabIndex===3&&"active"]),onClick:t[4]||(t[4]=r=>i.tabIndex=3)},hs,2)]),vue.createElementVNode("div",fs,[vue.createElementVNode("a",{href:s.DefaultVal.git,target:"_blank"},[vue.createVNode(a,{icon:"mdi:github"})],8,ms),vue.createElementVNode("a",{href:s.DefaultVal.homeUrl,target:"_blank"},[vue.createVNode(a,{icon:"iconamoon:home-light"})],8,gs)])]),vue.createElementVNode("div",ys,[vue.createElementVNode("div",ws,[i.tabIndex===0?(vue.openBlock(),vue.createElementBlock("div",_s,[vue.createElementVNode("div",vs,[bs,vue.createElementVNode("div",ks,[vue.createElementVNode("div",Cs,[vue.createElementVNode("div",{class:vue.normalizeClass(["radio",i.config.viewType==="simple"?"active":""]),onClick:t[5]||(t[5]=r=>i.config.viewType="simple")},"简洁 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",i.config.viewType==="table"?"active":""]),onClick:t[6]||(t[6]=r=>i.config.viewType="table")},"表格 ",2),vue.createElementVNode("div",{class:vue.normalizeClass(["radio",i.config.viewType==="card"?"active":""]),onClick:t[7]||(t[7]=r=>i.showNotice=!0)},"卡片 ",2)])])]),xs,vue.createElementVNode("div",Ts,[Ss,vue.createElementVNode("div",Is,[vue.createVNode(c,{modelValue:i.config.clickPostItemOpenDetail,"onUpdate:modelValue":t[8]||(t[8]=r=>i.config.clickPostItemOpenDetail=r)},null,8,["modelValue"])])]),Ms,vue.createElementVNode("div",Ls,[Rs,vue.createElementVNode("div",Os,[vue.createVNode(c,{modelValue:i.config.newTabOpen,"onUpdate:modelValue":t[9]||(t[9]=r=>i.config.newTabOpen=r)},null,8,["modelValue"])])]),Ns,vue.createElementVNode("div",Ps,[Es,vue.createElementVNode("div",Vs,[vue.createVNode(c,{modelValue:i.config.newTabOpenActive,"onUpdate:modelValue":t[10]||(t[10]=r=>i.config.newTabOpenActive=r)},null,8,["modelValue"])])])])):vue.createCommentVNode("",!0),i.tabIndex===1?(vue.openBlock(),vue.createElementBlock("div",As,[vue.createElementVNode("div",Ds,[Us,vue.createElementVNode("div",$s,[vue.createVNode(c,{modelValue:i.config.showToolbar,"onUpdate:modelValue":t[11]||(t[11]=r=>i.config.showToolbar=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Fs,[Hs,vue.createElementVNode("div",Bs,[vue.createVNode(p,{"display-type":i.config.commentDisplayType,"onUpdate:displayType":t[12]||(t[12]=r=>i.config.commentDisplayType=r)},null,8,["display-type"])])]),vue.createElementVNode("div",js,[Gs,vue.createElementVNode("div",Ws,[vue.createVNode(c,{modelValue:i.config.autoOpenDetail,"onUpdate:modelValue":t[13]||(t[13]=r=>i.config.autoOpenDetail=r)},null,8,["modelValue"])])]),qs,vue.createElementVNode("div",zs,[Js,vue.createElementVNode("div",Ks,[vue.createVNode(c,{modelValue:i.config.closePostDetailBySpace,"onUpdate:modelValue":t[14]||(t[14]=r=>i.config.closePostDetailBySpace=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Xs,[Ys,vue.createElementVNode("div",Qs,[vue.createVNode(c,{modelValue:i.config.contentAutoCollapse,"onUpdate:modelValue":t[15]||(t[15]=r=>i.config.contentAutoCollapse=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Zs,[eo,vue.createElementVNode("div",to,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=r=>i.config.postWidth=r)},null,512),[[vue.vModelText,i.config.postWidth]])])]),no,io,so,oo,vue.createElementVNode("div",lo,[ro,vue.createElementVNode("div",ao,[vue.createVNode(c,{modelValue:i.config.showTopReply,"onUpdate:modelValue":t[17]||(t[17]=r=>i.config.showTopReply=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",co,[uo,vue.createElementVNode("div",po,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[18]||(t[18]=r=>i.config.topReplyCount=r)},null,512),[[vue.vModelText,i.config.topReplyCount]])])]),vue.createElementVNode("div",ho,[fo,vue.createElementVNode("div",mo,[vue.withDirectives(vue.createElementVNode("input",{type:"number",min:"1","onUpdate:modelValue":t[19]||(t[19]=r=>i.config.topReplyLoveMinCount=r)},null,512),[[vue.vModelText,i.config.topReplyLoveMinCount]])])])])):vue.createCommentVNode("",!0),i.tabIndex===2?(vue.openBlock(),vue.createElementBlock("div",go,[vue.createElementVNode("div",yo,[wo,vue.createElementVNode("div",_o,[vue.createVNode(c,{modelValue:i.config.openTag,"onUpdate:modelValue":t[20]||(t[20]=r=>i.config.openTag=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",vo,[bo,vue.createElementVNode("div",ko,[vue.createVNode(c,{modelValue:i.config.base64,"onUpdate:modelValue":t[21]||(t[21]=r=>i.config.base64=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",Co,[xo,vue.createElementVNode("div",To,[vue.createVNode(c,{modelValue:i.config.autoSignin,"onUpdate:modelValue":t[22]||(t[22]=r=>i.config.autoSignin=r)},null,8,["modelValue"])])]),vue.createElementVNode("div",So,[Io,vue.createElementVNode("div",Mo,[vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=r=>i.config.customBgColor=r)},null,512),[[vue.vModelText,i.config.customBgColor]])])]),Lo,Ro,vue.createElementVNode("div",Oo,[No,vue.createElementVNode("div",Po,[vue.createVNode(c,{modelValue:i.config.collectBrowserNotice,"onUpdate:modelValue":t[24]||(t[24]=r=>i.config.collectBrowserNotice=r)},null,8,["modelValue"])])]),Eo])):vue.createCommentVNode("",!0),i.tabIndex===3?(vue.openBlock(),vue.createElementBlock("div",Vo,[Ao,vue.createElementVNode("div",Do,[Uo,$o,vue.createElementVNode("div",Fo,[vue.createElementVNode("div",null,[vue.createTextVNode("官网："),vue.createElementVNode("a",{href:s.DefaultVal.homeUrl,target:"_blank"},vue.toDisplayString(s.DefaultVal.homeUrl),9,Ho)]),vue.createElementVNode("div",null,[vue.createTextVNode("GitHub地址："),vue.createElementVNode("a",{href:s.DefaultVal.git,target:"_blank"},vue.toDisplayString(s.DefaultVal.git),9,Bo)]),vue.createElementVNode("div",null,[vue.createTextVNode("PC脚本地址："),vue.createElementVNode("a",{href:s.DefaultVal.pcScript,target:"_blank"},vue.toDisplayString(s.DefaultVal.pcScript),9,jo)]),vue.createElementVNode("div",null,[vue.createTextVNode("移动端脚本地址："),vue.createElementVNode("a",{href:s.DefaultVal.mobileScript,target:"_blank"},vue.toDisplayString(s.DefaultVal.mobileScript),9,Go)]),vue.createElementVNode("div",null,[vue.createTextVNode("反馈: "),vue.createElementVNode("a",{href:s.DefaultVal.issue,target:"_blank"},vue.toDisplayString(s.DefaultVal.issue),9,Wo)]),vue.createElementVNode("div",null,[vue.createTextVNode("更新日志："),vue.createElementVNode("a",{href:s.DefaultVal.pcLog,target:"_blank"},vue.toDisplayString(s.DefaultVal.pcLog),9,qo)])])])])):vue.createCommentVNode("",!0)])])])]),vue.createVNode(d,{show:i.showNotice,"onUpdate:show":t[25]||(t[25]=r=>i.showNotice=r),onConfirm:t[26]||(t[26]=r=>i.config.viewType="card")},null,8,["show"])])):vue.createCommentVNode("",!0)]),_:1})}const Jo=K(Xi,[["render",zo],["__scopeId","data-v-9f347886"]]),Ko={name:"Point",components:{PopConfirm:$e,Icon:te},inject:["post","isLogin"],props:{item:{type:Object,default(){return {}}},apiUrl:""},computed:{disabled(){return this.item.username===window.user.username||this.item.isThanked||!this.isLogin}},methods:{thankError(){if(!this.isLogin)return v.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"});if(this.item.username===window.user.username)return v.emit(b.SHOW_MSG,{type:"warning",text:"不能感谢自己"});if(this.item.isThanked)return v.emit(b.SHOW_MSG,{type:"warning",text:"已经感谢过了"})},async thank(){this.$emit("addThank");let e=`${window.baseUrl}/thank/${this.apiUrl}?once=${this.post.once}`;$.post(e).then(t=>{t.success||(this.$emit("recallThank"),v.emit(b.SHOW_MSG,{type:"error",text:t.message})),v.emit(b.REFRESH_ONCE,t.once);},t=>{this.$emit("recallThank"),v.emit(b.SHOW_MSG,{type:"error",text:"感谢失败"}),v.emit(b.REFRESH_ONCE);});}}},Xo={key:2,class:"link-num"},Yo={key:3};function Qo(e,t,n,o,i,s){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("PopConfirm");return vue.openBlock(),vue.createBlock(c,{disabled:s.disabled,title:`确认花费 10 个铜币向 @${n.item.username} 的这条回复发送感谢？`,onConfirm:s.thank},{default:vue.withCtx(()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["tool",[s.disabled&&"disabled"]]),onClick:t[0]||(t[0]=(...p)=>s.thankError&&s.thankError(...p))},[n.item.isThanked?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(a,{key:1,color:n.item.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),n.item.thankCount?(vue.openBlock(),vue.createElementBlock("span",Xo,vue.toDisplayString(n.item.thankCount),1)):(vue.openBlock(),vue.createElementBlock("span",Yo,"感谢"))],2)]),_:1},8,["disabled","title","onConfirm"])}const et=K(Ko,[["render",Qo]]);const Zo={name:"Author",components:{PopConfirm:$e,Point:et,Icon:te},inject:["isLogin","tags","config","isNight"],props:{modelValue:!1,comment:{type:Object,default(){return {}}},type:{type:String,default(){return "list"}}},computed:{isDev(){return !1},pointInfo(){return {isThanked:this.comment.isThanked,thankCount:this.comment.thankCount,username:this.comment.username}},myTags(){return this.tags[this.comment.username]??[]},context(){return this.comment.replyUsers.length}},methods:{jump(){v.emit(b.JUMP,this.comment.floor);},showRelationReply(){if(!this.comment.replyUsers.length){v.emit(b.SHOW_MSG,{type:"warning",text:"该回复无上下文"});return}v.emit(b.RELATION_REPLY,{left:this.comment.replyUsers,right:this.comment.username,rightFloor:this.comment.floor});},addTag(){v.emit(b.ADD_TAG,this.comment.username);},removeTag(e){v.emit(b.REMOVE_TAG,{username:this.comment.username,tag:e});},checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(v.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},addThank(){v.emit(b.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"add"});},recallThank(){v.emit(b.CHANGE_COMMENT_THANK,{id:this.comment.id,type:"recall"});}}},Fe=e=>(vue.pushScopeId("data-v-64aa1930"),e=e(),vue.popScopeId(),e),el={class:"Author-left"},tl=["href"],nl=["src"],il={class:"texts"},sl=["href"],ol={key:0,class:"owner"},ll={key:1,class:"dup"},rl={key:2,class:"mod"},al={class:"ago"},cl={class:"my-tag"},dl=Fe(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),ul=["onClick"],pl={class:"Author-right"},hl={key:0,class:"toolbar"},fl={class:"tool"},ml=Fe(()=>vue.createElementVNode("span",null,"隐藏",-1)),gl=Fe(()=>vue.createElementVNode("span",null,"上下文",-1)),yl=Fe(()=>vue.createElementVNode("span",null,"跳转",-1)),wl=Fe(()=>vue.createElementVNode("span",null,"回复",-1));function _l(e,t,n,o,i,s){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("PopConfirm"),p=vue.resolveComponent("Point");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["Author",{expand:!n.modelValue}])},[vue.createElementVNode("div",el,[n.modelValue?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(a,{key:0,onClick:t[0]||(t[0]=vue.withModifiers(d=>e.$emit("update:modelValue",!0),["stop"])),color:"#177EC9",class:"expand-icon",icon:"gravity-ui:chevrons-expand-up-right"})),s.config.viewType!=="simple"?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${n.comment.username}`},[vue.createElementVNode("img",{src:n.comment.avatar,alt:""},null,8,nl)],8,tl)):vue.createCommentVNode("",!0),vue.createElementVNode("span",il,[vue.createElementVNode("strong",null,[vue.createElementVNode("a",{href:`/member/${n.comment.username}`,class:vue.normalizeClass(["username",{dark:s.isNight}])},vue.toDisplayString(n.comment.username),11,sl)]),n.comment.isOp?(vue.openBlock(),vue.createElementBlock("div",ol,"OP")):vue.createCommentVNode("",!0),n.comment.isDup?(vue.openBlock(),vue.createElementBlock("div",ll,"DUP")):vue.createCommentVNode("",!0),n.comment.isMod?(vue.openBlock(),vue.createElementBlock("div",rl,"MOD")):vue.createCommentVNode("",!0),vue.createElementVNode("span",al,vue.toDisplayString(n.comment.date),1),s.isLogin&&s.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.myTags,d=>(vue.openBlock(),vue.createElementBlock("span",cl,[dl,vue.createElementVNode("span",null,vue.toDisplayString(d),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(r=>s.removeTag(d),["stop"])},null,8,ul)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[1]||(t[1]=vue.withModifiers((...d)=>s.addTag&&s.addTag(...d),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)])]),vue.createElementVNode("div",pl,[s.isLogin?(vue.openBlock(),vue.createElementBlock("div",hl,[vue.createVNode(c,{title:"确认隐藏这条回复?",onConfirm:t[2]||(t[2]=d=>e.$emit("hide"))},{default:vue.withCtx(()=>[vue.createElementVNode("div",fl,[vue.createVNode(a,{icon:"fluent:eye-hide-24-regular"}),ml])]),_:1}),s.context?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"tool",onClick:t[3]||(t[3]=vue.withModifiers((...d)=>s.showRelationReply&&s.showRelationReply(...d),["stop"]))},[vue.createVNode(a,{icon:"iconoir:page-search"}),gl])):vue.createCommentVNode("",!0),n.type==="top"?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"tool",onClick:t[4]||(t[4]=vue.withModifiers((...d)=>s.jump&&s.jump(...d),["stop"]))},[vue.createVNode(a,{icon:"icon-park-outline:to-bottom"}),yl])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[5]||(t[5]=vue.withModifiers(d=>s.checkIsLogin("reply"),["stop"]))},[vue.createVNode(a,{icon:"mynaui:message"}),wl]),vue.withDirectives(vue.createVNode(p,{item:s.pointInfo,onAddThank:s.addThank,onRecallThank:s.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,!n.comment.thankCount]])])):vue.createCommentVNode("",!0),vue.withDirectives(vue.createVNode(p,{item:s.pointInfo,onAddThank:s.addThank,onRecallThank:s.recallThank,"api-url":"reply/"+n.comment.id},null,8,["item","onAddThank","onRecallThank","api-url"]),[[vue.vShow,n.comment.thankCount]]),vue.createElementVNode("div",{class:vue.normalizeClass(["floor",{isDev:s.isDev}])},vue.toDisplayString(n.comment.floor),3)])],2)}const hn=K(Zo,[["render",_l],["__scopeId","data-v-64aa1930"]]);const vl=e=>(vue.pushScopeId("data-v-312ab0d0"),e=e(),vue.popScopeId(),e),bl={class:"get-cursor"},kl=["innerHTML"],Cl={class:"toolbar"},xl={class:"left"},Tl={class:"upload"},Sl={key:0,style:{color:"black","font-size":"1.4rem"}},Il={class:"right"},Ml=vl(()=>vue.createElementVNode("div",{class:"title"},"经典表情",-1)),Ll={class:"list"},Rl=["src","onClick"],Ol={class:"emoji"},Nl={class:"title"},Pl={class:"list"},El=["onClick"],Vl={__name:"PostEditor",props:{replyUser:null,replyFloor:null,useType:{type:String,default(){return "reply-comment"}}},emits:["close"],setup(e,{expose:t,emit:n}){const o=e,{replyUser:i,replyFloor:s,useType:a}=o,c=i?`@${i} #${s} `:"",p=n,d=vue.inject("post"),r=vue.inject("show"),u=vue.inject("isNight");vue.inject("pageType");const g=vue.inject("allReplyUsers");let y=vue.ref(!1);const _=vue.ref(!1),m=vue.ref(!1),f=vue.ref(!1),C=vue.ref("editorId_"+Date.now()),k=vue.ref(c),S=vue.ref(null),z=vue.ref(null),Q=vue.ref(null),V=vue.ref('<span style="white-space:pre-wrap;"> </span>'),j=[{title:"小黄脸",list:["😀","😁","😂","🤣","😅","😊","😋","😘","🥰","😗","🤩","🤔","🤨","😐","😑","🙄","😏","😪","😫","🥱","😜","😒","😔","😨","😰","😱","🥵","😡","🥳","🥺","🤭","🧐","😎","🤓","😭","🤑","🤮"]},{title:"手势",list:["🙋","🙎","🙅","🙇","🤷","🤏","👉","✌️","🤘","🤙","👌","🤌","👍","👎","👋","🤝","🙏","👏"]},{title:"庆祝",list:["✨","🎉","🎊"]},{title:"其他",list:["👻","🤡","🐔","👀","💩","🐴","🦄","🐧","🐶","🐒","🙈","🙉","🙊","🐵"]}],Y=[{name:"[狗头]",low:"https://i.imgur.com/io2SM1h.png",high:"https://i.imgur.com/0icl60r.png"},{name:"[马]",low:"https://i.imgur.com/8EKZv7I.png",high:"https://i.imgur.com/ANFUX52.png"},{name:"[不高兴]",low:"https://i.imgur.com/huX6coX.png",high:"https://i.imgur.com/N7JEuvc.png"},{name:"[呵呵]",low:"https://i.imgur.com/RvoLAbX.png",high:"https://i.imgur.com/xSzIqrK.png"},{name:"[真棒]",low:"https://i.imgur.com/xr1UOz1.png",high:"https://i.imgur.com/w8YEw9Q.png"},{name:"[鄙视]",low:"https://i.imgur.com/u6jlqVq.png",high:"https://i.imgur.com/8JFNANq.png"},{name:"[疑问]",low:"https://i.imgur.com/F29pmQ6.png",high:"https://i.imgur.com/EbbTQAR.png"},{name:"[吐舌]",low:"https://i.imgur.com/InmIzl9.png",high:"https://i.imgur.com/Ovj56Cd.png"},{name:"[笑眼]",low:"https://i.imgur.com/ZveiiGy.png",high:"https://i.imgur.com/PI1CfEr.png"},{name:"[狂汗]",low:"https://i.imgur.com/veWihk6.png",high:"https://i.imgur.com/3LtHdQv.png"},{name:"[大哭]",low:"https://i.imgur.com/hu4oR6C.png",high:"https://i.imgur.com/b4X9XLE.png"},{name:"[喷]",low:"https://i.imgur.com/bkw3VRr.png",high:"https://i.imgur.com/wnZL13L.png"},{name:"[苦笑]",low:"https://i.imgur.com/VUWFktU.png",high:"https://i.imgur.com/NAfspZ1.png"},{name:"[喝酒]",low:"https://i.imgur.com/2ZZSapE.png",high:"https://i.imgur.com/rVbSVak.png"},{name:"[吃瓜]",low:"https://i.imgur.com/ee8Lq7H.png",high:"https://i.imgur.com/0L26og9.png"},{name:"[捂脸]",low:"https://i.imgur.com/krir4IG.png",high:"https://i.imgur.com/qqBqgVm.png"},{name:"[呕]",low:"https://i.imgur.com/6CUiUxv.png",high:"https://i.imgur.com/kgdxRsG.png"},{name:"[阴险]",low:"https://i.imgur.com/MA8YqTP.png",high:"https://i.imgur.com/e94jbaT.png"},{name:"[怒]",low:"https://i.imgur.com/n4kWfGB.png",high:"https://i.imgur.com/iMXxNxh.png"},{name:"[衰]",low:"https://i.imgur.com/voHFDyQ.png",high:"https://i.imgur.com/XffE6gu.png"},{name:"[合十]",low:"https://i.imgur.com/I8x3ang.png",high:"https://i.imgur.com/T4rJVee.png"},{name:"[赞]",low:"https://i.imgur.com/lG44yUl.png",high:"https://i.imgur.com/AoF5PLp.png"},{name:"[踩]",low:"https://i.imgur.com/cJp0uKZ.png",high:"https://i.imgur.com/1XYGfXj.png"},{name:"[爱心]",low:"https://i.imgur.com/sLENaF5.png",high:"https://i.imgur.com/dND56oX.png"},{name:"[心碎]",low:"https://i.imgur.com/AZxJzve.png",high:"https://i.imgur.com/RiUsPci.png"}],X=["3107b9ef8b316f3","442b04f26eefc8a","59cfebe717c09e4","60605aad4a62882","6c65ab1d3f5452a","83e123737849aa9","9311f6be1c10160","c4a4a563f698595","81be04b9e4a08ce"];t({content:k,isFocus:()=>y.value});const ne=vue.computed(()=>[a,y.value?"isFocus":"",u.value?"isNight":""]),re=vue.computed(()=>{var O;if(!S.value||!k.value)return "";let H=((O=S.value)==null?void 0:O.selectionStart)||0;return k.value.substring(0,H).replace(/</g,"<").replace(/>/g,">").replace(/\n/g,"<br/>").replace(/\s/g,V.value)}),he=vue.computed(()=>k.value?k.value===c:!0);function _e(H){H.preventDefault(),He(H.dataTransfer.files[0]);}async function He(H){if(!H||m.value)return;m.value=!0;const O=new FormData;O.append("image",H);const U=Math.floor(Math.random()*X.length),J=X[U],Z=await fetch("https://api.imgur.com/3/upload",{method:"POST",headers:{Authorization:`Client-ID ${J}`},body:O});if(m.value=!1,Z.ok){const G=await Z.json();if(G.success)return it(" "+G.data.link+" ")}v.emit(b.SHOW_MSG,{type:"error",text:"上传失败"});}async function Ce(){if(he.value||_.value)return;_.value=!0;let H=k.value.replace(/\[((?!\[).)+\]/g,function(G){let se=Y.find(ve=>ve.name===G);return se?se.low+" ":G}),O=k.value.replace(/https?:\/\/(i\.)?imgur\.com\/((?!http).)+\.(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG)/g,function(G){return `<img src="${G}" data-originUrl="${G}" data-notice="这个img标签由v2ex-超级增强脚本解析" style="max-width: 100%">`});O=O.replace(/\[((?!\[).)+\]/g,function(G){let se=Y.find(ve=>ve.name===G);return se?`<a target="_blank" href="${se.low}" rel="nofollow noopener"><img src="${se.low}" class="embedded_image" rel="noreferrer"></a> `:G});let U=O.match(/@([\w]+?[\s])/g);U&&U.map(G=>{let se=G.replace("@","").replace(" ","");O=O.replace(se,`<a href="/member/${se}">${se}</a>`);}),O=O.replaceAll(`
`,"<br/>");let J={thankCount:0,isThanked:!1,isOp:d.value.username===window.user.username,isDup:!1,id:Date.now(),username:window.user.username,avatar:window.user.avatar,date:"几秒前",floor:d.value.replyCount+1,reply_content:O??"",children:[],replyUsers:i?[i]:[],replyFloor:s||-1,level:a==="reply-comment"?1:0};J.hideCallUserReplyContent=J.reply_content,J.replyUsers.length===1&&(J.hideCallUserReplyContent=J.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>""));let Z=`${window.baseUrl}/t/${d.value.id}`;$.post(Z,{content:H,once:d.value.once}).then(G=>{_.value=!1;let se=G.search("你上一条回复的内容和这条相同");if(se>-1)return v.emit(b.SHOW_MSG,{type:"error",text:"你上一条回复的内容和这条相同"});if(se=G.search("请不要在每一个回复中都包括外链，这看起来像是在 spamming"),se>-1)return v.emit(b.SHOW_MSG,{type:"error",text:"请不要在每一个回复中都包括外链，这看起来像是在 spamming"});if(G.search("创建新回复")>-1){v.emit(b.REFRESH_ONCE,G),v.emit(b.SHOW_MSG,{type:"error",text:"回复出现了问题，请使用原版进行回复"});let Be=window.document.body.clientWidth,je=1200,vn=Be/2-je/2,Rt=window.open("创建新回复","",`width=${je},height=600,left=${vn},top=100`);Rt.document.write(G);let bn=setInterval(function(){Rt.closed&&(clearInterval(bn),v.emit(b.REFRESH_POST));},1e3);return}k.value=c,p("close"),v.emit(b.REFRESH_ONCE,G),v.emit(b.SHOW_MSG,{type:"success",text:"回复成功"}),v.emit(b.ADD_REPLY,J);},G=>{_.value=!1,v.emit(b.SHOW_MSG,{type:"error",text:"回复失败"});}).catch(G=>{});}function Ie(H){if(f.value)return f.value=!1;let O=H.currentTarget.getBoundingClientRect();Q.value.style.left=O.left+30+"px",Q.value.style.bottom=window.innerHeight-O.top-20+"px",f.value=!0;}function ae(){v.emit(b.SHOW_CALL,{show:!1}),v.off(b.SET_CALL);}function nt(){S.value.style.height=0,S.value.style.height=S.value.scrollHeight+"px";}function it(H){let O=S.value.selectionStart,U=k.value.slice(0,O),J=k.value.slice(O,k.value.length);k.value=U+H+J;let Z=U.length+H.length;setTimeout(()=>{S.value.focus(),S.value.setSelectionRange(Z,Z),nt();});}function Me(H){let O=z.value.getBoundingClientRect();v.emit(b.SHOW_CALL,{show:!0,top:O.top,left:O.left,text:H}),v.off(b.SET_CALL),v.on(b.SET_CALL,U=>{let J=S.value.selectionStart,Z=k.value.slice(0,J),G=k.value.slice(J,k.value.length),se=Z.lastIndexOf("@");Z=k.value.slice(0,se+1),U==="管理员"&&(U="Livid @Kai @Olivia @GordianZ @sparanoid"),U==="所有人"&&(U=g.value.map((Be,je)=>je?"@"+Be:Be).join(" ")),k.value=Z+U+" "+G;let ve=Z.length+U.length+1;setTimeout(()=>{S.value.setSelectionRange(ve,ve),nt();}),v.off(b.SET_CALL);});}function yn(H){switch(H.keyCode){case 8:k.value==="@"&&ae();break;case 37:case 38:case 39:case 40:setTimeout(()=>Mt({data:""}),100);break;case 27:return H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),!1;case 13:H.ctrlKey&&Ce(),H.metaKey&&Ce();break}}function Mt(H){let O=S.value.selectionStart;if(k.value){if(H.data===" ")return ae();if(H.data==="@"){if(k.value.length!==1){if(k.value[O-2]===" "||k.value[O-2]===`
`)return Me("")}else return Me("");ae();}else {nt();let U=k.value.slice(0,O),J=U.lastIndexOf("@");if(J===-1)return ae();let Z=U.slice(J,O);if(Z.includes(" "))ae();else {if(J===0)return Me(Z.replace("@",""));if(k.value.length!==1){if(k.value[J-1]===" "||k.value[J-1]===`
`)return Me(Z.replace("@",""))}else return Me(Z.replace("@",""));ae();}}}}function Lt(H){const O=H.clipboardData.items,U=[].slice.call(O).filter(function(G){return G.type.indexOf("image")!==-1});if(U.length===0)return;const Z=U[0].getAsFile();He(Z);}function wn(){document.removeEventListener("paste",Lt),y.value=!1;}function _n(){document.addEventListener("paste",Lt);}return vue.watch(()=>r,H=>{H.value&&(f.value=!1);},{deep:!0}),vue.onMounted(()=>{$(`.${C.value}`).each(function(){this.setAttribute("style","height:"+this.scrollHeight+"px;overflow-y:hidden;");}).on("input",function(){this.style.height=0,this.style.height=this.scrollHeight+"px";}),a==="reply-comment"&&S.value&&S.value.focus();}),vue.onBeforeUnmount(()=>{$(`.${C.value}`).off();}),(H,O)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-editor-wrapper",ne.value])},[vue.withDirectives(vue.createElementVNode("textarea",{class:vue.normalizeClass(["post-editor",C.value]),ref_key:"txtRef",ref:S,onFocus:O[0]||(O[0]=U=>vue.isRef(y)?y.value=!0:y=!0),onBlur:wn,onFocusin:_n,placeholder:"请尽量让自己的回复能够对别人有帮助",onInput:Mt,onKeydown:yn,onDrop:_e,"onUpdate:modelValue":O[1]||(O[1]=U=>k.value=U)},null,34),[[vue.vModelText,k.value]]),vue.createElementVNode("div",bl,[vue.createElementVNode("span",{innerHTML:re.value},null,8,kl),vue.createElementVNode("span",{class:"cursor",ref_key:"cursorRef",ref:z},"|",512)]),vue.createElementVNode("div",Cl,[vue.createElementVNode("div",xl,[vue.createVNode(vue.unref(te),{onClick:vue.withModifiers(Ie,["stop"]),icon:"streamline:smiley-happy"}),vue.createElementVNode("div",Tl,[vue.createElementVNode("input",{type:"file",accept:"image/*",onChange:O[2]||(O[2]=U=>He(U.currentTarget.files[0]))},null,32),vue.createVNode(vue.unref(te),{icon:"lets-icons:img-load-box-fill"})]),m.value?(vue.openBlock(),vue.createElementBlock("span",Sl,"上传中.....")):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",Il,[vue.unref(a)==="reply-comment"?(vue.openBlock(),vue.createBlock(ye,{key:0,type:"link",size:"small",style:{"margin-right":"1rem",cursor:"pointer"},onClick:O[3]||(O[3]=vue.withModifiers(U=>p("close"),["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode(" 关闭 ")]),_:1})):vue.createCommentVNode("",!0),vue.createVNode(ye,{size:"small",disabled:he.value,loading:_.value,onClick:vue.withModifiers(Ce,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("回复 ")]),_:1},8,["disabled","loading"])])]),vue.withDirectives(vue.createElementVNode("div",{class:"emoticon-pack",ref_key:"emoticonsRef",ref:Q},[vue.createVNode(vue.unref(te),{icon:"ic:round-close",onClick:O[4]||(O[4]=vue.withModifiers(U=>f.value=!1,["stop"]))}),Ml,vue.createElementVNode("div",Ll,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(Y,U=>vue.createElementVNode("img",{src:U.high,onClick:vue.withModifiers(J=>{it(U.name),f.value=!1;},["stop"])},null,8,Rl)),64))]),vue.createElementVNode("div",Ol,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(j,U=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("div",Nl,vue.toDisplayString(U.title),1),vue.createElementVNode("div",Pl,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(U.list,J=>(vue.openBlock(),vue.createElementBlock("span",{onClick:vue.withModifiers(Z=>{it(J),f.value=!1;},["stop"])},vue.toDisplayString(J),9,El))),256))])],64))),64))])],512),[[vue.vShow,f.value]])],2))}},Tt=K(Vl,[["__scopeId","data-v-312ab0d0"]]);const Al={key:0,class:"html-wrapper"},Dl=["innerHTML"],Ul=900,$l={__name:"BaseHtmlRender",props:["html"],setup(e){const t=vue.inject("config"),n=e,o=vue.ref(null),i=vue.ref(!1),s=vue.ref(!1);function a(p){if(!t.value.base64)return;let d=window.win().getSelection().toString();if(d){let r=d.match(/([A-Za-z0-9+/=]+)/g);if(r){if(r[0].length<4)return;v.emit(b.SHOW_TOOLTIP,{text:r[0],e:p});}}}vue.watch(t.value,p=>{p.contentAutoCollapse||(i.value=!1);}),vue.watch([()=>o.value,()=>n.html],()=>{!o.value||!n.html||t.value.contentAutoCollapse&&(o.value.querySelectorAll("img").forEach(p=>{p.removeEventListener("load",c),p.addEventListener("load",c);}),c());},{immediate:!0,flush:"post"});function c(){if(s.value)return;let p=o.value.getBoundingClientRect();i.value=p.height>=Ul;}return (p,d)=>n.html?(vue.openBlock(),vue.createElementBlock("div",Al,[vue.createElementVNode("div",{class:vue.normalizeClass({mask:i.value})},[vue.createElementVNode("div",{ref_key:"contentRef",ref:o,innerHTML:n.html,onMouseup:a},null,40,Dl)],2),i.value?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"expand",onClick:d[0]||(d[0]=r=>{i.value=!1,s.value=!0;})},"展开")):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)}},tt=K($l,[["__scopeId","data-v-2c9a538c"]]);const Fl={name:"TopSubComment",components:{BaseHtmlRender:tt,Author:hn,PostEditor:Tt,Point:et,Icon:te},inject:["post","postDetailWidth","show","isNight","isLogin","tags","config"],props:{modelValue:{reply_content:""},level:-1},data(){return {expand:!0,edit:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);}},computed:{myTags(){return this.tags[this.modelValue.username]??[]}},methods:{jump(){v.emit(b.JUMP,this.modelValue.floor);}}},Hl=e=>(vue.pushScopeId("data-v-176307ee"),e=e(),vue.popScopeId(),e),Bl=["data-floor"],jl=Hl(()=>vue.createElementVNode("div",{class:"left expand-line"},null,-1)),Gl={class:"right"},Wl={class:"simple-wrapper"};function ql(e,t,n,o,i,s){const a=vue.resolveComponent("Author"),c=vue.resolveComponent("BaseHtmlRender"),p=vue.resolveComponent("PostEditor"),d=vue.resolveComponent("TopSubComment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["top-sub-comment",n.level===1&&"top-sub-reply"]),ref:"comment","data-floor":i.floor},[jl,vue.createElementVNode("div",Gl,[vue.createVNode(a,{modelValue:i.expand,"onUpdate:modelValue":t[0]||(t[0]=r=>i.expand=r),comment:n.modelValue,onReply:t[1]||(t[1]=r=>i.edit=!i.edit),type:"top"},null,8,["modelValue","comment"]),vue.createVNode(c,{class:"reply_content",html:n.modelValue.hideCallUserReplyContent},null,8,["html"]),i.edit?(vue.openBlock(),vue.createBlock(p,{key:0,onClose:t[2]||(t[2]=r=>i.edit=!1),replyInfo:i.replyInfo,replyUser:n.modelValue.username,replyFloor:n.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",Wl,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.modelValue.children,(r,u)=>(vue.openBlock(),vue.createBlock(d,{modelValue:n.modelValue.children[u],"onUpdate:modelValue":g=>n.modelValue.children[u]=g,key:u},null,8,["modelValue","onUpdate:modelValue"]))),128))])])],10,Bl)}const zl=K(Fl,[["render",ql],["__scopeId","data-v-176307ee"]]);const Jl={name:"Comment",components:{BaseHtmlRender:tt,Author:hn,PostEditor:Tt,Point:et,Icon:te,TopSubComment:zl},inject:["post","postDetailWidth","show","isNight","config"],props:{modelValue:{reply_content:""},type:{type:String,default(){return "list"}}},data(){return {edit:!1,ding:!1,expand:!0,expandTopReply:!1,expandWrong:!1,replyInfo:`@${this.modelValue.username} #${this.modelValue.floor} `,cssStyle:null,floor:this.modelValue.floor}},watch:{show(e){e&&(this.edit=!1);},postDetailWidth(e,t){this.checkIsTooLong(e);}},computed:{CommentDisplayType(){return P},myClass(){return {isOp:this.modelValue.isOp,isSimple:this.config.viewType==="simple",ding:this.ding,isLevelOne:this.type==="top"?!0:this.modelValue.level===0,["c_"+this.floor]:this.type!=="top"}}},mounted(){this.checkIsTooLong(this.postDetailWidth);},methods:{checkIsTooLong(e){if(e!==0){let t=this.$refs.comment.getBoundingClientRect(),n=e*.6;if(n<t.width&&t.width<n+25&&this.modelValue.children.length){this.expand=!1;let o=2;this.cssStyle={padding:"1rem 0",width:`calc(${e}px - ${o}rem)`,transform:`translateX(calc(${t.width-e}px + ${o}rem))`,background:this.isNight?"#18222d":"white"};}}},showDing(){this.ding=!0,setTimeout(()=>{this.ding=!1;},2e3);},hide(){let e=`${window.baseUrl}/ignore/reply/${this.modelValue.id}?once=${this.post.once}`;v.emit(b.REMOVE,this.modelValue.floor),$.post(e).then(t=>{v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"success",text:"隐藏成功"});},t=>{v.emit(b.SHOW_MSG,{type:"warning",text:"隐藏成功,仅本次有效（接口调用失败！）"});});},toggle(){this.expand=!this.expand;},jump(){v.emit(b.JUMP,this.modelValue.floor);}}},we=e=>(vue.pushScopeId("data-v-84714fe5"),e=e(),vue.popScopeId(),e),Kl=["data-floor"],Xl={class:"comment-content"},Yl={class:"right"},Ql={class:"w"},Zl={key:0,class:"wrong-wrapper"},er=["href"],tr={class:"del-line"},nr=we(()=>vue.createElementVNode("i",{class:"fa fa-question-circle-o wrong-icon","aria-hidden":"true"},null,-1)),ir={key:0,class:"warning"},sr=we(()=>vue.createElementVNode("br",null,null,-1)),or=we(()=>vue.createElementVNode("br",null,null,-1)),lr=we(()=>vue.createElementVNode("br",null,null,-1)),rr=we(()=>vue.createElementVNode("br",null,null,-1)),ar=we(()=>vue.createElementVNode("br",null,null,-1)),cr=we(()=>vue.createElementVNode("a",{href:"https://github.com/zyronon/web-scripts/issues",target:"_blank"},"这里",-1)),dr=we(()=>vue.createElementVNode("div",{class:"gang"},null,-1)),ur={class:"simple-wrapper"},pr={key:0,class:"top-reply-wrap"};function hr(e,t,n,o,i,s){const a=vue.resolveComponent("Author"),c=vue.resolveComponent("BaseHtmlRender"),p=vue.resolveComponent("PostEditor"),d=vue.resolveComponent("Icon"),r=vue.resolveComponent("TopSubComment"),u=vue.resolveComponent("Comment",!0);return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",s.myClass]),ref:"comment","data-floor":i.floor},[vue.createVNode(a,{modelValue:i.expand,"onUpdate:modelValue":t[0]||(t[0]=g=>i.expand=g),comment:n.modelValue,onReply:t[1]||(t[1]=g=>i.edit=!i.edit),type:n.type,onHide:s.hide},null,8,["modelValue","comment","type","onHide"]),i.cssStyle&&!i.expand?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[2]||(t[2]=g=>i.expand=!i.expand)}," 由于嵌套回复层级太深，自动将后续回复隐藏 ")):vue.createCommentVNode("",!0),i.expand?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"comment-content-w",style:vue.normalizeStyle(i.cssStyle)},[i.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"more ago",onClick:t[3]||(t[3]=g=>i.expand=!i.expand)}," 由于嵌套回复层级太深，自动将以下回复移至可见范围 ")):vue.createCommentVNode("",!0),vue.createElementVNode("div",Xl,[vue.createElementVNode("div",{class:"left expand-line",onClick:t[4]||(t[4]=(...g)=>s.toggle&&s.toggle(...g))}),vue.createElementVNode("div",Yl,[vue.createElementVNode("div",Ql,[n.modelValue.isWrong?(vue.openBlock(),vue.createElementBlock("div",Zl,[vue.createElementVNode("span",{onClick:t[5]||(t[5]=g=>i.expandWrong=!i.expandWrong),title:"点击楼层号查看提示"},[vue.createElementVNode("a",{href:"/member/"+n.modelValue.replyUsers[0]},"@"+vue.toDisplayString(n.modelValue.replyUsers[0])+"  ",9,er),vue.createElementVNode("span",tr,"#"+vue.toDisplayString(n.modelValue.replyFloor),1),nr]),i.expandWrong?(vue.openBlock(),vue.createElementBlock("div",ir,[vue.createTextVNode(" 这条回复似乎有点问题，指定的楼层号与@的人对应不上 "),sr,vue.createTextVNode(" 原因可能有下面几种： "),or,vue.createTextVNode(" 一、屏蔽用户导致楼层塌陷：你屏蔽了A，自A以后的回复的楼层号都会减1 "),lr,vue.createTextVNode(" 二、忽略回复导致楼层塌陷：原理同上 "),rr,vue.createTextVNode(" 三、层主回复时指定错了楼层号（同一，层主屏蔽了别人，导致楼层塌陷） "),ar,vue.createTextVNode(" 四、脚本解析错误，请在 "),cr,vue.createTextVNode("反馈 ")])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),s.config.commentDisplayType===s.CommentDisplayType.FloorInFloorNoCallUser&&n.type!=="top"?(vue.openBlock(),vue.createBlock(c,{key:1,class:"reply_content",html:n.modelValue.hideCallUserReplyContent},null,8,["html"])):(vue.openBlock(),vue.createBlock(c,{key:2,class:"reply_content",html:n.modelValue.reply_content},null,8,["html"])),i.edit?(vue.openBlock(),vue.createBlock(p,{key:3,onClose:t[6]||(t[6]=g=>i.edit=!1),replyInfo:i.replyInfo,replyUser:n.modelValue.username,replyFloor:n.modelValue.floor},null,8,["replyInfo","replyUser","replyFloor"])):vue.createCommentVNode("",!0),n.type==="top"&&n.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",{key:4,class:"reply-count",onClick:t[7]||(t[7]=g=>i.expandTopReply=!i.expandTopReply)},[dr,vue.createElementVNode("span",null," 共有"+vue.toDisplayString(n.modelValue.replyCount)+" 条回复 ",1),vue.createVNode(d,{icon:"ep:arrow-down-bold"})])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",ur,[n.type==="top"?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[i.expandTopReply&&n.modelValue.replyCount?(vue.openBlock(),vue.createElementBlock("div",pr,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.modelValue.children,(g,y)=>(vue.openBlock(),vue.createBlock(r,{level:1,modelValue:n.modelValue.children[y],"onUpdate:modelValue":_=>n.modelValue.children[y]=_,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])):vue.createCommentVNode("",!0)],64)):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(n.modelValue.children,(g,y)=>(vue.openBlock(),vue.createBlock(u,{modelValue:n.modelValue.children[y],"onUpdate:modelValue":_=>n.modelValue.children[y]=_,key:y},null,8,["modelValue","onUpdate:modelValue"]))),128))])])]),i.cssStyle?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"more ago",onClick:t[8]||(t[8]=g=>i.expand=!i.expand)}," 由于嵌套回复层级太深，自动将以上回复移至可见范围 ")):vue.createCommentVNode("",!0)],4)):vue.createCommentVNode("",!0)],10,Kl)}const fr=K(Jl,[["render",hr],["__scopeId","data-v-84714fe5"]]);const mr={name:"Toolbar",components:{Icon:te,BaseLoading:Ze},inject:["isLogin","post","pageType"],data(){return {timer:null,loading:!1,loading2:!1,loading3:!1}},methods:{checkIsLogin(e=""){return this.isLogin?(this.$emit(e),!0):(v.emit(b.SHOW_MSG,{type:"warning",text:"请先登录！"}),!1)},tweet(){var n;let e=((n=window.user)==null?void 0:n.username)??"",t=`https://twitter.com/intent/tweet?url=${location.origin}/t/${this.post.id}?r=${e}&related=v2ex&text=${this.post.title}`;window.open(t,"_blank","width=550,height=370");},async report(){if(!this.checkIsLogin()||this.loading3)return;let e=this.post.isReport;if(e){v.emit(b.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"});return}let t=`${location.origin}/report/topic/${this.post.id}?once=${this.post.once}`;this.loading3=!0;let n=await fetch(t);if(this.loading3=!1,n.redirected){let o=await n.text();if(o.search("你已对本主题进行了报告")){v.emit(b.SHOW_MSG,{type:"success",text:"你已对本主题进行了报告"}),v.emit(b.REFRESH_ONCE,o),v.emit(b.MERGE,{isReport:!e});return}}v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"error",text:"操作失败，请重试"});},async toggleIgnore(){if(!this.checkIsLogin())return;let e=`${window.baseUrl}/${this.post.isIgnore?"unignore":"ignore"}/topic/${this.post.id}?once=${this.post.once}`;this.pageType===W.Post?(this.loading2=!0,(await window.win().fetch(e)).redirected?(this.post.isIgnore||(window.win().location=window.baseUrl),v.emit(b.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),v.emit(b.MERGE,{isIgnore:!this.post.isIgnore})):v.emit(b.SHOW_MSG,{type:"warning",text:"忽略失败"}),this.loading2=!1):(this.post.isIgnore?this.loading2=!0:v.emit(b.IGNORE),(await window.win().fetch(e)).redirected?(this.post.isIgnore&&v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"success",text:this.post.isIgnore?"取消成功":"忽略成功"}),v.emit(b.MERGE,{isIgnore:!this.post.isIgnore})):v.emit(b.SHOW_MSG,{type:"warning",text:"忽略成功,仅本次有效（接口调用失败！）"}),this.loading2=!1);},async toggleFavorite(){if(!this.checkIsLogin()||this.loading)return;let e=this.post.isFavorite;!e&&config.collectBrowserNotice&&v.emit(b.SHOW_MSG,{type:"success",text:"别忘记按Command/Cmd/CTRL + D添加到书签哦"});let t=`${location.origin}/${e?"unfavorite":"favorite"}/topic/${this.post.id}?once=${this.post.once}`;this.loading=!0;let n=await fetch(t);if(this.loading=!1,n.redirected){let o=await n.text();if(o.search(e?"加入收藏":"取消收藏")){v.emit(b.SHOW_MSG,{type:"success",text:e?"取消成功":"收藏成功"}),v.emit(b.MERGE,{collectCount:e?this.post.collectCount-1:this.post.collectCount+1}),v.emit(b.REFRESH_ONCE,o),v.emit(b.MERGE,{isFavorite:!e});return}}v.emit(b.REFRESH_ONCE),v.emit(b.SHOW_MSG,{type:"error",text:"操作失败"});}}},fn=e=>(vue.pushScopeId("data-v-260c1ef3"),e=e(),vue.popScopeId(),e),gr={class:"toolbar"},yr=fn(()=>vue.createElementVNode("span",null,"回复",-1)),wr={key:0,class:"tool no-hover"},_r=fn(()=>vue.createElementVNode("span",null,"Tweet",-1));function vr(e,t,n,o,i,s){const a=vue.resolveComponent("Icon"),c=vue.resolveComponent("BaseLoading");return vue.openBlock(),vue.createElementBlock("div",gr,[vue.renderSlot(e.$slots,"default",{},void 0,!0),vue.createElementVNode("div",{class:"tool",onClick:t[0]||(t[0]=vue.withModifiers(p=>s.checkIsLogin("reply"),["stop"]))},[vue.createVNode(a,{icon:"mynaui:message"}),yr]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:i.loading}]),onClick:t[1]||(t[1]=vue.withModifiers((...p)=>s.toggleFavorite&&s.toggleFavorite(...p),["stop"]))},[i.loading?(vue.openBlock(),vue.createBlock(c,{key:0,size:"small"})):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[s.post.isFavorite?(vue.openBlock(),vue.createBlock(a,{key:0,color:"rgb(224,42,42)",icon:"iconoir:star-solid"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"iconoir:star"}))],64)),vue.createElementVNode("span",null,vue.toDisplayString(s.post.isFavorite?"取消":"")+"收藏",1)],2),s.post.collectCount!==0?(vue.openBlock(),vue.createElementBlock("div",wr,[vue.createElementVNode("span",null,vue.toDisplayString(s.post.collectCount+"人收藏"),1)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"tool",onClick:t[2]||(t[2]=vue.withModifiers((...p)=>s.tweet&&s.tweet(...p),["stop"]))},[vue.createVNode(a,{icon:"uil:share"}),_r]),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:i.loading2}]),onClick:t[3]||(t[3]=vue.withModifiers((...p)=>s.toggleIgnore&&s.toggleIgnore(...p),["stop"]))},[i.loading2?(vue.openBlock(),vue.createBlock(c,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,icon:"fluent:eye-hide-24-regular"})),vue.createElementVNode("span",null,vue.toDisplayString(s.post.isIgnore?"取消忽略":"忽略"),1)],2),vue.createElementVNode("div",{class:vue.normalizeClass(["tool",{disabled:i.loading3}]),onClick:t[4]||(t[4]=vue.withModifiers((...p)=>s.report&&s.report(...p),["stop"]))},[i.loading3?(vue.openBlock(),vue.createBlock(c,{key:0,size:"small"})):(vue.openBlock(),vue.createBlock(a,{key:1,class:"black",icon:"solar:danger-triangle-outline"})),vue.createElementVNode("span",null,vue.toDisplayString(s.post.isReport?"你已对本主题进行了报告":"报告"),1)],2)])}const br=K(mr,[["render",vr],["__scopeId","data-v-260c1ef3"]]);const St=e=>(vue.pushScopeId("data-v-4a063111"),e=e(),vue.popScopeId(),e),kr=["href"],Cr=["src"],xr={class:"texts"},Tr={key:0,class:"point"},Sr={class:"link-num"},Ir={class:"my-tag"},Mr=St(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Lr={key:2,class:"ago"},Rr={key:3,class:"mod"},Or={key:4,class:"owner"},Nr=["href"],Pr={key:5,class:"owner"},Er={key:6,class:"mod"},Vr={key:7,class:"ago"},Ar={class:"my-tag"},Dr=St(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),Ur={key:9,class:"point"},$r={class:"link-num"},Fr=["href"],Hr=["src"],Br={class:"Author-right"},jr={class:"floor"},Gr=St(()=>vue.createElementVNode("span",null,"跳转",-1)),Wr=[Gr],qr={__name:"SingleComment",props:{comment:{reply_content:""},isRight:{type:Boolean,default(){return !1}}},setup(e){const t=vue.inject("config"),n=vue.inject("isLogin"),o=vue.inject("tags"),i=e,s=vue.computed(()=>o[i.comment.username]??[]);function a(){v.emit(b.JUMP,i.comment.floor);}return (c,p)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["comment",{isSimple:vue.unref(t).viewType==="simple"}]),ref:"comment"},[e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("a",{key:0,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,Cr)],8,kr)),vue.createElementVNode("div",{class:vue.normalizeClass(["comment-body",{isRight:e.isRight}])},[vue.createElementVNode("div",xr,[e.comment.thankCount&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Tr,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(te),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(te),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",Sr,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0),vue.unref(n)&&vue.unref(t).openTag&&e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(s.value,d=>(vue.openBlock(),vue.createElementBlock("span",Ir,[Mr,vue.createElementVNode("span",null,vue.toDisplayString(d),1)]))),256)):vue.createCommentVNode("",!0),e.isRight?(vue.openBlock(),vue.createElementBlock("span",Lr,vue.toDisplayString(e.comment.date),1)):vue.createCommentVNode("",!0),e.comment.isMod&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Rr,"MOD")):vue.createCommentVNode("",!0),e.comment.isOp&&e.isRight?(vue.openBlock(),vue.createElementBlock("div",Or,"OP")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{href:`/member/${e.comment.username}`,class:"username"},vue.toDisplayString(e.comment.username),9,Nr),e.comment.isOp&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Pr,"OP")):vue.createCommentVNode("",!0),e.comment.isMod&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Er,"MOD")):vue.createCommentVNode("",!0),e.isRight?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("span",Vr,vue.toDisplayString(e.comment.date),1)),vue.unref(n)&&vue.unref(t).openTag&&!e.isRight?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:8},vue.renderList(s.value,d=>(vue.openBlock(),vue.createElementBlock("span",Ar,[Dr,vue.createElementVNode("span",null,vue.toDisplayString(d),1)]))),256)):vue.createCommentVNode("",!0),e.comment.thankCount&&!e.isRight?(vue.openBlock(),vue.createElementBlock("div",Ur,[e.comment.isThanked?(vue.openBlock(),vue.createBlock(vue.unref(te),{key:0,color:"rgb(224,42,42)",icon:"icon-park-solid:like"})):(vue.openBlock(),vue.createBlock(vue.unref(te),{key:1,color:e.comment.thankCount?"rgb(224,42,42)":null,icon:"icon-park-outline:like"},null,8,["color"])),vue.createElementVNode("div",$r,vue.toDisplayString(e.comment.thankCount),1)])):vue.createCommentVNode("",!0)]),vue.createVNode(tt,{class:"reply_content",html:e.comment.reply_content},null,8,["html"])],2),e.isRight?(vue.openBlock(),vue.createElementBlock("a",{key:1,class:"avatar",href:`/member/${e.comment.username}`},[vue.createElementVNode("img",{src:e.comment.avatar,alt:""},null,8,Hr)],8,Fr)):vue.createCommentVNode("",!0),vue.createElementVNode("div",Br,[vue.createElementVNode("div",jr,vue.toDisplayString(e.comment.floor),1),vue.createElementVNode("div",{class:"tool jump",onClick:vue.withModifiers(a,["stop"])},Wr)])],2))}},zr=K(qr,[["__scopeId","data-v-4a063111"]]);function q(e,t,n){const o=/^-?\d+.?\d*(px|pt|em|rem|vw|vh|%|rpx|ms)$/i;if(n===void 0){let i=null;return "getComputedStyle"in window?i=window.getComputedStyle(e,null)[t]:i=e.currentStyle[t],o.test(i)?parseFloat(i):i}else ["top","left","bottom","right","width","height","font-size","margin","padding"].includes(t)&&(o.test(n)||String(n).includes("calc")||(n+="px")),t==="transform"?e.style.webkitTransform=e.style.MsTransform=e.style.msTransform=e.style.MozTransform=e.style.OTransform=e.style.transform=n:e.style[t]=n;}function Jr(e,t,n,o){const i=e/t,s=n/o;let a,c;return i>=s?e>n?(a=n,c=n/e*t):(a=e,c=t):t>o?(a=o/t*e,c=o):(a=e,c=t),c===0?(c=o,a=c*1.3):(c<24?(c=50,a=c*i):c<100?(c=300,a=c*i):(c=o,a=c*i),a>n&&(a=n,c=a/i)),{width:a,height:c}}const Kr={name:"detail",components:{BaseSelect:xt,BaseButton:ye,SingleComment:zr,PopConfirm:$e,Comment:fr,PostEditor:Tt,Point:et,Toolbar:br,BaseHtmlRender:tt,Tooltip:Ue,BaseLoading:Ze,Icon:te},inject:["allReplyUsers","post","tags","isLogin","config","pageType","isNight"],provide(){return {postDetailWidth:vue.computed(()=>this.postDetailWidth)}},props:{modelValue:{type:Boolean,default(){return !1}},loading:{type:Boolean,default(){return !1}},refreshLoading:{type:Boolean,default(){return !1}},displayType:P.FloorInFloorNoCallUser},data(){return {isSticky:!1,selectCallIndex:0,postDetailWidth:0,showCallList:!1,showRelationReply:!1,replyText:"",callStyle:{top:0,left:0},targetUser:{left:[],right:"",rightFloor:-1},currentFloor:"",showOpTag:!1,rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16,preview:{rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16}}},computed:{canAppend(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()>1e3*60*30}return !1},canEditMove(){if(this.isMy){let e=new Date(this.post.createDate);return Date.now()-e.valueOf()<1e3*60*10}return !1},isMy(){return this.post.member.username===window.user.username},myTags(){return this.tags[this.post.member.username]??[]},CommentDisplayType(){return P},isPost(){return this.pageType===W.Post},filterCallList(){if(this.showCallList){let e=["管理员","所有人"].concat(this.allReplyUsers);return this.replyText?e.filter(t=>t.search(this.replyText)>-1):e}return []},replyList(){return [P.FloorInFloor,P.FloorInFloorNoCallUser].includes(this.displayType)?this.post.nestedReplies:this.displayType===P.Like?window.clone(this.post.nestedReplies).sort((e,t)=>t.thankCount-e.thankCount):this.displayType===P.New?window.clone(this.post.replyList).reverse():this.displayType===P.V2exOrigin?this.post.replyList:this.displayType===P.FloorInFloorNested?this.post.nestedRedundReplies:this.displayType===P.OnlyOp?this.post.replyList.filter(e=>{var t;return e.username===((t=this.post.member)==null?void 0:t.username)}):[]},relationReply(){return this.targetUser.left.length&&this.targetUser.right?this.post.replyList.filter(e=>{if(this.targetUser.left.includes(e.username))if(e.floor>this.targetUser.rightFloor){if(e.replyUsers.includes(this.targetUser.right))return !0}else return !0;if(e.username===this.targetUser.right){for(let t=0;t<this.targetUser.left.length;t++)if(e.replyUsers.includes(this.targetUser.left[t]))return !0}}):[]}},watch:{"post.id"(e,t){this.$refs["post-editor"]&&(this.$refs["post-editor"].content="",vue.nextTick(()=>{var n,o;(o=(n=this.$refs)==null?void 0:n.detail)==null||o.scrollTo({top:0});}));},"post.headerTemplate"(e,t){document.querySelector(".main-wrapper .post-wrapper .html-wrapper .header")&&(this.showOpTag=!0);},modelValue:{handler(e){this.isPost||(e?(document.body.style.overflow="hidden",window.history.state||window.history.pushState({},0,this.post.href),this.currentFloor="",vue.nextTick(()=>{var t,n;window.document.title=this.post.title??"V2EX",(n=(t=this.$refs)==null?void 0:t.main)==null||n.focus();})):(document.body.style.overflow="unset",window.document.title="V2EX",this.isSticky=!1,this.showRelationReply=!1,window.history.state&&window.history.back()));}}},mounted(){vue.nextTick(()=>{setTimeout(()=>{var e;this.postDetailWidth=((e=this.$refs.mainWrapper)==null?void 0:e.getBoundingClientRect().width)||0;},500);}),this.isLogin&&(new IntersectionObserver(([t])=>t.target.toggleAttribute("stuck",t.intersectionRatio<1),{threshold:[1]}).observe(this.$refs.replyBox),window.addEventListener("keydown",this.onKeyDown)),v.on(b.SHOW_CALL,e=>{e.show?(this.showCallList=!0,this.replyText=e.text,this.isPost?this.callStyle.top=e.top+$(window.win()).scrollTop()+-40+"px":this.callStyle.top=e.top+$(".post-detail").scrollTop()+15+"px",this.callStyle.left=e.left-$(".main")[0].getBoundingClientRect().left+10+"px",this.selectCallIndex>=this.filterCallList.length&&(this.selectCallIndex=0)):(this.replyText="",this.showCallList=!1,this.selectCallIndex=0);}),v.on(b.RELATION_REPLY,e=>{this.targetUser=e,this.showRelationReply=!0;}),v.on(b.JUMP,this.jump);},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),v.off(b.SHOW_CALL);},methods:{addTag(){v.emit(b.ADD_TAG,this.post.member.username);},removeTag(e){v.emit(b.REMOVE_TAG,{username:this.post.member.username,tag:e});},closePreviewModal(){let e=document.querySelector(".preview-modal"),t=document.querySelector(".shadow"),n=this.preview.rect;q(t,"transition","all 0.3s"),q(t,"width",n.width),q(t,"height",n.height),q(t,"transform",`translate3d(${n.x}px, ${n.y}px, 0) scale(1)`);let o=document.querySelector(".preview-modal .mask");q(o,"opacity",0),setTimeout(()=>{q(t,"transition","all 0s"),t.remove(),q(e,"top","-1000vh"),q(document.body,"overflow","auto");},300);},stop(e){if(e.stopPropagation(),e.stopImmediatePropagation(),e.target.tagName==="IMG"){/cdn\.v2ex\.com.*avatar/i.test(e.target.src),this.preview={rect:{},result:{},x:0,y:0,scale:1,minScale:.2,maxScale:16},e.preventDefault();let t=e.target.getBoundingClientRect(),n=document.querySelector(".preview-modal");q(n,"top","0");let o=e.target.cloneNode();o.classList.add("shadow"),n.append(o),q(o,"transition","all 0s"),q(o,"width",t.width),q(o,"height",t.height),q(o,"transform",`translate3d(${t.x}px, ${t.y}px, 0) scale(1)`);let i=".3",s=t.width/window.innerWidth,a=t.height/window.innerHeight;t.sw=s,t.sh=a,this.preview.rect=t,this.preview.result=Jr(o.naturalWidth,o.naturalHeight,window.innerWidth*.95,window.innerHeight*.9),this.preview.x=(window.innerWidth-this.preview.result.width)*.5,this.preview.y=(window.innerHeight-this.preview.result.height)*.5;let c=!1,p=!1,d={x:0,y:0},r={x:0,y:0};o.addEventListener("pointerdown",function(g){c=!0,p=!1,o.setPointerCapture(g.pointerId),d={x:g.clientX,y:g.clientY};}),o.addEventListener("pointermove",g=>{if(c){p=!0;const y={x:g.clientX,y:g.clientY};r.x=y.x-d.x,r.y=y.y-d.y,d={x:y.x,y:y.y},this.preview.x+=r.x,this.preview.y+=r.y,q(o,"transition","all 0.1s"),q(o,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`);}g.preventDefault();}),o.addEventListener("pointerup",()=>{c&&(c=!1,p||this.closePreviewModal());}),o.addEventListener("pointercancel",function(g){c&&(c=!1);});let u=document.querySelector(".preview-modal .mask");return q(u,"transition","all 0s"),q(u,"opacity",0),setTimeout(()=>{q(o,"transition",`all ${i}s`),q(u,"transition",`all ${i}s`),q(u,"opacity",1),q(o,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`),q(o,"width",this.preview.result.width),q(o,"height",this.preview.result.height);},0),setTimeout(()=>{q(document.body,"overflow","hidden");},300),!1}},wheel(e){let t=e.deltaY<0?.1:-.1,n=1+t,o=this.preview.scale*n;if(o>this.preview.maxScale?(n=this.preview.maxScale/this.preview.scale,this.preview.scale=this.preview.maxScale):o<this.preview.minScale?(n=this.preview.minScale/this.preview.scale,this.preview.scale=this.preview.minScale):this.preview.scale=o,e.target.tagName==="IMG"){const s={x:t*this.preview.result.width/2,y:t*this.preview.result.height/2};this.preview.x-=t*(e.clientX-this.preview.x)-s.x,this.preview.y-=t*(e.clientY-this.preview.y)-s.y;}let i=document.querySelector(".shadow");q(i,"transition","all 0.2s"),q(i,"transform",`translate3d(${this.preview.x}px, ${this.preview.y}px, 0) scale(${this.preview.scale})`),e.preventDefault();},jump(e){let t=this.replyList[this.replyList.length-1];if(e==="")e=t.floor;else {try{e=Number(e);}catch{e=t.floor;}e===0&&(e=1),e>t.floor&&(e=t.floor);}if(!this.post.replyList.length){v.emit(b.SHOW_MSG,{type:"warning",text:"没有回复可跳转！"});return}if(e>this.post.replyList.length){v.emit(b.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}let n=$(`.c_${e}`);if(!n.length){v.emit(b.SHOW_MSG,{type:"error",text:"没有找到对应回复！"});return}n[0].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),n.addClass("ding"),this.currentFloor=e+1,setTimeout(()=>{n.removeClass("ding");},2e3);},collapseTopReplyList(){$(this.$refs.topReply).slideToggle("fast");},goBottom(){this.isSticky=!1,setTimeout(()=>{if(this.isPost){let e=$("body , html"),t=e.prop("scrollHeight");e.animate({scrollTop:t-850},300);}else this.$refs.detail.scrollTo({top:this.$refs.detail.scrollHeight,behavior:"smooth"});});},close(e){this.isPost||(e==="space"?this.config.closePostDetailBySpace&&this.$emit("update:modelValue",!1):this.$emit("update:modelValue",!1));},setCall(e){v.emit(b.SET_CALL,e),this.showCallList=!1;},onKeyDown(e){if(!this.modelValue||!this.showCallList)return;let t=this.filterCallList.slice(0,10).length;e.keyCode===13&&(this.setCall(this.filterCallList[this.selectCallIndex]),e.preventDefault()),e.keyCode===38&&(this.selectCallIndex--,this.selectCallIndex<0&&(this.selectCallIndex=t-1),e.preventDefault()),e.keyCode===40&&(this.selectCallIndex++,this.selectCallIndex>t-1&&(this.selectCallIndex=0),e.preventDefault());},changeOption(e){this.$emit("update:displayType",e);},addThank(){v.emit(b.CHANGE_POST_THANK,{id:this.post.id,type:"add"});},recallThank(){v.emit(b.CHANGE_POST_THANK,{id:this.post.id,type:"recall"});},scrollTop(){this.isPost?$("body , html").animate({scrollTop:0},300):this.$refs.detail.scrollTo({top:0,behavior:"smooth"});}}},pe=e=>(vue.pushScopeId("data-v-c761cdb3"),e=e(),vue.popScopeId(),e),Xr={class:"my-box post-wrapper"},Yr={class:"header"},Qr={class:"fr"},Zr=["href"],ea=["src","alt"],ta=pe(()=>vue.createElementVNode("a",{href:"/"},"V2EX",-1)),na=pe(()=>vue.createElementVNode("span",{class:"chevron"},"  ›  ",-1)),ia=["href"],sa=pe(()=>vue.createElementVNode("div",{class:"sep10"},null,-1)),oa=["id"],la=["onclick"],ra=pe(()=>vue.createElementVNode("li",{class:"fa fa-chevron-up"},null,-1)),aa=["onclick"],ca=pe(()=>vue.createElementVNode("li",{class:"fa fa-chevron-down"},null,-1)),da=[ca],ua={class:"gray"},pa=["href"],ha=["title"],fa=["href"],ma=pe(()=>vue.createElementVNode("li",{class:"fa fa-info-circle"},null,-1)),ga=[ma],ya=["href"],wa=["href"],_a=["href"],va={class:"my-tag"},ba=pe(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),ka=["onClick"],Ca={key:0,class:"my-box"},xa=pe(()=>vue.createElementVNode("span",null,"高赞回复",-1)),Ta={class:"top-reply"},Sa={class:"tool"},Ia={ref:"topReply"},Ma={class:"my-box comment-wrapper"},La={key:0,class:"my-cell flex"},Ra={key:0},Oa=pe(()=>vue.createElementVNode("strong",{class:"snow"},"•",-1)),Na=["innerHTML"],Pa={key:0,class:"loading-wrapper"},Ea={key:1,class:"comments"},Va={key:1,id:"no-comments-yet"},Aa={class:"my-cell flex"},Da=pe(()=>vue.createElementVNode("span",null,"添加一条新回复",-1)),Ua={class:"notice-right gray"},$a={class:"p1"},Fa=pe(()=>vue.createElementVNode("span",{class:"gray"},"上下文",-1)),Ha={class:"top-reply"},Ba=["onClick"];function ja(e,t,n,o,i,s){const a=vue.resolveComponent("BaseHtmlRender"),c=vue.resolveComponent("Point"),p=vue.resolveComponent("Toolbar"),d=vue.resolveComponent("Icon"),r=vue.resolveComponent("Tooltip"),u=vue.resolveComponent("Comment"),g=vue.resolveComponent("BaseSelect"),y=vue.resolveComponent("BaseLoading"),_=vue.resolveComponent("PostEditor"),m=vue.resolveComponent("SingleComment");return vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["post-detail",[s.isNight?"isNight":"",s.pageType]]),ref:"detail",onKeydown:t[21]||(t[21]=vue.withKeys(f=>s.close(),["esc"])),onClick:t[22]||(t[22]=f=>s.close("space"))},[vue.createElementVNode("div",{ref:"main",class:"main",tabindex:"1",onClick:t[18]||(t[18]=(...f)=>s.stop&&s.stop(...f))},[vue.createElementVNode("div",{class:"main-wrapper",ref:"mainWrapper",style:vue.normalizeStyle({width:s.config.postWidth+"!important"})},[vue.createElementVNode("div",Xr,[vue.createElementVNode("div",Yr,[vue.createElementVNode("div",Qr,[vue.createElementVNode("a",{href:`/member/${s.post.member.username}`,style:{width:"73px",height:"73px",display:"inline-block"}},[s.post.member.avatar_large?(vue.openBlock(),vue.createElementBlock("img",{key:0,src:s.post.member.avatar_large,class:"avatar",style:{width:"73px",height:"73px"},border:"0",align:"default",alt:s.post.member.username},null,8,ea)):vue.createCommentVNode("",!0)],8,Zr)]),ta,na,vue.createElementVNode("a",{href:s.post.node.url},vue.toDisplayString(s.post.node.title),9,ia),sa,vue.createElementVNode("h1",null,vue.toDisplayString(s.post.title),1),vue.createElementVNode("div",{id:`topic_${s.post.id}_votes`,class:"votes"},[vue.createElementVNode("a",{href:"javascript:",onclick:`upVoteTopic(${s.post.id});`,class:"vote"},[ra,vue.createTextVNode("   ")],8,la),vue.createTextVNode("   "),vue.createElementVNode("a",{href:"javascript:",onclick:`downVoteTopic(${s.post.id});`,class:"vote"},da,8,aa)],8,oa),vue.createTextVNode("   "),vue.createElementVNode("small",ua,[vue.createElementVNode("a",{href:`/member/${s.post.member.username}`},vue.toDisplayString(s.post.member.username),9,pa),vue.createTextVNode(" · "),s.post.member.createDate?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("span",{class:vue.normalizeClass(s.post.member.isNew&&"danger")},vue.toDisplayString(s.post.member.createDate),3),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),s.post.createDateAgo?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("span",{title:s.post.createDate},vue.toDisplayString(s.post.createDateAgo),9,ha),vue.createTextVNode(" · ")],64)):vue.createCommentVNode("",!0),vue.createTextVNode(" "+vue.toDisplayString(s.post.clickCount)+" 次点击 ",1),s.isMy?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createTextVNode("   "),vue.createElementVNode("a",{href:`/t/${s.post.id}/info`},ga,8,fa),vue.createTextVNode("   "),s.canAppend?(vue.openBlock(),vue.createElementBlock("a",{key:0,href:`/append/topic/${s.post.id}`,class:"op"},"APPEND",8,ya)):vue.createCommentVNode("",!0),s.canEditMove?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("a",{href:`/move/topic/${s.post.id}`,class:"op"},"MOVE",8,wa),vue.createTextVNode("  "),vue.createElementVNode("a",{href:`/edit/topic/${s.post.id}`,class:"op"},"EDIT",8,_a)],64)):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)]),s.isLogin&&s.config.openTag?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.myTags,f=>(vue.openBlock(),vue.createElementBlock("span",va,[ba,vue.createElementVNode("span",null,vue.toDisplayString(f),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:vue.withModifiers(C=>s.removeTag(f),["stop"])},null,8,ka)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[0]||(t[0]=vue.withModifiers((...f)=>s.addTag&&s.addTag(...f),["stop"])),title:"添加标签"},"+")],64)):vue.createCommentVNode("",!0)]),s.post.headerTemplate?(vue.openBlock(),vue.createBlock(a,{key:0,html:s.post.headerTemplate},null,8,["html"])):(vue.openBlock(),vue.createBlock(a,{key:1,html:s.post.jsonContent},null,8,["html"])),vue.createVNode(p,{onReply:t[1]||(t[1]=f=>i.isSticky=!i.isSticky)},{default:vue.withCtx(()=>[vue.createVNode(c,{onAddThank:s.addThank,onRecallThank:s.recallThank,item:{isThanked:s.post.isThanked,thankCount:s.post.thankCount,username:s.post.username},"api-url":"topic/"+s.post.id},null,8,["onAddThank","onRecallThank","item","api-url"])]),_:1})]),s.post.topReplyList.length&&s.config.showTopReply?(vue.openBlock(),vue.createElementBlock("div",Ca,[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[2]||(t[2]=vue.withModifiers((...f)=>s.collapseTopReplyList&&s.collapseTopReplyList(...f),["stop"]))},[xa,vue.createElementVNode("div",Ta,[vue.createVNode(r,{title:"收起高赞回复"},{default:vue.withCtx(()=>[vue.createElementVNode("div",Sa,[vue.createVNode(d,{icon:"gravity-ui:chevrons-collapse-vertical"})])]),_:1})])]),vue.createElementVNode("div",Ia,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.post.topReplyList,(f,C)=>(vue.openBlock(),vue.createBlock(u,{key:f.floor,type:"top",modelValue:s.post.topReplyList[C],"onUpdate:modelValue":k=>s.post.topReplyList[C]=k},null,8,["modelValue","onUpdate:modelValue"]))),128))],512)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",Ma,[s.post.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock("div",La,[vue.createElementVNode("div",null,[vue.createTextVNode(vue.toDisplayString(s.post.replyCount)+" 条回复 ",1),s.post.lastReplyDate?(vue.openBlock(),vue.createElementBlock("span",Ra,[vue.createTextVNode("  "),Oa,vue.createTextVNode("  "+vue.toDisplayString(s.post.lastReplyDate),1)])):vue.createCommentVNode("",!0)]),s.config.showToolbar?(vue.openBlock(),vue.createBlock(g,{key:0,"display-type":n.displayType,"onUpdate:displayType":t[3]||(t[3]=f=>e.$emit("update:displayType",f))},null,8,["display-type"])):(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"fr",innerHTML:s.post.fr},null,8,Na))])):vue.createCommentVNode("",!0),s.replyList.length||n.loading?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[n.loading?(vue.openBlock(),vue.createElementBlock("div",Pa,[vue.createVNode(y,{size:"large"})])):(vue.openBlock(),vue.createElementBlock("div",Ea,[n.modelValue?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(s.replyList,(f,C)=>(vue.openBlock(),vue.createBlock(u,{key:f.floor,modelValue:s.replyList[C],"onUpdate:modelValue":k=>s.replyList[C]=k},null,8,["modelValue","onUpdate:modelValue"]))),128)):vue.createCommentVNode("",!0)]))],64)):vue.createCommentVNode("",!0)]),s.replyList.length||n.loading?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",Va,"目前尚无回复")),s.isLogin?(vue.openBlock(),vue.createElementBlock("div",{key:2,class:vue.normalizeClass(["my-box",{sticky:i.isSticky}]),ref:"replyBox"},[vue.createElementVNode("div",Aa,[Da,vue.createElementVNode("div",Ua,[i.isSticky?(vue.openBlock(),vue.createElementBlock("a",{key:0,style:{"margin-right":"2rem"},onClick:t[4]||(t[4]=vue.withModifiers(f=>i.isSticky=!1,["stop"]))},"取消回复框停靠")):vue.createCommentVNode("",!0),vue.createElementVNode("a",{onClick:t[5]||(t[5]=vue.withModifiers((...f)=>s.scrollTop&&s.scrollTop(...f),["stop"]))},"回到顶部")])]),vue.createElementVNode("div",$a,[vue.createVNode(_,{onClose:s.goBottom,ref:"post-editor",useType:"reply-post",onClick:t[6]||(t[6]=vue.withModifiers(f=>i.isSticky=!0,["stop"]))},null,8,["onClose"])])],2)):vue.createCommentVNode("",!0)],4),i.showRelationReply?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"relationReply",onClick:t[10]||(t[10]=vue.withModifiers(f=>s.close("space"),["stop"]))},[vue.createElementVNode("div",{class:"my-cell flex",onClick:t[8]||(t[8]=vue.withModifiers((...f)=>s.stop&&s.stop(...f),["stop"]))},[Fa,vue.createElementVNode("div",Ha,[vue.createVNode(d,{icon:"ic:round-close",onClick:t[7]||(t[7]=vue.withModifiers(f=>i.showRelationReply=!1,["stop"]))})])]),vue.createElementVNode("div",{class:"comments",onClick:t[9]||(t[9]=vue.withModifiers((...f)=>s.stop&&s.stop(...f),["stop"]))},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.relationReply,(f,C)=>(vue.openBlock(),vue.createBlock(m,{"is-right":f.username===i.targetUser.right,key:f.floor,comment:f},null,8,["is-right","comment"]))),128))])])):vue.createCommentVNode("",!0),i.showCallList&&s.filterCallList.length?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"call-list",style:vue.normalizeStyle(i.callStyle)},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.filterCallList,(f,C)=>(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["call-item",{select:C===i.selectCallIndex}]),onClick:vue.withModifiers(k=>s.setCall(f),["stop"])},[vue.createElementVNode("a",null,vue.toDisplayString(f),1)],10,Ba))),256))],4)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"close-btn",onClick:t[11]||(t[11]=vue.withModifiers(f=>s.close("btn"),["stop"]))},[vue.createVNode(d,{icon:"fontisto:close-a"})]),vue.createElementVNode("div",{class:"scroll-top gray",onClick:t[12]||(t[12]=vue.withModifiers((...f)=>s.scrollTop&&s.scrollTop(...f),["stop"]))},[vue.createVNode(d,{icon:"lucide:move-up"})]),vue.createElementVNode("div",{class:"refresh gray",onClick:t[13]||(t[13]=vue.withModifiers(f=>e.$emit("refresh"),["stop"]))},[n.refreshLoading?(vue.openBlock(),vue.createBlock(y,{key:0})):(vue.openBlock(),vue.createBlock(d,{key:1,icon:"material-symbols:refresh"}))]),vue.createElementVNode("div",{class:"scroll-to gray",onClick:t[17]||(t[17]=vue.withModifiers(f=>s.jump(i.currentFloor),["stop"]))},[vue.createVNode(d,{icon:"lucide:move-down"}),vue.withDirectives(vue.createElementVNode("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=f=>i.currentFloor=f),onClick:t[15]||(t[15]=vue.withModifiers((...f)=>s.stop&&s.stop(...f),["stop"])),onKeydown:t[16]||(t[16]=vue.withKeys(f=>s.jump(i.currentFloor),["enter"]))},null,544),[[vue.vModelText,i.currentFloor]])])],512),(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createElementVNode("div",{class:"preview-modal",onWheel:t[20]||(t[20]=(...f)=>s.wheel&&s.wheel(...f))},[vue.createElementVNode("div",{class:"mask",onClick:t[19]||(t[19]=(...f)=>s.closePreviewModal&&s.closePreviewModal(...f))}),vue.createVNode(d,{class:"close",icon:"fontisto:close-a",onClick:s.closePreviewModal},null,8,["onClick"])],32)]))],34)),[[vue.vShow,n.modelValue]])}const Ga=K(Kr,[["render",ja],["__scopeId","data-v-c761cdb3"]]);const Wa={key:1},qa={__name:"Base64Tooltip",setup(e){const t=vue.ref(null),n=vue.ref(!1),o=vue.ref(""),i=vue.ref(""),s=vue.reactive({left:"-100vw",top:"-100vh"});vue.onMounted(()=>{v.on(b.SHOW_TOOLTIP,({text:r,e:u})=>{setTimeout(()=>n.value=!0),o.value=r,i.value="",s.left=u.clientX+"px",s.top=u.clientY+20+"px";}),window.addEventListener("click",r=>{t.value&&!t.value.contains(r.target)&&n.value&&(n.value=!1);},{capture:!0});const d=()=>n.value&&(n.value=!1);$(".post-detail",window.win().doc).on("scroll",d);});function a(){window.win().navigator.clipboard?(window.win().navigator.clipboard.writeText(i.value),v.emit(b.SHOW_MSG,{type:"success",text:"复制成功"})):v.emit(b.SHOW_MSG,{type:"error",text:"复制失败！浏览器不支持！"});}function c(d){let r=window.atob(d),u=r.length,g=new Uint8Array(u);for(let y=0;y<u;y++)g[y]=r.charCodeAt(y);return g.buffer}function p(){try{new Blob([c(o.value)]).text().then(d=>{i.value=d;});}catch{v.emit(b.SHOW_MSG,{type:"error",text:"Base64解码失败！不是标准数据！"});}}return (d,r)=>vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:"base64_tooltip",style:vue.normalizeStyle(s),onClick:p,ref_key:"tooltip",ref:t},[i.value?(vue.openBlock(),vue.createElementBlock("div",Wa,[vue.createElementVNode("span",null,vue.toDisplayString(i.value),1),vue.createVNode(ye,{class:"btn",size:"small",onClick:a},{default:vue.withCtx(()=>[vue.createTextVNode("点击复制")]),_:1})])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Base64解码："+vue.toDisplayString(o.value)+" ",1),vue.createVNode(vue.unref(te),{icon:"system-uicons:translate"})],64))],4)),[[vue.vShow,n.value]])}},za=K(qa,[["__scopeId","data-v-c50fb66c"]]);const Ja={name:"Msg",components:{Icon:te},props:{type:"",text:""},created(){setTimeout(()=>{this.$emit("close");},3e3);}},Ka={class:"right"};function Xa(e,t,n,o,i,s){const a=vue.resolveComponent("Icon");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["msg",n.type])},[vue.createElementVNode("div",{class:"left",onClick:t[0]||(t[0]=c=>e.$emit("close"))},[vue.createVNode(a,{icon:"ic:round-close"})]),vue.createElementVNode("div",Ka,vue.toDisplayString(n.text),1)],2)}const mn=K(Ja,[["render",Xa],["__scopeId","data-v-8bf692ea"]]);const gn=e=>(vue.pushScopeId("data-v-7e92a866"),e=e(),vue.popScopeId(),e),Ya={key:0,class:"tag-modal modal"},Qa={class:"wrapper"},Za=gn(()=>vue.createElementVNode("div",{class:"title"}," 添加标签 ",-1)),ec={class:"option"},tc=gn(()=>vue.createElementVNode("span",null,"用户：",-1)),nc={class:"btns"},ic={__name:"TagModal",props:["tags"],emits:["update:tags"],setup(e,{emit:t}){const n=vue.reactive({show:!1,currentUsername:"",tag:""}),o=e,i=t,s=vue.ref();vue.onMounted(()=>{v.on(b.ADD_TAG,c=>{n.currentUsername=c,n.show=!0,vue.nextTick(()=>{s.value.focus();});});});async function a(){if(!n.tag){v.emit(b.SHOW_MSG,{type:"warning",text:"请输入标签"});return}let c=window.clone(o.tags),p=window.clone(o.tags),d=p[n.currentUsername]??[];if(d.findIndex(g=>g===n.tag)>-1){v.emit(b.SHOW_MSG,{type:"warning",text:"标签已存在！"});return}else d.push(n.tag);p[n.currentUsername]=d,i("update:tags",p),n.tag="",n.show=!1,await window.parse.saveTags(p)||(v.emit(b.SHOW_MSG,{type:"error",text:"标签添加失败！"}),i("update:tags",c));}return (c,p)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[n.show?(vue.openBlock(),vue.createElementBlock("div",Ya,[vue.createElementVNode("div",{class:"mask",onClick:p[0]||(p[0]=vue.withModifiers(d=>n.show=!1,["stop"]))}),vue.createElementVNode("div",Qa,[Za,vue.createElementVNode("div",ec,[tc,vue.createElementVNode("div",null,[vue.createElementVNode("b",null,vue.toDisplayString(n.currentUsername),1)])]),vue.withDirectives(vue.createElementVNode("input",{type:"text",ref_key:"inputRef",ref:s,style:{width:"100%"},"onUpdate:modelValue":p[1]||(p[1]=d=>n.tag=d),onKeydown:vue.withKeys(a,["enter"])},null,544),[[vue.vModelText,n.tag]]),vue.createElementVNode("div",nc,[vue.createVNode(ye,{type:"link",onClick:p[2]||(p[2]=vue.withModifiers(d=>{n.show=!1,n.tag="";},["stop"]))},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1}),vue.createVNode(ye,{onClick:vue.withModifiers(a,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确定")]),_:1})])])])):vue.createCommentVNode("",!0)]),_:1}))}},sc=K(ic,[["__scopeId","data-v-7e92a866"]]);const oc={class:"msgs"},lc={__name:"MsgModal",setup(e){const t=vue.reactive([]);vue.onMounted(()=>{v.on(b.SHOW_MSG,o=>{t.push({...o,id:Date.now()});});});function n(o){let i=t.findIndex(s=>s.id===o);i>-1&&t.splice(i,1);}return (o,i)=>(vue.openBlock(),vue.createElementBlock("div",oc,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t,s=>(vue.openBlock(),vue.createBlock(mn,{key:s.id,type:s.type,text:s.text,onClose:a=>n(s.id)},null,8,["type","text","onClose"]))),128))]))}},rc=K(lc,[["__scopeId","data-v-b73f4332"]]);let ac=".__cf_email__",cc="data-cfemail",qt=document.createElement("div");function zt(e,t){let n=e.substr(t,2);return parseInt(n,16)}function dc(e,t){let n="",o=zt(e,t);for(let i=t+2;i<e.length;i+=2){let s=zt(e,i)^o;n+=String.fromCharCode(s);}try{n=decodeURIComponent(escape(n));}catch(i){}return qt.innerHTML='<a href="'+n.replace(/"/g,"&quot;")+'"></a>',qt.childNodes[0].getAttribute("href")||""}function uc(e){try{e.find(ac).each(function(){try{let n=this,o=n.parentNode,i=n.getAttribute(cc);if(i){let s=dc(i,0),a=document.createTextNode(s);o.replaceChild(a,n);}}catch(n){}});}catch(t){}}const pc=e=>(vue.pushScopeId("data-v-882b932b"),e=e(),vue.popScopeId(),e),hc={key:0,class:"tag-modal modal"},fc={class:"modal-root"},mc=pc(()=>vue.createElementVNode("div",{class:"title"}," 提醒系统 ",-1)),gc=["innerHTML"],yc={__name:"NotificationModal",props:["modelValue","h"],emits:["update:modelValue"],setup(e,{emit:t}){const n=t;vue.onMounted(()=>{});function o(){n("update:modelValue",!1);}return (i,s)=>(vue.openBlock(),vue.createBlock(vue.Transition,null,{default:vue.withCtx(()=>[e.modelValue?(vue.openBlock(),vue.createElementBlock("div",hc,[vue.createElementVNode("div",{class:"mask",onClick:vue.withModifiers(o,["stop"])}),vue.createElementVNode("div",fc,[vue.createElementVNode("div",{class:"modal-header"},[mc,vue.createElementVNode("i",{class:"fa fa-times",onClick:o})]),vue.createElementVNode("div",{innerHTML:e.h,class:"modal-body"},null,8,gc)])])):vue.createCommentVNode("",!0)]),_:1}))}},wc=K(yc,[["__scopeId","data-v-882b932b"]]);const _c={components:{Icon:te,BaseButton:ye,NotificationModal:wc,BaseLoading:Ze,BaseSwitch:yt,MsgModal:rc,TagModal:sc,Tooltip:Ue,Setting:Jo,PostDetail:Ga,Base64Tooltip:za,Msg:mn},provide(){return {isLogin:vue.computed(()=>this.isLogin),isNight:vue.computed(()=>this.isNight),pageType:vue.computed(()=>this.pageType),tags:vue.computed(()=>this.tags),show:vue.computed(()=>this.show),post:vue.computed(()=>this.current),config:vue.computed(()=>this.config),allReplyUsers:vue.computed(()=>{var e,t,n;return (e=this.current)!=null&&e.replyList?Array.from(new Set(((n=(t=this.current)==null?void 0:t.replyList)==null?void 0:n.map(o=>o.username))??[])):[]}),showConfig:this.showConfig}},data(){return {loading:window.pageType===W.Post,refreshLoading:!1,loadMore:!1,isLogin:!!window.user.username,pageType:window.pageType,isNight:window.isNight,stopMe:window.stopMe,show:!1,current:window.clone(window.initPost),list:[],config:window.clone(window.config),tags:window.user.tags,configModal:{show:!1},notificationModal:{show:!1,h:""},previewModal:{show:!1,src:""},popConfirmModal:{show:!1,title:"",id:""}}},computed:{targetUserTags(){return this.tags[window.targetUserName]??[]},isList(){return [W.Home,W.Node].includes(this.pageType)},isPost(){return this.pageType===W.Post},isMember(){return this.pageType===W.Member}},watch:{config:{handler(e){let t={[window.user.username??"default"]:e};localStorage.setItem("v2ex-config",JSON.stringify(t)),window.config=e,window.initConfig&&window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId);},deep:!0},tags(e){window.user.tags=e;},"config.viewType"(e){e&&(e==="card"?$(".post-item").each(function(){$(this).addClass("preview");}):$(".post-item").each(function(){$(this).removeClass("preview");}));}},created(){let e=this;this.initEvent(),window.cb=this.winCb,window.canParseV2exPage&&($(document).on("click","a",this.clickA),$(document).on("click",".post-item",function(t){if(!t.currentTarget.getAttribute("script")){if(e.stopMe)return !0;if(this.classList.contains("preview")&&t.target.tagName!=="A"&&t.target.tagName!=="IMG"&&!t.target.classList.contains("toggle")){let n=this.dataset.id,o=this.dataset.href;n?e.clickPost(t,n,o):o&&(location.href=o);}}}),$(document).on("click",".toggle",t=>{if(this.stopMe)return !0;let n=t.target.dataset.id,o=document.querySelector(`.id_${n}`);o.classList.contains("preview")?(t.target.innerText="预览",o.classList.remove("preview")):this.config.viewType!=="card"?this.list.findIndex(s=>s.id==n)>-1?(t.target.innerText="收起",o.classList.add("preview")):(t.target.innerText="加载中",I.getPostDetailByApi(n).then(s=>{s.content_rendered?(s.href=o.dataset.href,this.list.push(Re(s)),o.classList.add("preview"),t.target.innerText="收起",I.appendPostContent(s,o)):(t.target.innerText="预览",v.emit(b.SHOW_MSG,{type:"warning",text:"主题暂无正文！"}));})):(t.target.innerText="收起",o.classList.add("preview"));}),window.onpopstate=t=>{t.state?this.show||(this.show=!0):this.show&&(this.show=!1);},window.deleteNotification=(t,n)=>{let o=$("#n_"+t);o.slideUp("fast"),$.post({url:"/delete/notification/"+t+"?once="+n,success(){$.get({url:"/notifications/below/"+window.notificationBottom,success(i,s,a){o.remove(),$("#notifications").append(i),window.notificationBottom=a.getResponseHeader("X-V2EX-New-Notification-Bottom");},error(){o.slideDown("fast");}});},error(){o.slideDown("fast");}});});},mounted(){},beforeUnmount(){v.clear(),$(document).off("click","a",this.clickA);},methods:{async getUnreadMessagesCount(){var i,s;const t=await(await fetch(`${location.origin}/mission`)).text(),o=$(t).find('#Rightbar a[href^="/notifications"]').text();if(o.includes("未读提醒")){if((i=o.match(/\d+/))==null?void 0:i.at(0))return Number((s=o.match(/\d+/))==null?void 0:s.at(0))}else return 0;throw new Error("无法获取未读消息数量")},clickA(e){let t=this;if(e.currentTarget.getAttribute("script"))return;if(t.stopMe)return !0;let{pageType:n}=I.checkPageType(e.currentTarget);switch(n){case W.Post:let{href:o,id:i,title:s}=I.parseA(e.currentTarget);i&&t.clickPost(e,i,o,s);break;case W.Node:case W.Home:case W.Changes:return;default:if(e.currentTarget.href.includes("/settings/night/toggle")||e.currentTarget.href===location.origin+"/#;")return;e.currentTarget.href.includes("/notifications"),t.config.newTabOpen&&(t.stopEvent(e),I.openNewTab(e.currentTarget.href,t.config.newTabOpenActive));return}},stopEvent(e){e.preventDefault(),e.stopPropagation();},async clickPost(e,t,n,o=""){if(t){if(this.config.clickPostItemOpenDetail){this.stopEvent(e);let i=Re(),s=this.list.findIndex(a=>a.id==t);s>-1&&(i=this.list[s]),i.title||(i.title=o??"加载中"),i.id=t,i.href=n,this.getPostDetail(i);return}this.config.newTabOpen&&(this.stopEvent(e),I.openNewTab(`https://www.v2ex.com/t/${t}?p=1`,this.config.newTabOpenActive));}},showPost(){this.show=!0,$("#Wrapper #Main .box:lt(3)").each(function(){$(this).hide();});},showConfig(){this.configModal.show=!0;},async winCb({type:e,value:t}){e==="openSetting"&&this.showConfig(),e==="syncData"&&(this.list=Object.assign(this.list,window.postList),this.config=window.config,this.stopMe=window.stopMe,this.tags=window.user.tags),e==="warningNotice"&&v.emit(b.SHOW_MSG,{type:"warning",text:t}),!this.stopMe&&(e==="restorePost"&&(this.show=!1,this.loading=!1,v.emit(b.SHOW_MSG,{type:"warning",text:"脚本无法查看此页面！"}),$("#Wrapper #Main .box:lt(3)").each(function(){$(this).show();})),e==="postContent"&&(this.current=Object.assign(this.current,t),this.current.inList=!0,this.config.autoOpenDetail&&this.showPost()),e==="postReplies"&&(this.loading=!1,this.current=Object.assign(this.current,t),this.list.push(this.clone(this.current))));},clone(e){return window.clone(e)},regenerateReplyList(){if(this.current.replyList.length?I.createList(this.current,this.current.replyList):(this.current.replyCount=0,this.current.nestedReplies=[],this.current.nestedRedundReplies=[]),this.list.length){let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&(this.list[e]=this.clone(this.current));}},initEvent(){v.on(b.CHANGE_COMMENT_THANK,e=>{const{id:t,type:n}=e;let o=this.current.replyList.findIndex(i=>i.id===t);o>-1&&(this.current.replyList[o].isThanked=n==="add",n==="add"?this.current.replyList[o].thankCount++:this.current.replyList[o].thankCount--,this.regenerateReplyList());}),v.on(b.CHANGE_POST_THANK,e=>{const{id:t,type:n}=e;this.current.isThanked=n==="add",n==="add"?this.current.thankCount++:this.current.thankCount--;let o=this.list.findIndex(i=>i.id===t);o>-1&&(this.list[o].isThanked=n==="add",n==="add"?this.list[o].thankCount++:this.list[o].thankCount++);}),v.on(b.REMOVE,e=>{let t=this.current.replyList.findIndex(n=>n.floor===e);t>-1&&this.current.replyList.splice(t,1),this.regenerateReplyList();}),v.on(b.IGNORE,()=>{this.show=!1;let e=this.list.findIndex(t=>t.id===this.current.id);e>-1&&this.list.splice(e,1),this.current=this.clone(window.initPost);}),v.on(b.MERGE,e=>{this.current=Object.assign(this.current,e);let t=this.list.findIndex(n=>n.id===this.current.id);t>-1&&(this.list[t]=this.clone(this.current));}),v.on(b.ADD_REPLY,e=>{this.current.replyList.push(e),this.regenerateReplyList();}),v.on(b.REFRESH_ONCE,async e=>{if(e){if(typeof e=="string"){let t=e.match(/var once = "([\d]+)";/);if(t&&t[1]){this.current.once=Number(t[1]);return}}if(typeof e=="number"){this.current.once=e;return}}window.fetchOnce().then(t=>{this.current.once=t;});}),v.on(b.REMOVE_TAG,async({username:e,tag:t})=>{let n=this.clone(this.tags),o=this.tags[e]??[],i=o.findIndex(a=>a===t);i>-1&&o.splice(i,1),this.tags[e]=o,await window.parse.saveTags(this.tags)||(v.emit(b.SHOW_MSG,{type:"error",text:"标签删除失败！"}),this.tags=n);}),v.on(b.SHOW_CONFIRM_MODAL,e=>{const{rect:t,title:n,id:o}=e;this.popConfirmModal.show=!0,this.popConfirmModal.title=n,this.popConfirmModal.id=o,vue.nextTick(()=>{this.$refs.tip.style.top=t.top+"px",this.$refs.tip.style.left=t.left+t.width/2-50+"px";});});},async getPostDetail(e){this.current=e,this.show=!0;let t=window.baseUrl+"/t/"+this.current.id;this.current.url=t,this.current.replyList.length?this.refreshLoading=!0:(this.loading=!0,I.getPostDetailByApi(this.current.id).then(d=>{if(d.replyCount=d.replies,this.current=Object.assign(this.current,d),this.current.replyCount>Jt){I.openNewTab(`${location.origin}/t/${this.current.id}?p=1&script=1`,!0),v.emit(b.SHOW_MSG,{type:"warning",text:"由于回复数量较多，已为您单独打开此主题"}),this.loading=this.show=!1;return}else this.current.jsonContent=`
            <div class="cell">
              <div class="topic_content">
                <div class="markdown_body">
                 ${(d==null?void 0:d.content_rendered)??""}
                </div>
              </div>
            </div>`;}));let o=await window.fetch(t+"?p=1");if(o.status===404)return v.emit(b.SHOW_MSG,{type:"error",text:"主题未找到"}),this.refreshLoading=this.loading=!1;if(o.status===403){this.refreshLoading=this.show=this.loading=!1,I.openNewTab(`${location.origin}/t/${e.id}?p=1&script=0`,!0);return}if(o.redirected)return v.emit(b.SHOW_MSG,{type:"error",text:"没有权限"}),this.refreshLoading=this.loading=!1;let i=await o.text();if(i.search("你要查看的页面需要先登录")>-1)return v.emit(b.SHOW_MSG,{type:"error",text:"你要查看的页面需要先登录"}),this.refreshLoading=this.loading=!1;let a=i.match(/<body[^>]*>([\s\S]+?)<\/body>/g),c=$(a[0]);uc(c),await window.parse.getPostDetail(this.current,c,i);let p=this.list.findIndex(d=>d.id==this.current.id);p>-1?this.list[p]=this.clone(this.current):this.list.push(this.clone(this.current)),this.refreshLoading=this.loading=!1,await window.parse.parseOp(this.current);},addTargetUserTag(){v.emit(b.ADD_TAG,window.targetUserName);},removeTargetUserTag(e){v.emit(b.REMOVE_TAG,{username:window.targetUserName,tag:e});},popConfirmModalCancel(){this.popConfirmModal.show=!1;},popConfirmModalConfirm(){this.popConfirmModalCancel(),v.emit(b.SHOW_CONFIRM_MODAL_CONFIRM,this.popConfirmModal.id);}}},It=e=>(vue.pushScopeId("data-v-15f2a343"),e=e(),vue.popScopeId(),e),vc={key:0,class:"target-user-tags p1"},bc=It(()=>vue.createElementVNode("span",null,"标签：",-1)),kc={class:"my-tag"},Cc=It(()=>vue.createElementVNode("i",{class:"fa fa-tag"},null,-1)),xc=["onClick"],Tc={key:1,class:"my-box p2",style:{"margin-top":"2rem","margin-bottom":"0"}},Sc={key:0,class:"flex flex-center"},Ic={key:1,class:"loaded"},Mc=It(()=>vue.createElementVNode("span",null,"楼中楼解析完成",-1)),Lc={key:0,ref:"tip",class:"pop-confirm-content"},Rc={class:"text"},Oc={class:"options"};function Nc(e,t,n,o,i,s){const a=vue.resolveComponent("Setting"),c=vue.resolveComponent("TagModal"),p=vue.resolveComponent("PostDetail"),d=vue.resolveComponent("Base64Tooltip"),r=vue.resolveComponent("MsgModal"),u=vue.resolveComponent("NotificationModal"),g=vue.resolveComponent("BaseLoading"),y=vue.resolveComponent("BaseButton");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(a,{modelValue:i.config,"onUpdate:modelValue":t[0]||(t[0]=_=>i.config=_),show:i.configModal.show,"onUpdate:show":t[1]||(t[1]=_=>i.configModal.show=_)},null,8,["modelValue","show"]),vue.createVNode(c,{tags:i.tags,"onUpdate:tags":t[2]||(t[2]=_=>i.tags=_)},null,8,["tags"]),vue.createVNode(p,{modelValue:i.show,"onUpdate:modelValue":t[3]||(t[3]=_=>i.show=_),ref:"postDetail",displayType:i.config.commentDisplayType,"onUpdate:displayType":t[4]||(t[4]=_=>i.config.commentDisplayType=_),onRefresh:t[5]||(t[5]=_=>s.getPostDetail(i.current)),loading:i.loading,refreshLoading:i.refreshLoading},null,8,["modelValue","displayType","loading","refreshLoading"]),vue.createVNode(d),vue.createVNode(r),vue.createVNode(u,{modelValue:i.notificationModal.show,"onUpdate:modelValue":t[6]||(t[6]=_=>i.notificationModal.show=_),h:i.notificationModal.h},null,8,["modelValue","h"]),i.stopMe?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[s.isMember&&i.isLogin&&i.config.openTag?(vue.openBlock(),vue.createElementBlock("div",vc,[bc,(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(s.targetUserTags,_=>(vue.openBlock(),vue.createElementBlock("span",kc,[Cc,vue.createElementVNode("span",null,vue.toDisplayString(_),1),vue.createElementVNode("i",{class:"fa fa-trash-o remove",onClick:m=>s.removeTargetUserTag(_)},null,8,xc)]))),256)),vue.createElementVNode("span",{class:"add-tag ago",onClick:t[7]||(t[7]=(..._)=>s.addTargetUserTag&&s.addTargetUserTag(..._)),title:"添加标签"},"+")])):vue.createCommentVNode("",!0),s.isPost&&!i.show?(vue.openBlock(),vue.createElementBlock("div",Tc,[i.loading?(vue.openBlock(),vue.createElementBlock("div",Sc,[vue.createVNode(g)])):(vue.openBlock(),vue.createElementBlock("div",Ic,[Mc,vue.createVNode(y,{size:"small",onClick:s.showPost},{default:vue.withCtx(()=>[vue.createTextVNode("点击显示")]),_:1},8,["onClick"])]))])):vue.createCommentVNode("",!0)],64)),(vue.openBlock(),vue.createBlock(vue.Teleport,{to:"body"},[vue.createVNode(vue.Transition,null,{default:vue.withCtx(()=>[i.popConfirmModal.show?(vue.openBlock(),vue.createElementBlock("div",Lc,[vue.createElementVNode("div",Rc,vue.toDisplayString(i.popConfirmModal.title),1),vue.createElementVNode("div",Oc,[vue.createVNode(y,{type:"link",size:"small",onClick:vue.withModifiers(s.popConfirmModalCancel,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("取消")]),_:1},8,["onClick"]),vue.createVNode(y,{size:"small",onClick:vue.withModifiers(s.popConfirmModalConfirm,["stop"])},{default:vue.withCtx(()=>[vue.createTextVNode("确认")]),_:1},8,["onClick"])])],512)):vue.createCommentVNode("",!0)]),_:1})]))],64)}const Pc=K(_c,[["render",Nc],["__scopeId","data-v-15f2a343"]]);let Ec=!document.querySelector("#Rightbar"),fe=document.createElement("section");fe.id="app";function Vc(){window.baseUrl=location.origin,window.initPost=Kt,window.win=function(){return window},window.win().doc=window.win().document,window.win().query=r=>window.win().document.querySelector(r),window.query=r=>window.win().document.querySelector(r),window.clone=r=>JSON.parse(JSON.stringify(r)),window.user=Ln,window.targetUserName="",window.pageType=void 0,window.pageData={pageNo:1},window.config=Rn,window.isNight=$(".Night").length===1,window.cb=null,window.stopMe=!1,window.postList=[],window.parse={async parsePostContent(r,u,g){let y=g.match(/var once = "([\d]+)";/);y&&y[1]&&(r.once=y[1]),r.isReport=g.includes("你已对本主题进行了报告");let _=u.find("#Main");if(!r.title||!r.content_rendered){let j=_.find("h1");j&&(r.title=j[0].innerText);}let m=_.find(".header > a");m.length&&(r.node.title=m[1].innerText,r.node.url=m[1].href);let f=_.find(".header small.gray a:nth-child(1)");f.length&&(r.member.username=f[0].innerText);let C=_.find(".header small.gray span");C.length&&(r.createDateAgo=C[0].innerText,r.createDate=C[0].title);let k=_.find(".header .avatar");k.length&&(r.member.avatar_large=k[0].src);let S=u.find(".topic_buttons");if(S.length){let j=S.find(".tb:first");j.length&&(r.isFavorite=j[0].innerText==="取消收藏");let Y=S.find(".tb:nth-child(3)");Y.length&&(r.isIgnore=Y[0].innerText==="取消忽略"),S.find("#topic_thank .tb").length||(r.isThanked=!0);let ne=S.find(".topic_stats");if(ne.length){let re=ne[0].innerText,he=re.matchAll(/([\d]+)[\s]*人收藏/g),_e=[...he];_e.length&&(r.collectCount=Number(_e[0][1])),he=re.matchAll(/([\d]+)[\s]*likes/g),_e=[...he],_e.length&&(r.collectCount=Number(_e[0][1]));let Ce=[...re.matchAll(/([\d]+)[\s]*人感谢/g)];Ce.length&&(r.thankCount=Number(Ce[0][1]));let Ie=re.matchAll(/([\d]+)[\s]*次点击/g),ae=[...Ie];ae.length&&(r.clickCount=Number(ae[0][1])),Ie=re.matchAll(/([\d]+)[\s]*views/g),ae=[...Ie],ae.length&&(r.clickCount=Number(ae[0][1]));}}let Q=u.find("#Main .box").first().clone();Q.find(".topic_buttons").remove(),Q.find(".inner").remove(),Q.find(".header").remove();let V=Q.html();return V=I.checkPhotoLink2Img(V),r.headerTemplate=V,r},async parseOp(r){if(!r.member.id){let u=await fetch(window.baseUrl+"/api/members/show.json?username="+r.member.username);u.status===200&&(r.member=await u.json());}if(r.member.id){let u=new Date(r.member.created*1e3),g=`${u.getFullYear()}-${u.getMonth()+1}-${u.getDate()}`;u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);let y=new Date;y.setHours(0),y.setMinutes(0),y.setSeconds(0),y.setMilliseconds(0);let m=y.getTime()-u.getTime()<=1e3*60*60*24*15;r.member.createDate=g+" 注册",r.member.isNew=m;}else r.member.createDate="用户已被注销/封禁",r.member.isNew=!0;return r},async getPostAllReplies(r,u,g,y=1){var C,k;if(u.find("#no-comments-yet").length)return r;let f=u.find("#Main .box")[1].querySelectorAll(".cell");if(f&&f.length){r.fr=f[0].querySelector(".cell .fr").innerHTML,f=Array.from(f);let S=f[0].querySelector(".snow");r.lastReplyDate=((k=(C=S==null?void 0:S.nextSibling)==null?void 0:C.nodeValue)==null?void 0:k.trim())||"";let z=[];if(f[1].id){z.push({i:y,replyList:this.parsePageReplies(f.slice(1))});let Q=I.getAllReply(z);return I.createList(r,Q),r}else {let Q=[];return new Promise((V,j)=>{z.push({i:y,replyList:this.parsePageReplies(f.slice(2,f.length-1))});let Y=f[1].querySelectorAll("a.page_normal");Y=Array.from(Y);let X=window.baseUrl+"/t/"+r.id;for(let ne=0;ne<Y.length;ne++){let re=Number(Y[ne].innerText);Q.push(this.fetchPostOtherPageReplies(X+"?p="+re,re));}Promise.allSettled(Q).then(ne=>{ne.filter(he=>he.status==="fulfilled").map(he=>z.push(he.value));let re=I.getAllReply(z);I.createList(r,re),V(r);});})}}},fetchPostOtherPageReplies(r,u){return new Promise(g=>{$.get(r).then(y=>{let _=y.match(/<body[^>]*>([\s\S]+?)<\/body>/g),f=$(_[0]).find("#Main .box")[1].querySelectorAll(".cell");f=Array.from(f),g({i:u,replyList:this.parsePageReplies(f.slice(2,f.length-1))});}).catch(y=>{y.status===403&&I.cbChecker({type:"restorePost",value:null});});})},parsePageReplies(r){let u=[];return r.forEach((g,y)=>{if(!g.id)return;let _={level:0,thankCount:0,replyCount:0,isThanked:!1,isOp:!1,isDup:!1,id:g.id.replace("r_","")},m=g.querySelector(".reply_content");_.reply_content=I.checkPhotoLink2Img(m.innerHTML),_.reply_text=m.textContent;let{users:f,floor:C}=this.parseReplyContent(_.reply_content);_.hideCallUserReplyContent=_.reply_content,f.length===1&&(_.hideCallUserReplyContent=_.reply_content.replace(/@<a href="\/member\/[\s\S]+?<\/a>(\s#[\d]+)?\s(<br>)?/,()=>"")),_.replyUsers=f,_.replyFloor=C;let k=g.querySelector(".ago");_.date=k.textContent;let S=g.querySelector("strong a");_.username=S.textContent;let z=g.querySelector("td img");_.avatar=z.src;let Q=g.querySelector(".no");_.floor=Number(Q.textContent);let V=g.querySelector(".thank_area");V&&(_.isThanked=V.classList.contains("thanked"));let j=g.querySelector(".small");j&&(_.thankCount=Number(j.textContent)),g.querySelector(".op")&&(_.isOp=!0),g.querySelector(".mod")&&(_.isMod=!0),u.push(_);}),u},parseReplyContent(r){if(!r)return;let u=[],g=C=>{let k=C.indexOf('">');if(k>-1){let S=C.substring(0,k);u.find(z=>z===S)||u.push(S);}},y=/@<a href="\/member\/([\s\S]+?)<\/a>/g,m=[...r.matchAll(y)];m.length>1&&m.map(C=>{g(C[1]);}),m.length===1&&g(m[0][1]);let f=-1;if(u.length===1){let C=/@<a href="\/member\/[\s\S]+?<\/a>[\s]+#([\d]+)/g,S=[...r.matchAll(C)];S.length&&(f=Number(S[0][1]));}return {users:u,floor:f}},async getPostDetail(r,u,g,y=1){return r=await this.parsePostContent(r,u,g),await this.getPostAllReplies(r,u,g,y)},parsePagePostList(r,u){if(r.forEach(y=>{let _=y.querySelector(".item_title");if(!_)return;let m=Re();y.classList.add("post-item");let f=_.querySelector("a"),{href:C,id:k}=I.parseA(f);m.id=String(Number(k)),f.href=m.href=C,m.url=location.origin+"/api/topics/show.json?id="+m.id,y.classList.add(`id_${k}`),y.dataset.href=C;let S=y.querySelector("td:nth-child(4)");S||(S=y.querySelector("td:nth-child(2)")),S.style.position="relative";let z=document.createElement("div");z.dataset.id=m.id,z.classList.add("toggle"),z.innerText="预览",S.append(z),window.config.viewType==="card"&&window.postList.push(m);}),localStorage.setItem("d",""),window.pageType===W.Home){const y=()=>{let _;window.user.username?_=$(window.atob("LnYycC1ob3Zlci1idG4=")).length:_=$(window.atob("LnYycC1mb290ZXI=")).length,_!==0?(window.stopMe=!0,localStorage.setItem("d","1"),I.cbChecker({type:"syncData"})):localStorage.setItem("d","");};y(),setTimeout(y,1e3),setTimeout(y,2e3),setTimeout(y,3e3),setTimeout(y,5e3),setTimeout(y,1e4),setTimeout(y,15e3);}const g=y=>{let _=window.postList.findIndex(f=>f.id===y.id);_>-1&&(window.postList[_]=Object.assign(window.postList[_],y),I.cbChecker({type:"syncData"}));let m=u.querySelector(`.id_${y.id}`);m.classList.add("preview"),y.content_rendered&&I.appendPostContent(y,m);};if(window.config.viewType==="card"&&!window.stopMe){let y=localStorage.getItem("cacheData"),_=[];if(y){_=JSON.parse(y);let f=Date.now();_=_.filter(C=>C.created>f/1e3-60*60*24*3);}let m=0;for(let f=0;f<window.postList.length;f++){let C=window.postList[f],k=_.find(S=>S.id===C.id);k?(k.href=C.href,g(k)):(m++,setTimeout(()=>{$.get(C.url).then(S=>{if(S&&S.length){let z=Re(S[0]);z.href=C.href,_.push(z),localStorage.setItem("cacheData",JSON.stringify(_)),g(z);}});},m<4?0:(m-4)*1e3));}}},async createNoteItem(r){return new Promise(async u=>{let g=new FormData;g.append("content",r),g.append("parent_id",0),g.append("syntax",0);let y=await fetch(`${location.origin}/notes/new`,{method:"post",body:g});if(y.redirected&&y.status===200){u(y.url.substr(-5));return}u(null);})},async editNoteItem(r,u){if(!u)return;let g=new FormData;g.append("content",r),g.append("syntax",0);let y=await fetch(`${location.origin}/notes/edit/${u}`,{method:"post",body:g});return y.redirected&&y.status===200},async saveTags(r){for(const[u,g]of Object.entries(r))g.length||delete r[u];return await this.editNoteItem(window.user.tagPrefix+JSON.stringify(r),window.user.tagsId)},async saveReadList(r){},async saveImgurList(r){}};function e(){try{Te("脚本设置",()=>{I.cbChecker({type:"openSetting"});}),Te("仓库地址",()=>{I.openNewTab(ge.git,!0);}),Te("反馈 & 建议",I.feedback);}catch{}}function t(){let r=`
       html, body {
            font-size: 62.5%;
        }
        

        :root{
          --box-border-radius:8px;
        }
        
        .box{
          box-shadow:rgba(0, 0, 0, 0.08) 0px 4px 12px;
        }
        
        #Tabs{
            border-top-left-radius: var(--box-border-radius) !important;
            border-top-right-radius: var(--box-border-radius) !important;
        }
        
        #Main .cell .count_livid { 
            font-size: 14px;
            font-weight: bold;
            padding: 3px 10px; 
            border-radius: 5px; 
        }

        #Wrapper {
          height: unset !important;
          width: unset !important;
        }

       #Wrapper > .content {
        height: unset !important;
        width: unset !important;
          max-width:1100px !important;
      }

      .post-item {
          background: white;
      } 

      .post-item > .post-content {
          height: 0;
          margin-top: 0;
      }

      .post-item:hover .toggle {
          display: flex;
      }

      .toggle {
          position: absolute;
          right: ${window.config.viewType==="simple"?"5rem":0};
          top: ${window.config.viewType==="simple"?0:"0.5rem"};
            width: 5rem;
            height: 100%;
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--link-color);
          display: none;
            padding-right: 1rem;
      }

      .preview {
          margin: 1rem 0;
          border: 1px solid transparent;
          border-radius: var(--box-border-radius);
          cursor: pointer;
      }

      .preview:hover {
          border: 1px solid #c8c8c8;
      }

      .preview > .post-content {
          height: unset !important;
          margin-top: 0.5rem !important;
      }

      .preview > .post-content.show-all {
          max-height: unset;
          -webkit-mask-image:none; 
      }

      .preview  .topic-link:link {
          color: black !important;
      }

      .post-content {
          margin-top: 0.5rem;
          display: block;
          max-height: 30rem;
          overflow: hidden;
          text-decoration: unset !important;
          line-break: anywhere;
          -webkit-mask-image: linear-gradient(180deg,#000 60%,transparent);
      }

      .show-more {
        display: none;
      }

      .preview > .show-more {
        font-size: 1.3rem;
        text-align: right;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 9;
      }

      .post-content:visited {
          color: #afb9c1 !important;
      }

      .post-content:link {
          color: #494949;
      }


      .Night .post-item {
          background: #18222d !important;
      }

      .Night .preview {
          border: 1px solid #3b536e;
      }

      .Night .preview > .post-content:link {
          color: #d1d5d9;
      }

      .Night .preview > .post-content:visited {
          color: #393f4e !important;
      }
      
      .Night .preview  .topic-link:link {
          color: #c0dbff !important;
      }
      
      ${window.config.viewType==="simple"?`
      ${window.pageType!==W.Member?`
      .item table tr td:first-child{display:none;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      .item table tr td .sep5{display:none;}
      .item table tr td .topic_info{display:none;}
      .item {border-bottom:none;}
      .avatar,#avatar{display:none;}
      `:""}
      
      #Logo {background-image:url('https://i.imgur.com/i9VgUtM.png');}
       .bigger a, .top:nth-last-child(5){color: transparent!important;text-shadow: #b0b0b0 0 0 6px;user-select: none;}
      // .bigger a:before,.top:nth-last-child(5):before{content:'Mona Lisa';position: absolute;background: white;}
      #Rightbar .cell table:first-child tr td:first-child{display:none;}
      `:""}

      ${window.config.customBgColor?`#Wrapper {
          background-color: ${window.config.customBgColor} !important;
          background-image: unset !important;
        }`:""}
        
        
      .top{
        position:relative;
      }
        
      .new:before{
        content:'new';
        position: absolute;
        background: red;
        font-size: 10px;
        border-radius: 4px;
        padding: 0px 2px;
        color: white;
        right: -9px;
        top: -3px;
      }
    }
    `,u=document.createElement("style");u.rel="stylesheet",u.type="text/css",u.innerHTML=r,window.document.head.append(u);}function n(){let r=new Date().getUTCFullYear()+"/"+(new Date().getUTCMonth()+1)+"/"+new Date().getUTCDate();if(window.pageType===W.Home){let u=window.query('.box .inner a[href="/mission/daily"]');u?o(u,r):window.win().doc.getElementById("gift_v2excellent")&&(window.win().doc.getElementById("gift_v2excellent").click(),localStorage.setItem("menu_clockInTime",r));}else {let u=localStorage.getItem("menu_clockInTime");(!u||u!=r)&&i(r);}}function o(r,u){let g=window.baseUrl+"/mission/daily/redeem?"+RegExp("once\\=(\\d+)").exec(document.querySelector("div#Top .tools, #menu-body").innerHTML)[0];$.get(g).then(y=>{let _=y.match(/<body[^>]*>([\s\S]+?)<\/body>/g),m=$(_[0]);m.find("li.fa.fa-ok-sign").length?(m=m.find("#Main").text().match(/已连续登录 (\d+?) 天/)[0],localStorage.setItem("menu_clockInTime",u),r&&(r.textContent=`自动签到完成！${m}`,r.href="javascript:void(0);")):r&&(r.textContent="自动签到失败！请尝试手动签到！");});}function i(r){$.get(window.baseUrl+"/mission/daily").then(u=>{let g=u.match(/<body[^>]*>([\s\S]+?)<\/body>/g);$(g[0]).find('input[value^="领取"]').length?o(null,r):localStorage.setItem("menu_clockInTime",r);});}function s(r,u){return new Promise((g,y)=>{$.get(location.origin+"/notes/edit/"+r).then(_=>{let m=_.match(/<body[^>]*>([\s\S]+?)<\/body>/g),C=$(m[0]).find(".note_editor").text();if(C===u)g({});else {let k=C.substring(u.length);try{g(JSON.parse(k));}catch{g({});}}});})}function a(r,u){fetch(`/notes/${r}`).then(g=>{g.text().then(y=>{let _=y.match(/\?once=([\d]+)/);_&&_[1]&&fetch(`/notes/delete/${r}?once=${Number(_[1])}`).then(m=>{m.status===200?m.redirected&&m.url===location.origin+"/"&&u():u();});});});}async function c(){$.get(location.origin+"/notes").then(async r=>{let u=r.match(/<body[^>]*>([\s\S]+?)<\/body>/g),y=$(u[0]).find("#Main .box .note_item_title a");if(window.config.openTag){let m=Array.from(y).filter(f=>f.innerText.includes(window.user.tagPrefix));if(m.length){if(m.length>1){let f=!0;for(let C=1;C<m.length-1;C++)setTimeout(()=>{if(!f)return;let k=m[C].href.substr(-5);a(k,()=>f=!1);},60*1e3*C);}window.user.tagsId=m[0].href.substr(-5),window.user.tags=await s(window.user.tagsId,window.user.tagPrefix);}else {let f=await window.parse.createNoteItem(window.user.tagPrefix);f&&(window.user.tagsId=f);}}let _=Array.from(y).filter(m=>m.innerText.includes(window.user.configPrefix));if(_.length){if(_.length>1){let f=!0;for(let C=1;C<_.length-1;C++)setTimeout(()=>{if(!f)return;let k=_[C].href.substr(-5);a(k,()=>f=!1);},60*1e3*C);}window.user.configNoteId=_[0].href.substr(-5);let m=await s(window.user.configNoteId,window.user.configPrefix);window.config=Object.assign(window.config,m);}else {let m=await window.parse.createNoteItem(window.user.configPrefix);m&&(window.user.configNoteId=m);}window.config.version<ge.currentVersion&&(window.config.version=ge.currentVersion),localStorage.setItem("v2ex-config",JSON.stringify(window.config)),window.parse.editNoteItem(window.user.configPrefix+JSON.stringify(window.config),window.user.configNoteId),await I.cbChecker({type:"syncData"}),setTimeout(()=>[window.initConfig=!0]);});}function p(){let r=$('<a href="/" class="top">脚本设置</a>');r.on("click",function(u){u.stopPropagation(),u.preventDefault(),this.classList.remove("new"),I.cbChecker({type:"openSetting"});}),$(".tools").prepend(r);}async function d(){window.addEventListener("error",_=>{let m=_.target,f=m.getAttribute("data-originurl");if(f){let C=document.createElement("a");C.href=f,C.setAttribute("notice","此标签由v2ex超级增强脚本转换图片失败后恢复"),C.innerText=f,m.parentNode.replaceChild(C,m);}},!0),window.isNight&&document.documentElement.classList.add("dark");let{pageData:r,pageType:u,username:g}=I.checkPageType();window.pageType=u,window.pageData=r,window.targetUserName=g,e();let y=document.querySelector(".tools .top:nth-child(2)");y&&y.textContent!=="注册"&&(window.user.username=y.textContent,window.user.avatar=$("#Rightbar .box .avatar").attr("src")),I.initConfig().then(async _=>{p(),t();try{window.config.autoSignin&&window.user.username&&n();}catch{}window.user.username&&c();let m,f,C,k;switch(window.pageType){case W.Node:m=document.querySelectorAll("#Wrapper #Main .box");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m[1]).prepend(k),$(m[1]).children().slice(1,3).each(function(){this.classList.contains("cell")&&k.append(this);}),k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m[1]).append(k),$(m[1]).children().slice(2).each(function(){this.classList.contains("cell")&&k.append(this);}),m[1].style.boxShadow="unset",m[1].style.background="unset",m[1].style.overflow="hidden";}catch{}f=m[1].querySelector("#TopicsNode").querySelectorAll(".cell"),f[0].before(fe),window.parse.parsePagePostList(f,m[1]);break;case W.Changes:case W.Home:m=document.querySelector("#Wrapper #Main .box");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m).prepend(k),$(m).children().slice(1,3).each(function(){this.classList.contains("item")||k.append(this);}),C=$(m).children().last(),C.addClass("cell post-item"),window.config.viewType==="card"&&C[0].classList.add("preview"),m.style.boxShadow="unset",m.style.background="unset",m.style.overflow="hidden";}catch{}f=m.querySelectorAll(".item"),f[0].before(fe),window.parse.parsePagePostList(f,m);break;case W.Post:if(localStorage.getItem("d")){window.stopMe=!0,I.cbChecker({type:"syncData"});return}if(m=document.querySelector("#Wrapper #Main .box"),m.after(fe),await I.checkPostReplies(window.pageData.id,!1)){window.stopMe=!0,I.cbChecker({type:"syncData"}),I.cbChecker({type:"warningNotice",value:"由于回复数量较多，脚本已停止解析楼中楼"});return}if(window.config.postWidth){let X=$("#Main");X.css({width:window.config.postWidth,margin:"unset"}),$("#Wrapper > .content").css({"max-width":"unset",display:"flex","justify-content":"center",gap:"20px"}),X.after($("#Rightbar"));}let V=Re({id:window.pageData.id}),j=$(document.body),Y=document.documentElement.outerHTML;window.parse.parsePostContent(V,j,Y).then(async X=>{await I.cbChecker({type:"postContent",value:X}),await window.parse.parseOp(X);}),window.parse.getPostAllReplies(V,j,Y,window.pageData.pageNo).then(async X=>{await I.cbChecker({type:"postReplies",value:X});});break;case W.Member:if(m=document.querySelectorAll("#Wrapper #Main .box"),location.pathname.includes("/replies"))m[0].after(fe);else if(location.pathname.includes("/topics"))m[0].after(fe);else {window.config.openTag&&(m[0].style.borderBottom="none",m[0].style["border-bottom-left-radius"]="0",m[0].style["border-bottom-right-radius"]="0");try{k=$('<div class="post-item"></div>'),window.config.viewType==="card"&&k[0].classList.add("preview"),$(m[1]).prepend(k),$(m[1]).children().slice(1,2).each(function(){this.classList.contains("item")||k.append(this);}),C=$(m[1]).children().last(),C.addClass("cell post-item"),window.config.viewType==="card"&&C[0].classList.add("preview"),m[1].style.boxShadow="unset",m[1].style.background="unset",m[1].style.overflow="hidden";}catch{}f=m[1].querySelectorAll(".cell"),m[0].after(fe),window.parse.parsePagePostList(f,m[1]);}break;default:window.stopMe=!0,I.cbChecker({type:"syncData"});break}});}window.canParseV2exPage=!window.location.search.includes("script"),window.canParseV2exPage?d():(document.querySelector("#Wrapper #Main .box").after(fe),window.stopMe=!0,I.cbChecker({type:"syncData"}),window.location.search.includes("script=0")&&I.cbChecker({type:"warningNotice",value:"脚本无法查看此主题，已为您单独打开此主题"}),window.location.search.includes("script=1")&&I.cbChecker({type:"warningNotice",value:"由于回复数量较多，已为您单独打开此主题并停止解析楼中楼"}));}

  if (!Ec) {
    (o=>{if(typeof GM_addStyle=="function"){GM_addStyle(o);return}const r=document.createElement("style");r.textContent=o,document.head.append(r)})(' .tip[data-v-ee672411]{position:fixed;font-size:1.6rem;z-index:9999;max-width:10rem;border-radius:.5rem;padding:1rem;color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.v-enter-active[data-v-e7c0fbef],.v-leave-active[data-v-e7c0fbef]{transition:opacity .3s ease}.v-enter-from[data-v-e7c0fbef],.v-leave-to[data-v-e7c0fbef]{opacity:0}.username[data-v-e7c0fbef]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-e7c0fbef]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-e7c0fbef]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-e7c0fbef]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-e7c0fbef]{display:inline}.my-tag .remove[data-v-e7c0fbef]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-e7c0fbef]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-e7c0fbef]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-e7c0fbef]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-e7c0fbef]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-e7c0fbef],body[data-v-e7c0fbef]{font-size:62.5%}[data-v-e7c0fbef]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-e7c0fbef]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-e7c0fbef]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-e7c0fbef]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-e7c0fbef]{justify-content:flex-end}.flex-center[data-v-e7c0fbef]{justify-content:center}.p1[data-v-e7c0fbef]{padding:1rem}.p2[data-v-e7c0fbef]{padding:2rem}.p0[data-v-e7c0fbef]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-e7c0fbef]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-e7c0fbef]{text-decoration:none;cursor:pointer}a[data-v-e7c0fbef]:hover{text-decoration:underline}.tool[data-v-e7c0fbef]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-e7c0fbef]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-e7c0fbef]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-e7c0fbef]{cursor:default}.tool.no-hover[data-v-e7c0fbef]:hover{background:unset!important}.tool.disabled[data-v-e7c0fbef]{cursor:not-allowed}.tool.disabled[data-v-e7c0fbef]:hover{background:unset!important}.my-node[data-v-e7c0fbef]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-e7c0fbef]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-e7c0fbef]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-e7c0fbef]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-e7c0fbef]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-e7c0fbef]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-e7c0fbef]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-e7c0fbef]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-e7c0fbef]{position:relative}.modal .mask[data-v-e7c0fbef]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-e7c0fbef]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-e7c0fbef]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-e7c0fbef]:first-child{border-left:none}.radio-group2 .active[data-v-e7c0fbef]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-e7c0fbef]{position:relative;display:inline-flex;justify-content:center}input[data-v-e7c0fbef]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-e7c0fbef]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-e7c0fbef]:focus{border:1px solid var(--color-active)}.danger[data-v-e7c0fbef]{color:red!important}.pop-confirm-content[data-v-e7c0fbef]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text[data-v-e7c0fbef]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-e7c0fbef]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.switch[data-v-e7c0fbef]{width:4.5rem;height:2.2rem;border-radius:2rem;position:relative;display:flex;align-items:center;background:var(--color-swtich-bg);transition:all .3s}.switch.active[data-v-e7c0fbef]{background:var(--color-active)}.switch.active[data-v-e7c0fbef]:before{right:.2rem}.switch[data-v-e7c0fbef]:before{position:absolute;content:" ";transition:all .3s;right:calc(100% - 2rem);width:1.8rem;height:1.8rem;background:white;border-radius:50%}.display-type[data-v-e4f684be]{height:3rem;padding:0 .3rem;background:var(--color-sp-btn-bg);border-radius:1rem;display:flex;font-size:1.4rem;align-items:center;color:#a9a9a9}.display-type .type[data-v-e4f684be]{border-radius:.8rem;padding:0 1.3rem;height:2.8rem;align-items:center;display:flex;position:relative;cursor:pointer}.display-type .type.active[data-v-e4f684be]{background:var(--color-second-bg);color:var(--color-font-pure);box-shadow:0 0 6px 0 var(--color-tooltip-shadow)}.display-type .type-list[data-v-e4f684be]{position:absolute;background:var(--color-sp-btn-bg);right:0;top:3rem;font-size:1.4rem;box-shadow:0 0 6px 0 var(--color-tooltip-shadow);border-radius:.6rem;z-index:9;color:var(--color-font)}.display-type .type-list .item[data-v-e4f684be]{word-break:keep-all;padding:.8rem 1rem;cursor:pointer}.display-type .type-list .item.active[data-v-e4f684be],.display-type .type-list .item[data-v-e4f684be]:hover{color:var(--color-font-pure)}.display-type svg[data-v-e4f684be]{width:1.5rem}.loading[data-v-2697baa2]{border:2px solid;border-color:var(--color-loading-2) var(--color-loading-1) var(--color-loading-1) var(--color-loading-1);border-radius:100%;animation:circle-2697baa2 infinite 1s linear;width:2rem;height:2rem}.loading.small[data-v-2697baa2]{width:1.2rem;height:1.2rem}.loading.large[data-v-2697baa2]{width:3rem;height:3rem}@keyframes circle-2697baa2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.base-button[data-v-5a7d79ba]{cursor:pointer;border-radius:.6rem;padding:0 1.5rem;display:inline-flex;align-items:center;justify-content:center;transition:all .3s;height:3.6rem;line-height:1;position:relative}.base-button .loading[data-v-5a7d79ba]{position:absolute}.base-button.disabled[data-v-5a7d79ba]{opacity:.6;cursor:not-allowed;-webkit-user-select:none;user-select:none}.base-button.small[data-v-5a7d79ba]{height:3rem}.base-button.small>span[data-v-5a7d79ba]{font-size:1.3rem}.base-button.large[data-v-5a7d79ba]{height:5rem;font-size:1.8rem;padding:0 2.2rem}.base-button.large>span[data-v-5a7d79ba]{font-size:1.8rem}.base-button[data-v-5a7d79ba]:hover:not(.link){opacity:.7}.base-button.primary[data-v-5a7d79ba]{background:var(--color-active)}.base-button.primary>span[data-v-5a7d79ba]{color:#fff}.base-button.gary[data-v-5a7d79ba]{background:#4b5563}.base-button.link[data-v-5a7d79ba]{border-radius:0;border-bottom:2px solid transparent}.base-button.link>span[data-v-5a7d79ba]{color:var(--color-font-8)}.base-button.link[data-v-5a7d79ba]:hover{border-bottom:2px solid var(--color-font-8)}.base-button.active[data-v-5a7d79ba]{opacity:.4}.key-notice[data-v-5a7d79ba]{margin-left:1rem;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff}.key-notice .key[data-v-5a7d79ba]{transform:scale(.8)}.setting-modal .modal-root[data-v-cb13d533]{z-index:9;background:var(--color-main-bg);border-radius:1.6rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-cb13d533]{padding:1.4rem;display:flex;justify-content:center;position:relative}.setting-modal .modal-root .modal-header .title[data-v-cb13d533]{font-size:2.2rem;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-cb13d533]{position:absolute;right:1rem;cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-cb13d533]{width:60rem}.setting-modal .modal-root .body .modal-content[data-v-cb13d533]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;font-size:1.6rem;text-align:left;line-height:1.6}.setting-modal .modal-root .body .btns[data-v-cb13d533]{margin:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.setting-modal .modal-root[data-v-9f347886]{z-index:9;background:var(--color-main-bg);border-radius:1.6rem;font-size:1.4rem;overflow:hidden;color:var(--color-font-pure)}.setting-modal .modal-root .modal-header[data-v-9f347886]{padding:2.4rem;display:flex;justify-content:space-between}.setting-modal .modal-root .modal-header .title[data-v-9f347886]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.setting-modal .modal-root .modal-header svg[data-v-9f347886]{cursor:pointer;font-size:2.6rem}.setting-modal .modal-root .body[data-v-9f347886]{width:45vw;height:70vh;display:flex}.setting-modal .modal-root .body .left[data-v-9f347886]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;font-size:1.8rem}.setting-modal .modal-root .body .left .tabs[data-v-9f347886]{padding:1rem 2rem;display:flex;flex-direction:column;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab[data-v-9f347886]{cursor:pointer;padding:1rem 1.5rem;border-radius:.8rem;display:flex;align-items:center;gap:1rem}.setting-modal .modal-root .body .left .tabs .tab.active[data-v-9f347886]{background:var(--color-item-bg)}.setting-modal .modal-root .body .left .icons[data-v-9f347886]{display:flex;gap:1rem;margin-bottom:2rem;font-size:2.4rem}.setting-modal .modal-root .body .modal-content[data-v-9f347886]{background:var(--color-second-bg);flex:1;height:100%;box-sizing:border-box;padding:1rem 1rem 1rem 2rem;border-radius:1.6rem;display:flex}.setting-modal .modal-root .body .modal-content .scroll[data-v-9f347886]{flex:1;padding-right:1rem;overflow:auto}.setting-modal .modal-root .body .modal-content .scroll .row[data-v-9f347886]{min-height:5rem;display:flex;justify-content:space-between;align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper[data-v-9f347886]{height:3rem;flex:1;display:flex;justify-content:flex-end;align-items:center;gap:var(--space)}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper span[data-v-9f347886]{text-align:right;font-size:1.4rem;color:gray}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key[data-v-9f347886]{align-items:center}.setting-modal .modal-root .body .modal-content .scroll .row .wrapper .set-key input[data-v-9f347886]{width:15rem;box-sizing:border-box;margin-right:1rem;height:2.8rem;outline:none;font-size:1.6rem;border:1px solid gray;border-radius:.3rem;padding:0 .5rem;background:var(--color-second-bg);color:var(--color-font-1)}.setting-modal .modal-root .body .modal-content .scroll .row .main-title[data-v-9f347886]{font-size:2.2rem;font-weight:700;color:var(--color-font-8)}.setting-modal .modal-root .body .modal-content .scroll .row .item-title[data-v-9f347886]{font-size:1.8rem}.setting-modal .modal-root .body .modal-content .scroll .desc[data-v-9f347886]{margin-bottom:1rem;font-size:1.4rem;text-align:left;color:var(--color-font)}.setting-modal .modal-root .body .modal-content .scroll .project-desc[data-v-9f347886]{text-align:start;font-size:1.6rem;padding-bottom:10rem}.setting-modal .modal-root .body .modal-content .scroll .line[data-v-9f347886]{border-bottom:1px solid #c4c3c3}.Author[data-v-64aa1930]{display:flex;align-items:center;justify-content:space-between;font-size:1.2rem;position:relative}.Author.expand[data-v-64aa1930]{margin-bottom:0}.Author .Author-left[data-v-64aa1930]{display:flex;align-items:center;max-width:65%;word-break:break-all}.Author .Author-left .username[data-v-64aa1930]{font-size:1.4rem;margin-right:.6rem}.Author .Author-left .expand-icon[data-v-64aa1930]{cursor:pointer;margin-right:.6rem;width:2rem;height:2rem;transform:rotate(90deg)}.Author .Author-left .avatar[data-v-64aa1930]{margin-right:.8rem;display:flex}.Author .Author-left .avatar img[data-v-64aa1930]{width:2.8rem;height:2.8rem;border-radius:.4rem}.Author .Author-left .texts[data-v-64aa1930]{flex:1}.Author .Author-left .owner[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .dup[data-v-64aa1930]{display:inline-block;background-color:transparent;color:red;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid red;font-size:1.2rem;font-weight:700;margin-right:.6rem;transform:scale(.8)}.Author .Author-left .mod[data-v-64aa1930]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:.6rem}.Author:hover .add-tag[data-v-64aa1930]{display:inline-block}.Author .Author-right[data-v-64aa1930]{position:absolute;right:0;display:flex;align-items:center}.Author .Author-right .toolbar[data-v-64aa1930]{display:flex;align-items:center;color:var(--color-gray);opacity:0;gap:.2rem}.Author .Author-right .toolbar[data-v-64aa1930]:hover{opacity:1}.post-editor-wrapper[data-v-312ab0d0]{width:100%;box-sizing:border-box;position:relative;overflow:hidden;transition:all .3s;color:var(--color-font)}.post-editor-wrapper.reply-post .post-editor[data-v-312ab0d0]{border:1px solid var(--color-line)}.post-editor-wrapper.reply-post.isFocus .post-editor[data-v-312ab0d0]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment[data-v-312ab0d0]{border-radius:var(--box-border-radius);overflow:hidden;border:1px solid var(--color-line)}.post-editor-wrapper.reply-comment.isFocus[data-v-312ab0d0]{border:1px solid var(--color-active)}.post-editor-wrapper.reply-comment .toolbar[data-v-312ab0d0]{background:var(--color-editor-toolbar)}.post-editor-wrapper .post-editor[data-v-312ab0d0]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent}.post-editor-wrapper .toolbar[data-v-312ab0d0]{box-sizing:border-box;padding:.5rem 1rem;width:100%;position:relative;display:flex;justify-content:space-between;align-items:center}.post-editor-wrapper .toolbar .left[data-v-312ab0d0]{display:flex;align-items:center;gap:1rem;font-size:2.6rem}.post-editor-wrapper .toolbar .left svg[data-v-312ab0d0]{cursor:pointer}.post-editor-wrapper .toolbar .left .upload[data-v-312ab0d0]{width:2.6rem;height:2.6rem;overflow:hidden;display:flex;justify-content:center;align-items:center}.post-editor-wrapper .toolbar .left .upload input[data-v-312ab0d0]{width:2.6rem;height:2.6rem;cursor:pointer;position:absolute;opacity:0}.post-editor-wrapper .toolbar span[data-v-312ab0d0]{color:gray;font-size:1.3rem}.post-editor-wrapper .get-cursor[data-v-312ab0d0]{border-radius:var(--box-border-radius);transition:border .3s;width:100%;max-width:100%;padding:.6rem 1.4rem;box-sizing:border-box;outline:none;font-family:Avenir,Helvetica,Arial,sans-serif;font-size:1.4rem;min-height:13rem;resize:none;background:var(--box-background-color);color:var(--color-font-pure);border:1px solid transparent;position:absolute;top:0;z-index:-100}.post-editor-wrapper .emoticon-pack[data-v-312ab0d0]{z-index:999999999;border-radius:1rem;padding:1rem;width:31rem;max-width:31rem;height:30rem;max-height:30rem;overflow:auto;background:var(--color-third-bg);border:1px solid var(--color-font-3);box-shadow:0 9px 24px -3px #0000000f,0 4px 8px -1px #0000001f;position:fixed;bottom:11rem;left:14rem}.post-editor-wrapper .emoticon-pack svg[data-v-312ab0d0]{cursor:pointer;position:absolute;right:.8rem;font-size:2.4rem}.post-editor-wrapper .emoticon-pack .list[data-v-312ab0d0]{margin:1rem 0}.post-editor-wrapper .emoticon-pack img[data-v-312ab0d0]{cursor:pointer;width:3rem;height:3rem;padding:.5rem}.post-editor-wrapper .emoticon-pack span[data-v-312ab0d0]{display:inline-block;cursor:pointer;font-size:2.3rem;padding:.5rem}.v-enter-active[data-v-2c9a538c],.v-leave-active[data-v-2c9a538c]{transition:opacity .3s ease}.v-enter-from[data-v-2c9a538c],.v-leave-to[data-v-2c9a538c]{opacity:0}.username[data-v-2c9a538c]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-2c9a538c]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-2c9a538c]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-2c9a538c]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-2c9a538c]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-2c9a538c]{display:inline}.my-tag .remove[data-v-2c9a538c]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-2c9a538c]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-2c9a538c]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-2c9a538c]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-2c9a538c]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-2c9a538c],body[data-v-2c9a538c]{font-size:62.5%}[data-v-2c9a538c]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-2c9a538c]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-2c9a538c]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-2c9a538c]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-2c9a538c]{justify-content:flex-end}.flex-center[data-v-2c9a538c]{justify-content:center}.p1[data-v-2c9a538c]{padding:1rem}.p2[data-v-2c9a538c]{padding:2rem}.p0[data-v-2c9a538c]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-2c9a538c]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-2c9a538c]{text-decoration:none;cursor:pointer}a[data-v-2c9a538c]:hover{text-decoration:underline}.tool[data-v-2c9a538c]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-2c9a538c]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-2c9a538c]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-2c9a538c]{cursor:default}.tool.no-hover[data-v-2c9a538c]:hover{background:unset!important}.tool.disabled[data-v-2c9a538c]{cursor:not-allowed}.tool.disabled[data-v-2c9a538c]:hover{background:unset!important}.my-node[data-v-2c9a538c]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-2c9a538c]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-2c9a538c]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-2c9a538c]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-2c9a538c]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-2c9a538c]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-2c9a538c]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-2c9a538c]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-2c9a538c]{position:relative}.modal .mask[data-v-2c9a538c]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-2c9a538c]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-2c9a538c]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-2c9a538c]:first-child{border-left:none}.radio-group2 .active[data-v-2c9a538c]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-2c9a538c]{position:relative;display:inline-flex;justify-content:center}input[data-v-2c9a538c]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-2c9a538c]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-2c9a538c]:focus{border:1px solid var(--color-active)}.danger[data-v-2c9a538c]{color:red!important}.pop-confirm-content[data-v-2c9a538c]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text[data-v-2c9a538c]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-2c9a538c]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.html-wrapper[data-v-2c9a538c]{position:relative}.html-wrapper .mask[data-v-2c9a538c]{max-height:90rem;overflow:hidden;-webkit-mask-image:linear-gradient(180deg,#000 80%,transparent)}.html-wrapper .expand[data-v-2c9a538c]{position:absolute;z-index:1;bottom:2rem;padding:.2rem 1.5rem;border-radius:2rem;border:1px solid gray;background:white;color:gray;left:50%;transform:translate(-50%);cursor:pointer}.top-sub-comment[data-v-176307ee]{width:100%;box-sizing:border-box;margin-top:.8rem;display:flex;position:relative}.top-sub-comment .expand-line[data-v-176307ee]{width:1.6rem;position:relative}.top-sub-comment .expand-line[data-v-176307ee]:after{position:absolute;left:50%;top:2%;content:" ";height:98%;width:0;border-right:1px solid var(--color-top-reply-wrap-line)}.top-sub-comment .right[data-v-176307ee]{flex:1;width:calc(100% - 3rem)}.top-sub-comment .right .w .post-editor-wrapper[data-v-176307ee]{margin-top:1rem}.top-sub-comment[data-v-176307ee] .avatar{display:none!important}.top-sub-comment.top-sub-reply[data-v-176307ee]:first-child{margin-top:0}.top-sub-comment.top-sub-reply>.expand-line[data-v-176307ee]{width:1rem}.top-sub-comment.top-sub-reply>.expand-line[data-v-176307ee]:after{display:none}.comment[data-v-84714fe5]{width:100%;box-sizing:border-box;margin-top:.6rem}.comment.isLevelOne[data-v-84714fe5]{border-bottom:1px solid var(--color-line);padding:.8rem 1rem;margin-top:0}.comment.ding[data-v-84714fe5]{background:rgba(255,255,0,.3)!important}.comment.isSimple .avatar[data-v-84714fe5],.comment.isSimple .expand-line[data-v-84714fe5]{display:none}.comment.isSimple .simple-wrapper[data-v-84714fe5]{padding-left:2.8rem}.comment.isSimple .w[data-v-84714fe5]{padding-left:0!important;padding-top:.5rem}.comment .comment-content-w .more[data-v-84714fe5]{text-align:center;margin:2rem 0}.comment .comment-content[data-v-84714fe5]{display:flex;position:relative}.comment .comment-content .expand-line[data-v-84714fe5]{cursor:pointer;margin-top:.6rem;width:2rem;min-width:2rem;position:relative}.comment .comment-content .expand-line[data-v-84714fe5]:after{position:absolute;left:50%;content:" ";height:100%;width:0;border-right:1px solid var(--color-line)}.comment .comment-content .expand-line[data-v-84714fe5]:hover:after{border-right:2px solid var(--color-active)}.comment .comment-content .right[data-v-84714fe5]{flex:1;width:calc(100% - 3rem)}.comment .comment-content .right .w[data-v-84714fe5]{padding-left:1rem}.comment .comment-content .right .w .post-editor-wrapper[data-v-84714fe5]{margin-top:1rem}.wrong-wrapper[data-v-84714fe5]{font-size:1.4rem;margin-bottom:1rem}.wrong-wrapper span[data-v-84714fe5]{cursor:pointer}.wrong-wrapper .del-line[data-v-84714fe5]{text-decoration:line-through}.wrong-wrapper .wrong-icon[data-v-84714fe5]{margin-left:.5rem}.wrong-wrapper .warning[data-v-84714fe5]{border-top:1px solid #e1e1e1;border-bottom:1px solid #e1e1e1;padding:1rem 0;margin-top:1rem;font-size:1.2rem;color:red}.reply-count[data-v-84714fe5]{padding:.8rem 0 .4rem;border-radius:.2rem;font-size:1.3rem;display:flex;align-items:center;color:gray;gap:1rem;cursor:pointer}.reply-count .gang[data-v-84714fe5]{width:2rem;height:0;border-bottom:1px solid #d5d5d5}.reply-count svg[data-v-84714fe5]{font-size:1rem}.top-reply-wrap[data-v-84714fe5]{background:var(--color-top-reply-wrap-bg);border-radius:.8rem;padding:.6rem;padding-left:0;margin-left:1rem}.toolbar[data-v-260c1ef3]{border-top:1px solid var(--color-line);height:3.8rem;padding-left:.6rem;display:flex;align-items:center;color:var(--color-gray);font-size:1.2rem;gap:.5rem}.comment[data-v-4a063111]{width:100%;box-sizing:border-box;display:flex;gap:1rem;padding:1rem;border-bottom:1px solid var(--color-line)}.comment.isSimple .avatar[data-v-4a063111]{display:none}.comment.isSimple .reply_content[data-v-4a063111]{margin-top:.5rem!important}.comment .avatar[data-v-4a063111]{display:flex}.comment .avatar img[data-v-4a063111]{width:3.8rem;height:3.8rem;border-radius:.3rem}.comment .comment-body[data-v-4a063111]{flex:1;display:flex;flex-direction:column}.comment .comment-body .texts[data-v-4a063111]{display:flex;align-items:center}.comment .comment-body .reply_content[data-v-4a063111]{margin-top:1rem;max-width:calc(100% - 5rem)}.comment .isRight[data-v-4a063111]{align-items:flex-end}.comment .isRight .owner[data-v-4a063111],.comment .isRight .mod[data-v-4a063111],.comment .isRight .username[data-v-4a063111]{margin:0 0 0 1rem}.comment .Author-right[data-v-4a063111]{display:flex;flex-direction:column;align-items:center}.comment .Author-right .floor[data-v-4a063111]{margin-left:0}.comment .Author-right .jump[data-v-4a063111]{color:#929596;margin-top:.4rem;font-size:1.4rem}.comment .point[data-v-4a063111]{margin:0 .5rem;font-size:1.6rem;display:flex;gap:.5rem;align-items:center;font-weight:700;color:#000}.sticky{position:sticky;bottom:-2px;z-index:2;background:var(--box-background-hover-color)!important}.sticky[stuck]{box-shadow:0 2px 20px #00000059!important}.preview-modal{position:fixed;width:100vw;height:100vh;left:0;top:-1000vh;z-index:9999}.preview-modal .close{font-size:2rem;color:#fff;position:absolute;right:2rem;top:2rem;cursor:pointer}.preview-modal .mask{position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.7);transition:all .3s}.v-enter-active[data-v-c761cdb3],.v-leave-active[data-v-c761cdb3]{transition:opacity .3s ease}.v-enter-from[data-v-c761cdb3],.v-leave-to[data-v-c761cdb3]{opacity:0}.username[data-v-c761cdb3]{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num[data-v-c761cdb3]{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner[data-v-c761cdb3]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod[data-v-c761cdb3]{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag[data-v-c761cdb3]{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove[data-v-c761cdb3]{display:inline}.my-tag .remove[data-v-c761cdb3]{cursor:pointer;margin-left:.5rem;display:none}.add-tag[data-v-c761cdb3]{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor[data-v-c761cdb3]{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}[data-v-c761cdb3]:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark[data-v-c761cdb3]{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html[data-v-c761cdb3],body[data-v-c761cdb3]{font-size:62.5%}[data-v-c761cdb3]::-webkit-scrollbar{width:1rem;height:1rem}[data-v-c761cdb3]::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}[data-v-c761cdb3]::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex[data-v-c761cdb3]{display:flex;align-items:center;justify-content:space-between}.flex-end[data-v-c761cdb3]{justify-content:flex-end}.flex-center[data-v-c761cdb3]{justify-content:center}.p1[data-v-c761cdb3]{padding:1rem}.p2[data-v-c761cdb3]{padding:2rem}.p0[data-v-c761cdb3]{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http][data-v-c761cdb3]{text-underline-offset:.7ex;text-decoration:underline 1px}a[data-v-c761cdb3]{text-decoration:none;cursor:pointer}a[data-v-c761cdb3]:hover{text-decoration:underline}.tool[data-v-c761cdb3]{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg[data-v-c761cdb3]{width:1.6rem!important;height:1.6rem!important}.tool[data-v-c761cdb3]:hover{background:var(--color-third-bg)}.tool.no-hover[data-v-c761cdb3]{cursor:default}.tool.no-hover[data-v-c761cdb3]:hover{background:unset!important}.tool.disabled[data-v-c761cdb3]{cursor:not-allowed}.tool.disabled[data-v-c761cdb3]:hover{background:unset!important}.my-node[data-v-c761cdb3]{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node[data-v-c761cdb3]:hover{text-decoration:none;background:#e2e2e2}.msgs[data-v-c761cdb3]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box[data-v-c761cdb3]{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell[data-v-c761cdb3]{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal[data-v-c761cdb3]{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title[data-v-c761cdb3]{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option[data-v-c761cdb3]{display:flex;align-items:center;padding:.6rem 0}.modal .option>span[data-v-c761cdb3]{position:relative}.modal .mask[data-v-c761cdb3]{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2[data-v-c761cdb3]{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio[data-v-c761cdb3]{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio[data-v-c761cdb3]:first-child{border-left:none}.radio-group2 .active[data-v-c761cdb3]{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm[data-v-c761cdb3]{position:relative;display:inline-flex;justify-content:center}input[data-v-c761cdb3]{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input[data-v-c761cdb3]:hover{border:1px solid var(--color-input-border-hover)}input[data-v-c761cdb3]:focus{border:1px solid var(--color-active)}.danger[data-v-c761cdb3]{color:red!important}.pop-confirm-content[data-v-c761cdb3]{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text[data-v-c761cdb3]{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options[data-v-c761cdb3]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.Post[data-v-c761cdb3]{position:unset!important;background:transparent!important;overflow:unset!important}.Post .main[data-v-c761cdb3]{background:transparent!important;padding:unset!important;width:100%!important}.Post .close-btn[data-v-c761cdb3]{display:none}.post-detail[data-v-c761cdb3]{text-align:start;position:fixed;z-index:1000;left:0;right:0;bottom:0;top:0;background:rgba(46,47,48,.8);overflow:auto;font-size:1.4rem;display:flex;justify-content:center;flex-wrap:wrap}.post-detail[data-v-c761cdb3] .subtle{background-color:#ecfdf5e6;border-left:4px solid #a7f3d0}.post-detail.isNight[data-v-c761cdb3] .subtle{background-color:#1a3332;border-left:4px solid #047857}.post-detail .main[data-v-c761cdb3]{display:flex;justify-content:flex-end;padding:3rem 8rem 15rem;background:var(--color-main-bg);position:relative;outline:none}.post-detail .main .main-wrapper[data-v-c761cdb3]{width:77rem;padding-bottom:2rem;display:flex;flex-direction:column;align-items:center;position:relative}.post-detail .main .main-wrapper .post-wrapper .header:hover .add-tag[data-v-c761cdb3]{display:inline-block}.post-detail .main .main-wrapper .loading-wrapper[data-v-c761cdb3]{height:20rem;display:flex;justify-content:center;align-items:center}.post-detail .main .main-wrapper #no-comments-yet[data-v-c761cdb3]{color:#a9a9a9;font-weight:700;text-align:center;width:100%;margin-bottom:2rem;box-sizing:border-box}.post-detail .main .relationReply[data-v-c761cdb3]{position:fixed;width:25vw;top:6.5rem;bottom:15rem;z-index:100;transform:translate(calc(100% + 2rem));font-size:2rem;overflow:hidden}.post-detail .main .relationReply .my-cell[data-v-c761cdb3]{background:var(--color-second-bg);border-radius:var(--box-border-radius) var(--box-border-radius) 0 0}.post-detail .main .relationReply .comments[data-v-c761cdb3]{max-height:calc(100% - 4.2rem);overflow:auto;background:var(--color-second-bg);border-radius:0 0 var(--box-border-radius) var(--box-border-radius)}.post-detail .main .call-list[data-v-c761cdb3]{z-index:9;position:absolute;top:12rem;border:1px solid var(--color-main-bg);background:var(--color-call-list-bg);box-shadow:0 5px 15px #0000001a;overflow:auto;max-height:30rem;border-radius:var(--box-border-radius);min-width:8rem;box-sizing:content-box}.post-detail .main .call-list .call-item[data-v-c761cdb3]{border-top:1px solid var(--color-main-bg);height:3rem;display:flex;padding:0 1rem;align-items:center;cursor:pointer;font-size:14px;box-sizing:border-box}.post-detail .main .call-list .call-item .select[data-v-c761cdb3],.post-detail .main .call-list .call-item[data-v-c761cdb3]:hover,.post-detail .main .call-list .call-item.select[data-v-c761cdb3]{background:var(--color-main-bg);text-decoration:none}.post-detail .main .call-list .call-item[data-v-c761cdb3]:nth-child(1){border-top:1px solid transparent}@media screen and (max-width: 1500px){.post-detail .main-wrapper[data-v-c761cdb3]{width:65vw!important}}@media screen and (max-width: 1280px){.post-detail .main-wrapper[data-v-c761cdb3]{width:75vw!important}}@media screen and (max-width: 960px){.post-detail .main-wrapper[data-v-c761cdb3]{width:100vw!important}}.post-detail .scroll-top[data-v-c761cdb3]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3)}.post-detail .scroll-top svg[data-v-c761cdb3]{font-size:2.4rem}.post-detail .refresh[data-v-c761cdb3]{cursor:pointer;position:fixed;border-radius:.6rem;display:flex;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:23.5rem}.post-detail .refresh svg[data-v-c761cdb3]{font-size:2.4rem}.post-detail .scroll-to[data-v-c761cdb3]{cursor:pointer;position:fixed;border-radius:.6rem;align-items:center;justify-content:center;bottom:10rem;z-index:99;padding:.8rem 0;gap:1rem;width:4.2rem;transform:translate(6rem);font-size:2rem;background:var(--color-sp-btn-bg);color:var(--color-font-3);bottom:15rem;display:flex;flex-direction:column}.post-detail .scroll-to svg[data-v-c761cdb3]{font-size:2.4rem}.post-detail .scroll-to input[data-v-c761cdb3]{height:2.6rem;width:3.6rem;font-size:1.4rem;text-align:center;color:gray}.post-detail .close-btn[data-v-c761cdb3]{color:var(--color-font-3);cursor:pointer;position:fixed;top:3rem;transform:translate(4rem);font-size:1.6rem}.post-detail .top-reply[data-v-c761cdb3]{color:var(--color-font-3);cursor:pointer;font-size:2rem;display:flex}.base64_tooltip[data-v-c50fb66c]{box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;background:var(--color-third-bg);min-height:2.2rem;max-width:20rem;padding:1rem;position:fixed;z-index:9998;display:flex;align-items:center;border-radius:.5rem;cursor:pointer;line-break:anywhere;font-size:1.4rem;color:var(--color-font-8)}.base64_tooltip svg[data-v-c50fb66c]{margin-left:1rem;font-size:3rem;color:var(--color-gray)}.base64_tooltip[data-v-c50fb66c] .base-button{margin-left:1rem;margin-top:1rem}.msg[data-v-8bf692ea]{cursor:default;margin-bottom:2rem;display:flex;font-size:1.4rem;box-sizing:border-box;border-radius:var(--box-border-radius);color:var(--color-font-8);background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow)}.msg.success .left[data-v-8bf692ea]{background:var(--color-active)}.msg.warning .left[data-v-8bf692ea]{background:#c8c002}.msg.error .left[data-v-8bf692ea]{background:red}.msg .left[data-v-8bf692ea]{border-radius:var(--box-border-radius) 0 0 var(--box-border-radius);display:flex;align-items:center;background:var(--color-active);color:#fff;width:3.6rem;font-size:2.4rem;justify-content:center}.msg .left svg[data-v-8bf692ea]{cursor:pointer}.msg .right[data-v-8bf692ea]{flex:1;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}.tag-modal .wrapper[data-v-7e92a866]{z-index:9;background:var(--color-main-bg);color:var(--color-font-8);border-radius:1.6rem;font-size:1.4rem;padding:2rem 4rem;width:25rem}.tag-modal .wrapper .title[data-v-7e92a866]{font-weight:700}.tag-modal .wrapper .btns[data-v-7e92a866]{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1.5rem;font-size:1.4rem}.msgs[data-v-b73f4332]{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.tag-modal .modal-root[data-v-882b932b]{z-index:9;background:var(--color-second-bg);color:var(--color-font-8);border-radius:1.6rem;font-size:1.4rem;width:50vw;height:70vh;display:flex;flex-direction:column}.tag-modal .modal-root .modal-header[data-v-882b932b]{padding:2.4rem;display:flex;justify-content:space-between}.tag-modal .modal-root .modal-header .title[data-v-882b932b]{font-size:2.6rem;font-weight:700;text-align:left;margin-bottom:0}.tag-modal .modal-root .modal-header i[data-v-882b932b]{cursor:pointer;font-size:2.2rem}.tag-modal .modal-root .modal-body[data-v-882b932b]{padding:2rem;padding-top:0;flex:1;overflow:auto}.tag-modal .modal-root .modal-body[data-v-882b932b] .cell{padding:2rem}.v-enter-active,.v-leave-active{transition:opacity .3s ease}.v-enter-from,.v-leave-to{opacity:0}.username{font-weight:700;font-size:1.4rem;margin-right:1rem}.link-num{font-size:1.2rem;font-weight:700;color:#e02a2a}.owner{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;margin-right:1rem;transform:scale(.8)}.mod{display:inline-block;background-color:transparent;color:#1484cd;border-radius:.3rem;padding:0 .3rem;cursor:default;border:2px solid #1484cd;font-size:1.2rem;font-weight:700;transform:scale(.8);background:#1484cd;color:#fff;margin-right:1rem}.my-tag{font-size:1.4rem;color:red;margin-left:1rem}.my-tag:hover .remove{display:inline}.my-tag .remove{cursor:pointer;margin-left:.5rem;display:none}.add-tag{font-size:2.4rem;transform:translateY(.2rem);line-height:1rem;display:inline-block;margin-left:1rem;cursor:pointer;position:absolute;display:none}.floor{margin-left:.5rem;font-size:1.1rem;line-height:1rem;border-radius:.5rem;display:inline-block;background-color:var(--color-floor);color:var(--color-floor-font);padding:3px 9px;cursor:default}:root{--color-main-bg: #e2e2e2;--color-second-bg: white;--color-third-bg: #e2e2e2;--color-item-bg: white;--color-swtich-bg: #dcdfe6;--color-active: #409eff;--color-font: #999;--color-font-8: rgba(0, 0, 0, .8);--color-font-3: rgba(0, 0, 0, .3);--color-font-pure: black;--color-input-bg: white;--color-input-border: #e2e2e2;--color-input-border-hover: #a3a6ad;--color-radio-border: #e2e2e2;--color-tooltip-bg: white;--color-tooltip-shadow: #bbbbbb;--color-scrollbar: #93ade3;--color-line: #e2e2e2;--color-loading-1: #00000033;--color-loading-2: #000;--color-floor: #f0f0f0;--color-floor-font: #bdbdbd;--color-editor-toolbar: #f6f7f8;--color-sp-btn-bg: #f1f1f1;--color-call-list-bg: white;--color-top-reply-wrap-bg: #f2f3f5;--color-top-reply-wrap-line: #d2d2d2}html.dark{--color-main-bg: #22303f;--color-second-bg: #18222d;--color-third-bg: #31475e;--color-item-bg: #18222d;--color-swtich-bg: #4c4d4f;--color-active: #409eff;--color-font: rgba(255, 255, 255, .5);--color-font-8: rgba(255, 255, 255, .8);--color-font-3: rgba(255, 255, 255, .3);--color-font-pure: white;--color-input-bg: #333333;--color-input-border: #6c6e72;--color-input-border-hover: #a3a6ad;--color-radio-border: #454847;--color-tooltip-bg: #31475e;--color-tooltip-shadow: #3b3b3b;--color-scrollbar: #5c5d5e;--color-line: var(--box-border-color);--color-loading-1: rgba(178, 177, 177, .2);--color-loading-2: #ffffff;--color-floor: #293b4d;--color-floor-font: rgba(255, 255, 255, .3);--color-editor-toolbar: var(--box-background-hover-color);--color-sp-btn-bg: #31475e;--color-call-list-bg: #31475e;--color-top-reply-wrap-bg: #212f3e;--color-top-reply-wrap-line: #3b536d}html,body{font-size:62.5%}::-webkit-scrollbar{width:1rem;height:1rem}::-webkit-scrollbar-track{background:transparent;border-radius:.2rem}::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:1rem}.flex{display:flex;align-items:center;justify-content:space-between}.flex-end{justify-content:flex-end}.flex-center{justify-content:center}.p1{padding:1rem}.p2{padding:2rem}.p0{padding:0!important}body :is(.topic_content,.reply_content) a[href^=http]{text-underline-offset:.7ex;text-decoration:underline 1px}a{text-decoration:none;cursor:pointer}a:hover{text-decoration:underline}.tool{position:relative;display:flex;align-items:center;border-radius:.3rem;cursor:pointer;height:2.6rem;padding:0 .5rem;gap:.2rem}.tool>svg{width:1.6rem!important;height:1.6rem!important}.tool:hover{background:var(--color-third-bg)}.tool.no-hover{cursor:default}.tool.no-hover:hover{background:unset!important}.tool.disabled{cursor:not-allowed}.tool.disabled:hover{background:unset!important}.my-node{border-radius:.2rem;padding:.4rem;font-size:1rem;color:#999;background:#f5f5f5;cursor:pointer}.my-node:hover{text-decoration:none;background:#e2e2e2}.msgs{position:fixed;margin-left:calc(50% - 25rem);width:50rem;z-index:9999;bottom:0;left:0;right:0}.my-box{box-shadow:0 2px 3px #0000001a;box-shadow:#00000014 0 4px 12px;border-radius:var(--box-border-radius);background:var(--box-background-color);margin-bottom:2rem;width:100%;box-sizing:border-box;transition:background-color .3s}.my-cell{color:var(--color-font);padding:.8rem 1rem;font-size:1.4rem;line-height:150%;text-align:left;border-bottom:1px solid var(--color-line)}.modal{position:fixed;z-index:1001;width:100vw;height:100vh;left:0;top:0;display:flex;justify-content:center;align-items:center}.modal .title{font-size:2.4rem;margin-bottom:1rem;text-align:center}.modal .option{display:flex;align-items:center;padding:.6rem 0}.modal .option>span{position:relative}.modal .mask{position:fixed;width:100vw;height:100vh;left:0;top:0;background-color:#1d1c1c47}.radio-group2{display:inline-flex;border-radius:.5rem;overflow:hidden;border:1px solid var(--color-radio-border);background:var(--box-background-alt-color)}.radio-group2 .radio{cursor:pointer;background:transparent;padding:.5rem 1.2rem;border-left:1px solid var(--color-radio-border);font-size:1.3rem;color:var(--color-gray)}.radio-group2 .radio:first-child{border-left:none}.radio-group2 .active{background:var(--color-third-bg);color:var(--color-font)}.pop-confirm{position:relative;display:inline-flex;justify-content:center}input{height:3rem;outline:unset;border:1px solid var(--color-input-border);padding:0 .5rem;border-radius:5px;box-sizing:border-box;transition:all .3s;background:var(--color-input-bg);color:var(--color-font)}input:hover{border:1px solid var(--color-input-border-hover)}input:focus{border:1px solid var(--color-active)}.danger{color:red!important}.pop-confirm-content{position:fixed;background:var(--color-tooltip-bg);box-shadow:0 0 6px 1px var(--color-tooltip-shadow);color:var(--color-font-8);padding:1.5rem;border-radius:.8rem;transform:translate(-50%,calc(-100% - 1rem));z-index:1001}.pop-confirm-content .text{text-align:start;font-size:1.6rem;width:15rem;min-width:15rem}.pop-confirm-content .options{margin-top:1.5rem;display:flex;justify-content:flex-end;align-items:center;gap:1rem}.target-user-tags[data-v-15f2a343]{background:var(--color-second-bg);color:var(--color-font);word-break:break-all;text-align:start;font-size:1.4rem;box-shadow:0 2px 3px #0000001a;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.target-user-tags .add-tag[data-v-15f2a343]{display:inline-block}.loaded[data-v-15f2a343]{font-size:1.4rem;display:flex;align-items:center;gap:1rem;color:var(--color-font-pure)} ');

    Vc();
    let e = vue.createApp(Pc);
    e.config.unwrapInjectedRef = !0, e.mount(fe);
  }

})(Vue);